import{a as Ws,b as Gs,g as fs,r as b,c as Ks,R as se,u as Ie,L as $,d as Vs,e as ms,N as Js,B as Xs,f as Qs,h as W}from"./react-vendor-DhpbOPac.js";import{m as S,A as ot,M as Ys}from"./ui-vendor-BAFQOdfE.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var Qe={exports:{}},Se={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Et;function Zs(){if(Et)return Se;Et=1;var n=Ws(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var u,h={},f=null,m=null;d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),c.ref!==void 0&&(m=c.ref);for(u in c)s.call(c,u)&&!i.hasOwnProperty(u)&&(h[u]=c[u]);if(l&&l.defaultProps)for(u in c=l.defaultProps,c)h[u]===void 0&&(h[u]=c[u]);return{$$typeof:e,type:l,key:f,ref:m,props:h,_owner:a.current}}return Se.Fragment=t,Se.jsx=o,Se.jsxs=o,Se}var At;function er(){return At||(At=1,Qe.exports=Zs()),Qe.exports}var r=er(),De={},Pt;function tr(){if(Pt)return De;Pt=1;var n=Gs();return De.createRoot=n.createRoot,De.hydrateRoot=n.hydrateRoot,De}var sr=tr();const rr=fs(sr),gs=b.createContext(void 0);function nr({children:n}){const[e,t]=b.useState(()=>{try{const d=localStorage.getItem("cart");if(d){const u=JSON.parse(d);return Array.isArray(u)?u:[]}return[]}catch(d){return console.error("Error loading cart from localStorage:",d),[]}});b.useEffect(()=>{try{localStorage.setItem("cart",JSON.stringify(e))}catch(d){console.error("Error saving cart to localStorage:",d)}},[e]);const s=(d,u,h,f=1)=>{t(m=>{const g=m.findIndex(w=>w.product.id===d.id&&(w.selectedSize||"")===u&&(w.selectedColor||"")===h);if(g>=0){const w=[...m];return w[g].quantity+=f,w}return[...m,{product:d,quantity:f,selectedSize:u,selectedColor:h}]})},a=(d,u,h)=>{console.log("RemoveItem called with:",{productId:d,size:u,color:h}),console.log("Current cart items:",e.map(f=>({id:f.product.id,size:f.selectedSize,color:f.selectedColor}))),t(f=>{const m=f.filter(g=>!(g.product.id===d&&(g.selectedSize||"")===u&&(g.selectedColor||"")===h));return console.log("Items after filter:",m.length,"vs before:",f.length),m})},i=(d,u,h,f)=>{if(f<=0){a(d,u,h);return}t(m=>m.map(g=>g.product.id===d&&(g.selectedSize||"")===u&&(g.selectedColor||"")===h?{...g,quantity:f}:g))},o=()=>{t([])},l=Array.isArray(e)?e.reduce((d,u)=>d+u.product.price*u.quantity,0):0,c=Array.isArray(e)?e.reduce((d,u)=>d+u.quantity,0):0;return r.jsx(gs.Provider,{value:{items:e,addItem:s,removeItem:a,updateQuantity:i,clearCart:o,total:l,itemCount:c},children:n})}function Re(){const n=b.useContext(gs);if(!n)throw new Error("useCart must be used within CartProvider");return n}const ar="modulepreload",ir=function(n){return"/"+n},Ot={},$e=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");a=c(t.map(d=>{if(d=ir(d),d in Ot)return;Ot[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":ar,u||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},or=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>$e(async()=>{const{default:s}=await Promise.resolve().then(()=>ke);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class bt extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class lr extends bt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Tt extends bt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class It extends bt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var lt;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(lt||(lt={}));var cr=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};class dr{constructor(e,{headers:t={},customFetch:s,region:a=lt.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=or(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return cr(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=t;let l={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(w=>{throw new lr(w)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Tt(h);if(!h.ok)throw new It(h);let m=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield h.json():m==="application/octet-stream"?g=yield h.blob():m==="text/event-stream"?g=h:m==="multipart/form-data"?g=yield h.formData():g=yield h.text(),{data:g,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof It||a instanceof Tt?a.context:void 0}}})}}var D={},ue={},he={},fe={},me={},ge={},ur=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_e=ur();const hr=_e.fetch,ps=_e.fetch.bind(_e),ys=_e.Headers,fr=_e.Request,mr=_e.Response,ke=Object.freeze(Object.defineProperty({__proto__:null,Headers:ys,Request:fr,Response:mr,default:ps,fetch:hr},Symbol.toStringTag,{value:"Module"})),gr=Ks(ke);var Ue={},Rt;function xs(){if(Rt)return Ue;Rt=1,Object.defineProperty(Ue,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Ue.default=n,Ue}var $t;function vs(){if($t)return ge;$t=1;var n=ge&&ge.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ge,"__esModule",{value:!0});const e=n(gr),t=n(xs());class s{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,h,f;let m=null,g=null,w=null,j=d.status,k=d.statusText;if(d.ok){if(this.method!=="HEAD"){const N=await d.text();N===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=N:g=JSON.parse(N))}const x=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),p=(h=d.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");x&&p&&p.length>1&&(w=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,w=null,j=406,k="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const x=await d.text();try{m=JSON.parse(x),Array.isArray(m)&&d.status===404&&(g=[],m=null,j=200,k="OK")}catch{d.status===404&&x===""?(j=204,k="No Content"):m={message:x}}if(m&&this.isMaybeSingle&&(!((f=m?.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,j=200,k="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:g,count:w,status:j,statusText:k}});return this.shouldThrowOnError||(c=c.catch(d=>{var u,h,f;return{error:{message:`${(u=d?.name)!==null&&u!==void 0?u:"FetchError"}: ${d?.message}`,details:`${(h=d?.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=d?.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,o)}returns(){return this}overrideTypes(){return this}}return ge.default=s,ge}var Lt;function bs(){if(Lt)return me;Lt=1;var n=me&&me.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(me,"__esModule",{value:!0});const e=n(vs());class t extends e.default{select(a){let i=!1;const o=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(d,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var u;const h=[a?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${f}"; options=${h};`,d==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return me.default=t,me}var Ft;function wt(){if(Ft)return fe;Ft=1;var n=fe&&fe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fe,"__esModule",{value:!0});const e=n(bs());class t extends e.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const o=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${o})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(a,`${c}fts${d}.${i}`),this}match(a){return Object.entries(a).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(a,i,o){return this.url.searchParams.append(a,`not.${i}.${o}`),this}or(a,{foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,i,o){return this.url.searchParams.append(a,`${i}.${o}`),this}}return fe.default=t,fe}var Dt;function ws(){if(Dt)return he;Dt=1;var n=he&&he.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(he,"__esModule",{value:!0});const e=n(wt());class t{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=i,this.schema=o,this.fetch=l}select(a,{head:i=!1,count:o}={}){const l=i?"HEAD":"GET";let c=!1;const d=(a??"*").split("").map(u=>/\s/.test(u)&&!c?"":(u==='"'&&(c=!c),u)).join("");return this.url.searchParams.set("select",d),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:i,defaultToNull:o=!0}={}){const l="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),o||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(a)){const d=a.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(d.length>0){const u=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){const d="POST",u=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&u.push(this.headers.Prefer),l&&u.push(`count=${l}`),c||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(a)){const h=a.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:i}={}){const o="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const i="DELETE",o=[];return a&&o.push(`count=${a}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return he.default=t,he}var Ce={},Ee={},Ut;function pr(){return Ut||(Ut=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.version=void 0,Ee.version="0.0.0-automated"),Ee}var Mt;function yr(){if(Mt)return Ce;Mt=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.DEFAULT_HEADERS=void 0;const n=pr();return Ce.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Ce}var Bt;function xr(){if(Bt)return ue;Bt=1;var n=ue&&ue.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ue,"__esModule",{value:!0});const e=n(ws()),t=n(wt()),s=yr();class a{constructor(o,{headers:l={},schema:c,fetch:d}={}){this.url=o,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),l),this.schemaName=c,this.fetch=d}from(o){const l=new URL(`${this.url}/${o}`);return new e.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new a(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:c=!1,get:d=!1,count:u}={}){let h;const f=new URL(`${this.url}/rpc/${o}`);let m;c||d?(h=c?"HEAD":"GET",Object.entries(l).filter(([w,j])=>j!==void 0).map(([w,j])=>[w,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([w,j])=>{f.searchParams.append(w,j)})):(h="POST",m=l);const g=Object.assign({},this.headers);return u&&(g.Prefer=`count=${u}`),new t.default({method:h,url:f,headers:g,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}}return ue.default=a,ue}var qt;function vr(){if(qt)return D;qt=1;var n=D&&D.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(D,"__esModule",{value:!0}),D.PostgrestError=D.PostgrestBuilder=D.PostgrestTransformBuilder=D.PostgrestFilterBuilder=D.PostgrestQueryBuilder=D.PostgrestClient=void 0;const e=n(xr());D.PostgrestClient=e.default;const t=n(ws());D.PostgrestQueryBuilder=t.default;const s=n(wt());D.PostgrestFilterBuilder=s.default;const a=n(bs());D.PostgrestTransformBuilder=a.default;const i=n(vs());D.PostgrestBuilder=i.default;const o=n(xs());return D.PostgrestError=o.default,D.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:o.default},D}var br=vr();const wr=fs(br),{PostgrestClient:jr,PostgrestQueryBuilder:mi,PostgrestFilterBuilder:gi,PostgrestTransformBuilder:pi,PostgrestBuilder:yi,PostgrestError:xi}=wr;function _r(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const kr=_r(),Nr="2.11.15",Sr=`realtime-js/${Nr}`,Cr="1.0.0",js=1e4,Er=1e3;var Pe;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Pe||(Pe={}));var M;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(M||(M={}));var K;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(K||(K={}));var ct;(function(n){n.websocket="websocket"})(ct||(ct={}));var oe;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(oe||(oe={}));class Ar{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const a=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+a));o=o+a;const c=s.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class _s{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var L;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(L||(L={}));const zt=(n,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=Pr(o,n,e,a),i),{})},Pr=(n,e,t,s)=>{const a=e.find(l=>l.name===n),i=a?.type,o=t[n];return i&&!s.includes(i)?ks(i,o):dt(o)},ks=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Rr(e,t)}switch(n){case L.bool:return Or(e);case L.float4:case L.float8:case L.int2:case L.int4:case L.int8:case L.numeric:case L.oid:return Tr(e);case L.json:case L.jsonb:return Ir(e);case L.timestamp:return $r(e);case L.abstime:case L.date:case L.daterange:case L.int4range:case L.int8range:case L.money:case L.reltime:case L.text:case L.time:case L.timestamptz:case L.timetz:case L.tsrange:case L.tstzrange:return dt(e);default:return dt(e)}},dt=n=>n,Or=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Tr=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Ir=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Rr=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>ks(e,l))}return n},$r=n=>typeof n=="string"?n.replace(" ","T"):n,Ns=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ye{constructor(e,t,s={},a=js){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ht;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Ht||(Ht={}));class Oe{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oe.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Oe.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Oe.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const i=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const f=u.map(j=>j.presence_ref),m=h.map(j=>j.presence_ref),g=u.filter(j=>m.indexOf(j.presence_ref)<0),w=h.filter(j=>f.indexOf(j.presence_ref)<0);g.length>0&&(l[d]=g),w.length>0&&(c[d]=w)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(e,t,s,a){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}s(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,a(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wt;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Wt||(Wt={}));var Gt;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Gt||(Gt={}));var X;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(X||(X={}));class jt{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=M.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ye(this,K.join,this.params,this.timeout),this.rejoinTimer=new _s(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=M.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=M.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=M.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=M.errored,this.rejoinTimer.scheduleTimeout())}),this._on(K.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Oe(this),this.broadcastEndpointURL=Ns(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==M.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>e?.(X.CHANNEL_ERROR,u)),this._onClose(()=>e?.(X.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e?.(X.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f?.length)!==null&&h!==void 0?h:0,g=[];for(let w=0;w<m;w++){const j=f[w],{filter:{event:k,schema:C,table:x,filter:p}}=j,N=u&&u[w];if(N&&N.event===k&&N.schema===C&&N.table===x&&N.filter===p)g.push(Object.assign(Object.assign({},j),{id:N.id}));else{this.unsubscribe(),this.state=M.errored,e?.(X.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(X.SUBSCRIBED);return}}).receive("error",u=>{this.state=M.errored,e?.(X.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e?.(X.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=M.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(K.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Ye(this,K.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Ye(this,e,t,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=K;if(s&&[l,c,d,u].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,t,s);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,w,j;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((j=(w=m.filter)===null||w===void 0?void 0:w.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(m=>m.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var g,w,j,k,C,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const p=m.id,N=(g=m.filter)===null||g===void 0?void 0:g.event;return p&&((w=t.ids)===null||w===void 0?void 0:w.includes(p))&&(N==="*"||N?.toLocaleLowerCase()===((j=t.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const p=(C=(k=m?.filter)===null||k===void 0?void 0:k.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return p==="*"||p===((x=t?.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:w,table:j,commit_timestamp:k,type:C,errors:x}=g;f=Object.assign(Object.assign({},{schema:w,table:j,commit_timestamp:k,eventType:C,new:{},old:{},errors:x}),this._getPayloadRecords(g))}m.callback(f,s)})}_isClosed(){return this.state===M.closed}_isJoined(){return this.state===M.joined}_isJoining(){return this.state===M.joining}_isLeaving(){return this.state===M.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),i={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&jt.isEqual(a.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(K.close,{},e)}_onError(e){this._on(K.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=M.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=zt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=zt(e.columns,e.old_record)),t}}const Kt=()=>{},Lr=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fr{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=js,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Kt,this.ref=0,this.logger=Kt,this.conn=null,this.sendBuffer=[],this.serializer=new Ar,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>$e(async()=>{const{default:c}=await Promise.resolve().then(()=>ke);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${ct.websocket}`,this.httpEndpoint=Ns(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const a=(s=t?.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t?.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new _s(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=kr),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Cr}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Pe.connecting:return oe.Connecting;case Pe.open:return oe.Open;case Pe.closing:return oe.Closing;default:return oe.Closed}}isConnected(){return this.connectionState()===oe.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new jt(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:Sr};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(K.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Er,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:a,payload:i,ref:o}=t;s==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(K.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Lr],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class _t extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function U(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Dr extends _t{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ut extends _t{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ur=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};const Ss=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>$e(async()=>{const{default:s}=await Promise.resolve().then(()=>ke);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Mr=()=>Ur(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $e(()=>Promise.resolve().then(()=>ke),void 0)).Response:Response}),ht=n=>{if(Array.isArray(n))return n.map(t=>ht(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=ht(s)}),e};var ce=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};const Ze=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Br=(n,e,t)=>ce(void 0,void 0,void 0,function*(){const s=yield Mr();n instanceof s&&!t?.noResolveJson?n.json().then(a=>{e(new Dr(Ze(a),n.status||500))}).catch(a=>{e(new ut(Ze(a),a))}):e(new ut(Ze(n),n))}),qr=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s&&(a.body=JSON.stringify(s)),Object.assign(Object.assign({},a),t))};function Le(n,e,t,s,a,i){return ce(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(t,qr(e,s,a,i)).then(c=>{if(!c.ok)throw c;return s?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Br(c,l,s))})})}function He(n,e,t,s){return ce(this,void 0,void 0,function*(){return Le(n,"GET",e,t,s)})}function ee(n,e,t,s,a){return ce(this,void 0,void 0,function*(){return Le(n,"POST",e,s,a,t)})}function zr(n,e,t,s,a){return ce(this,void 0,void 0,function*(){return Le(n,"PUT",e,s,a,t)})}function Hr(n,e,t,s){return ce(this,void 0,void 0,function*(){return Le(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Cs(n,e,t,s,a){return ce(this,void 0,void 0,function*(){return Le(n,"DELETE",e,s,a,t)})}var q=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};const Wr={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gr{constructor(e,t={},s,a){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Ss(a)}uploadOrUpdate(e,t,s,a){return q(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Vt),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a?.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:l},o?.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(U(i))return{data:null,error:i};throw i}})}upload(e,t,s){return q(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return q(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:Vt.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(U(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return q(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const i=yield ee(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new _t("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}update(e,t,s){return q(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return q(this,void 0,void 0,function*(){try{return{data:yield ee(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(U(a))return{data:null,error:a};throw a}})}copy(e,t,s){return q(this,void 0,void 0,function*(){try{return{data:{path:(yield ee(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(U(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return q(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield ee(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(U(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return q(this,void 0,void 0,function*(){try{const a=yield ee(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(U(a))return{data:null,error:a};throw a}})}download(e,t){return q(this,void 0,void 0,function*(){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield He(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(U(l))return{data:null,error:l};throw l}})}info(e){return q(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield He(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ht(s),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}exists(e){return q(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Hr(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(U(s)&&s instanceof ut){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&a.push(i);const l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(e){return q(this,void 0,void 0,function*(){try{return{data:yield Cs(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}})}list(e,t,s){return q(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Wr),t),{prefix:e||""});return{data:yield ee(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(U(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Kr="2.7.1",Vr={"X-Client-Info":`storage-js/${Kr}`};var pe=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};class Jr{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Vr),t),this.fetch=Ss(s)}listBuckets(){return pe(this,void 0,void 0,function*(){try{return{data:yield He(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(U(e))return{data:null,error:e};throw e}})}getBucket(e){return pe(this,void 0,void 0,function*(){try{return{data:yield He(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return pe(this,void 0,void 0,function*(){try{return{data:yield ee(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return pe(this,void 0,void 0,function*(){try{return{data:yield zr(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}emptyBucket(e){return pe(this,void 0,void 0,function*(){try{return{data:yield ee(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}})}deleteBucket(e){return pe(this,void 0,void 0,function*(){try{return{data:yield Cs(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}})}}class Xr extends Jr{constructor(e,t={},s){super(e,t,s)}from(e){return new Gr(this.url,this.headers,e,this.fetch)}}const Qr="2.52.0";let Ae="";typeof Deno<"u"?Ae="deno":typeof document<"u"?Ae="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ae="react-native":Ae="node";const Yr={"X-Client-Info":`supabase-js-${Ae}/${Qr}`},Zr={headers:Yr},en={schema:"public"},tn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sn={};var rn=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};const nn=n=>{let e;return n?e=n:typeof fetch>"u"?e=ps:e=fetch,(...t)=>e(...t)},an=()=>typeof Headers>"u"?ys:Headers,on=(n,e,t)=>{const s=nn(t),a=an();return(i,o)=>rn(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:n;let d=new a(o?.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:d}))})};var ln=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};function cn(n){return n.endsWith("/")?n:n+"/"}function dn(n,e){var t,s;const{db:a,auth:i,realtime:o,global:l}=n,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(t=h?.headers)!==null&&t!==void 0?t:{}),(s=l?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>ln(this,void 0,void 0,function*(){return""})};return n.accessToken?f.accessToken=n.accessToken:delete f.accessToken,f}const Es="2.71.1",we=30*1e3,ft=3,et=ft*we,un="http://localhost:9999",hn="supabase.auth.token",fn={"X-Client-Info":`gotrue-js/${Es}`},mt="X-Supabase-Api-Version",As={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mn=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gn=600*1e3;class kt extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function A(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class pn extends kt{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function yn(n){return A(n)&&n.name==="AuthApiError"}class Ps extends kt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class re extends kt{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class Z extends re{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xn(n){return A(n)&&n.name==="AuthSessionMissingError"}class Me extends re{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Be extends re{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qe extends re{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vn(n){return A(n)&&n.name==="AuthImplicitGrantRedirectError"}class Jt extends re{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gt extends re{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function tt(n){return A(n)&&n.name==="AuthRetryableFetchError"}class Xt extends re{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class pt extends re{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const We="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qt=` 	
\r=`.split(""),bn=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Qt.length;e+=1)n[Qt[e].charCodeAt(0)]=-2;for(let e=0;e<We.length;e+=1)n[We[e].charCodeAt(0)]=e;return n})();function Yt(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(We[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(We[s]),e.queuedBits-=6}}function Os(n,e,t){const s=bn[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Zt(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{_n(o,s,t)};for(let o=0;o<n.length;o+=1)Os(n.charCodeAt(o),a,i);return e.join("")}function wn(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function jn(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}wn(s,e)}}function _n(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function kn(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)Os(n.charCodeAt(a),t,s);return new Uint8Array(e)}function Nn(n){const e=[];return jn(n,t=>e.push(t)),new Uint8Array(e)}function Sn(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return n.forEach(a=>Yt(a,t,s)),Yt(null,t,s),e.join("")}function Cn(n){return Math.round(Date.now()/1e3)+n}function En(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const G=()=>typeof window<"u"&&typeof document<"u",ne={tested:!1,writable:!1},Ts=()=>{if(!G())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ne.tested)return ne.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ne.tested=!0,ne.writable=!0}catch{ne.tested=!0,ne.writable=!1}return ne.writable};function An(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const Is=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>$e(async()=>{const{default:s}=await Promise.resolve().then(()=>ke);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Pn=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",je=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ae=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Y=async(n,e)=>{await n.removeItem(e)};class Je{constructor(){this.promise=new Je.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Je.promiseConstructor=Promise;function st(n){const e=n.split(".");if(e.length!==3)throw new pt("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!mn.test(e[s]))throw new pt("JWT not in base64url format");return{header:JSON.parse(Zt(e[0])),payload:JSON.parse(Zt(e[1])),signature:kn(e[2]),raw:{header:e[0],payload:e[1]}}}async function On(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Tn(n,e){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function In(n){return("0"+n.toString(16)).substr(-2)}function Rn(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let i=0;i<56;i++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,In).join("")}async function $n(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Ln(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await $n(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ye(n,e,t=!1){const s=Rn();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await je(n,`${e}-code-verifier`,a);const i=await Ln(s);return[i,s===i?"plain":"s256"]}const Fn=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Dn(n){const e=n.headers.get(mt);if(!e||!e.match(Fn))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Un(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Mn(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Bn=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xe(n){if(!Bn.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rt(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function es(n){return JSON.parse(JSON.stringify(n))}var qn=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};const ie=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),zn=[502,503,504];async function ts(n){var e;if(!Pn(n))throw new gt(ie(n),0);if(zn.includes(n.status))throw new gt(ie(n),n.status);let t;try{t=await n.json()}catch(i){throw new Ps(ie(i),i)}let s;const a=Dn(n);if(a&&a.getTime()>=As["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Xt(ie(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Z}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Xt(ie(t),n.status,t.weak_password.reasons);throw new pn(ie(t),n.status||500,s)}const Hn=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function T(n,e,t,s){var a;const i=Object.assign({},s?.headers);i[mt]||(i[mt]=As["2024-01-01"].name),s?.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Wn(n,e,t+l,{headers:i,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(c):{data:Object.assign({},c),error:null}}async function Wn(n,e,t,s,a,i){const o=Hn(e,s,a,i);let l;try{l=await n(t,Object.assign({},o))}catch(c){throw console.error(c),new gt(ie(c),0)}if(l.ok||await ts(l),s?.noResolveJson)return l;try{return await l.json()}catch(c){await ts(c)}}function J(n){var e;let t=null;Jn(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Cn(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function ss(n){const e=J(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function te(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Gn(n){return{data:n,error:null}}function Kn(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:i}=n,o=qn(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Vn(n){return n}function Jn(n){return n.access_token&&n.refresh_token&&n.expires_in}const nt=["global","local","others"];var Xn=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};class Qn{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Is(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=nt[0]){if(nt.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nt.join(", ")}`);try{return await T(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(A(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await T(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:te})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Xn(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await T(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Kn,redirectTo:t?.redirectTo})}catch(t){if(A(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await T(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:te})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await T(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Vn});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(g.split(";")[1].split("=")[1]);d[`${j}Page`]=w}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(A(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){xe(e);try{return await T(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:te})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){xe(e);try{return await T(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:te})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){xe(e);try{return await T(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:te})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){xe(e.userId);try{const{data:t,error:s}=await T(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(A(t))return{data:null,error:t};throw t}}async _deleteFactor(e){xe(e.userId),xe(e.id);try{return{data:await T(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}}function rs(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Yn(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ve={debug:!!(globalThis&&Ts()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Rs extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Zn extends Rs{}async function ea(n,e,t){ve.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),ve.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){ve.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{ve.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw ve.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Zn(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ve.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Yn();const ta={url:un,storageKey:hn,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fn,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ns(n,e,t){return await t()}const be={};class Te{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Te.nextInstanceID,Te.nextInstanceID+=1,this.instanceID>0&&G()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},ta),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Qn({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Is(a.fetch),this.lock=a.lock||ns,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:G()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=ea:this.lock=ns,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Ts()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rs(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=rs(this.memoryStorage)),G()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=be[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){be[this.storageKey]=Object.assign(Object.assign({},be[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=be[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){be[this.storageKey]=Object.assign(Object.assign({},be[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Es}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=An(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),G()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),vn(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return A(t)?{error:t}:{error:new Ps("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const i=await T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:J}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,a;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await ye(this.storage,this.storageKey)),i=await T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:u,password:h,data:(t=f?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:g},xform:J})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=f?.data)!==null&&s!==void 0?s:{},channel:(a=f?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:J})}else throw new Be("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await T(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:ss})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await T(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:ss})}else throw new Be("You must provide either an email or phone number and a password");const{data:s,error:a}=t;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Me}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,a,i,o,l,c,d,u,h,f,m;let g,w;if("message"in e)g=e.message,w=e.signature;else{const{chain:j,wallet:k,statement:C,options:x}=e;let p;if(G())if(typeof k=="object")p=k;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))p=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=k}const N=new URL((t=x?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in p&&p.signIn){const O=await p.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x?.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),C?{statement:C}:null));let R;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")R=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)R=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)g=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),w=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in p)||typeof p.signMessage!="function"||!("publicKey"in p)||typeof p!="object"||!p.publicKey||!("toBase58"in p.publicKey)||typeof p.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${N.host} wants you to sign in with your Solana account:`,p.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(a=(s=x?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=x?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((d=x?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(u=x?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const O=await p.signMessage(new TextEncoder().encode(g),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=O}}try{const{data:j,error:k}=await T(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Sn(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:J});if(k)throw k;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Me}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:k})}catch(j){if(A(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const t=await ae(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:i,error:o}=await T(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:J});if(await Y(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Me}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(A(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:i,nonce:o}=e,l=await T(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:J}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Me}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,a,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await ye(this.storage,this.storageKey));const{error:h}=await T(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await T(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c?.data)!==null&&a!==void 0?a:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:u}}throw new Be("You must provide either an email or phone number.")}catch(l){if(A(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{let a,i;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await T(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:J});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(A(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,s,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ye(this.storage,this.storageKey)),await T(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Gn})}catch(i){if(A(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Z;const{error:a}=await T(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(A(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:i}=e,{error:o}=await T(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:a,options:i}=e,{data:o,error:l}=await T(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new Be("You must provide either an email or phone number and a type")}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ae(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<et:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await ae(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=rt()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await T(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:te}):await this._useSession(async t=>{var s,a,i;const{data:o,error:l}=t;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Z}:await T(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:te})})}catch(t){if(A(t))return xn(t)&&(await this._removeSession(),await Y(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new Z;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await ye(this.storage,this.storageKey));const{data:d,error:u}=await T(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:te});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Z;const t=Date.now()/1e3;let s=t,a=!0,i=null;const{payload:o}=st(e.access_token);if(o.exp&&(s=o.exp,a=s<=t),a){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(A(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Z;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!G())throw new qe("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qe(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Jt("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qe("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Jt("No code detected.");const{data:C,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const p=new URL(window.location.href);return p.searchParams.delete("code"),window.history.replaceState(window.history.state,"",p.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new qe("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=we&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const g=f-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,u);const{data:w,error:j}=await this._getUser(i);if(j)throw j;const k={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:e.type},error:null}}catch(s){if(A(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ae(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:i}=t;if(i)return{error:i};const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(yn(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Y(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=En(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await ye(this.storage,this.storageKey,!0));try{return await T(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(A(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await T(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return G()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(A(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:i,error:o}=t;if(o)throw o;return await T(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Tn(async a=>(a>0&&await On(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await T(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:J})),(a,i)=>{const o=200*Math.pow(2,a);return i&&tt(i)&&Date.now()+o-s<we})}catch(s){if(this._debug(t,"error",s),A(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),G()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await ae(this.storage,this.storageKey);if(a&&this.userStorage){let o=await ae(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await je(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o?.user)!==null&&e!==void 0?e:rt()}else if(a&&!a.user&&!a.user){const o=await ae(this.storage,this.storageKey+"-user");o&&o?.user?(a.user=o.user,await Y(this.storage,this.storageKey+"-user"),await je(this.storage,this.storageKey,a)):a.user=rt()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<et;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${et}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),tt(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&o?.user?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Z;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Je;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Z;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),A(i)){const o={session:null,error:i};return tt(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await je(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const i=es(a);await je(this.storage,this.storageKey,i)}else{const a=es(t);await je(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Y(this.storage,this.storageKey),await Y(this.storage,this.storageKey+"-code-verifier"),await Y(this.storage,this.storageKey+"-user"),this.userStorage&&await Y(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&G()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),we);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/we);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${we}ms, refresh threshold is ${ft} ticks`),a<=ft&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Rs)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!G()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await ye(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s?.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:i}=t;return i?{data:null,error:i}:await T(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:i,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await T(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=c?.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await T(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:i}=t;return i?{data:null,error:i}:await T(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=e?.factors||[],a=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=st(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(t=a.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(l=>l.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+gn>a)return s;const{data:i,error:o}=await T(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};s=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=st(s);t?.allowExpired||Un(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const u=Mn(a.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Nn(`${l}.${c}`)))throw new pt("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(A(s))return{data:null,error:s};throw s}}}Te.nextInstanceID=0;const sa=Te;class ra extends sa{constructor(e){super(e)}}var na=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};class aa{constructor(e,t,s){var a,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=cn(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:en,realtime:sn,auth:Object.assign(Object.assign({},tn),{storageKey:d}),global:Zr},h=dn(s??{},u);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=on(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new jr(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new dr(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Xr(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return na(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,storageKey:i,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ra({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Fr(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ia=(n,e,t)=>new aa(n,e,t),oa="https://qokxhvqxfzfgdmkvodyu.supabase.co",la="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFva3hodnF4ZnpmZ2Rta3ZvZHl1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNzYyODUsImV4cCI6MjA2Nzk1MjI4NX0.vM5xPPf8U8wGbLpZDWI_xmw8jBzpqKKUGg_ZtqzIFWQ",F=ia(oa,la),$s=b.createContext(void 0);function Fe(){const n=b.useContext($s);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}function ca({children:n}){const[e,t]=b.useState(null),[s,a]=b.useState(null),[i,o]=b.useState(null),[l,c]=b.useState(!0);b.useEffect(()=>{if(!F){c(!1);return}(async()=>{try{if(console.log(" Initializing auth..."),!F){c(!1);return}const{data:{session:x},error:p}=await F.auth.getSession();if(p){if(console.error(" Error getting session:",p),window.location.hash.includes("error=")){const N=new URLSearchParams(window.location.hash.substring(1)),O=N.get("error"),R=N.get("error_description");console.error(" OAuth error:",O,R),window.history.replaceState({},document.title,window.location.pathname)}}else x?(console.log(" Session found:",x),o(x),t(x.user),await d(x.user.id),window.location.hash.includes("access_token")&&(console.log(" Cleaning OAuth tokens from URL..."),window.history.replaceState({},document.title,window.location.pathname))):console.log(" No session found");c(!1)}catch(x){console.error(" Error initializing auth:",x),c(!1)}})();const{data:{subscription:C}}=F.auth.onAuthStateChange(async(x,p)=>{console.log(" Auth state change:",x),x==="SIGNED_IN"&&p?(console.log(" User signed in:",p.user),o(p),t(p.user),await d(p.user.id),window.location.hash.includes("access_token")&&(console.log(" Cleaning OAuth tokens from URL after sign in..."),window.history.replaceState({},document.title,"/account"))):x==="SIGNED_OUT"?(console.log(" User signed out"),o(null),t(null),a(null)):x==="TOKEN_REFRESHED"&&p?(console.log(" Token refreshed"),o(p)):x==="USER_UPDATED"&&p&&(console.log(" User updated:",p.user),t(p.user),await d(p.user.id))});return()=>C.unsubscribe()},[]);const d=async k=>{if(F)try{const{data:C,error:x}=await F.from("profiles").select("*").eq("id",k).single();if(x)throw x;a(C)}catch(C){console.error("Error fetching profile:",C),e?.email&&await u(k,e.email)}},u=async(k,C,x)=>{if(F)try{const{data:p,error:N}=await F.from("profiles").insert({id:k,email:C,full_name:x,role:"user"}).select().single();if(N)throw N;a(p)}catch(p){console.error("Error creating profile:",p)}},h=async(k,C)=>{if(!F)throw new Error("Authentication not available");const{error:x}=await F.auth.signInWithPassword({email:k,password:C});if(x)throw x},f=async(k,C,x)=>{if(!F)throw new Error("Authentication not available");const{data:p,error:N}=await F.auth.signUp({email:k,password:C,options:{data:{full_name:x}}});if(N)throw N;p.user&&await u(p.user.id,k,x)},m=async()=>{if(!F)throw new Error("Authentication not available");let k=window.location.origin;window.location.hostname.includes("github.dev")?k=`https://${window.location.hostname.split(".")[0]}-5174.app.github.dev`:window.location.hostname==="localhost"&&(k=`http://localhost:${window.location.port||"5174"}`),k=`${k}/account`,console.log(" Starting Google OAuth with redirect to:",k);const{error:C}=await F.auth.signInWithOAuth({provider:"google",options:{redirectTo:k,queryParams:{access_type:"offline",prompt:"consent"}}});if(C)throw console.error(" Google OAuth error:",C),C},g=async()=>{if(!F)throw new Error("Authentication not available");let k=window.location.origin;window.location.hostname.includes("github.dev")?k=`https://${window.location.hostname.split(".")[0]}-5174.app.github.dev`:window.location.hostname==="localhost"&&(k=`http://localhost:${window.location.port||"5174"}`),k=`${k}/account`;const{error:C}=await F.auth.signInWithOAuth({provider:"facebook",options:{redirectTo:k}});if(C)throw C},w=async()=>{try{console.log("Attempting to sign out..."),t(null);const{error:k}=await F.auth.signOut();k&&console.error("Supabase sign out error:",k),localStorage.removeItem("supabase.auth.token"),sessionStorage.clear(),console.log("Sign out completed")}catch(k){console.error("Sign out error:",k),t(null)}},j=s?.role==="admin";return r.jsx($s.Provider,{value:{user:e,profile:s,session:i,isAdmin:j,loading:l,signInWithEmail:h,signUpWithEmail:f,signInWithGoogle:m,signInWithFacebook:g,signOut:w},children:n})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var da={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),I=(n,e)=>{const t=b.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>b.createElement("svg",{ref:u,...da,width:a,height:a,stroke:s,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${ua(n)}`,l].join(" "),...d},[...e.map(([h,f])=>b.createElement(h,f)),...Array.isArray(c)?c:[c]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=I("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=I("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=I("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=I("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=I("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=I("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=I("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=I("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=I("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=I("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=I("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=I("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=I("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=I("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=I("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=I("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=I("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=I("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=I("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=I("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=I("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=I("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=I("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=I("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=I("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=I("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=I("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=I("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=I("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=I("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=I("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=I("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=I("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=I("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=I("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=I("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=I("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Bs={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},os=se.createContext&&se.createContext(Bs),$a=["attr","size","title"];function La(n,e){if(n==null)return{};var t=Fa(n,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function Fa(n,e){if(n==null)return{};var t={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function Ke(){return Ke=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Ke.apply(this,arguments)}function ls(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function Ve(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ls(Object(t),!0).forEach(function(s){Da(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ls(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function Da(n,e,t){return e=Ua(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ua(n){var e=Ma(n,"string");return typeof e=="symbol"?e:e+""}function Ma(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qs(n){return n&&n.map((e,t)=>se.createElement(e.tag,Ve({key:t},e.attr),qs(e.child)))}function zs(n){return e=>se.createElement(Ba,Ke({attr:Ve({},n.attr)},e),qs(n.child))}function Ba(n){var e=t=>{var{attr:s,size:a,title:i}=n,o=La(n,$a),l=a||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),se.createElement("svg",Ke({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,o,{className:c,style:Ve(Ve({color:n.color||t.color},t.style),n.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&se.createElement("title",null,i),n.children)};return os!==void 0?se.createElement(os.Consumer,null,t=>e(t)):e(Bs)}function cs(n){return zs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(n)}function qa(n){return zs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(n)}function za(){const{user:n,profile:e,isAdmin:t,signOut:s}=Fe(),[a,i]=b.useState(!1),[o,l]=b.useState(!1),c=Re(),d=Ie(),u=b.useRef(null),h=c.itemCount,f=async()=>{try{console.log("Sign out button clicked"),l(!1),await s(),console.log("Sign out successful, navigating to home"),d("/",{replace:!0})}catch(m){console.error("Sign out error:",m),d("/",{replace:!0})}};return b.useEffect(()=>{function m(g){u.current&&!u.current.contains(g.target)&&l(!1)}return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]),r.jsxs("header",{className:"bg-gradient-to-r from-orange-100 via-yellow-50 to-orange-200 shadow-lg sticky top-0 z-50 backdrop-blur-sm",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex items-center justify-between h-16 relative overflow-visible",children:[r.jsx($,{to:"/",className:"flex items-center group",children:r.jsx(S.h1,{className:"text-xl font-bold bg-gradient-to-r from-orange-600 to-yellow-600 bg-clip-text text-transparent",whileHover:{scale:1.05},transition:{duration:.2},children:"SAFFRON SOCIETY TEES"})}),r.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:[{to:"/",label:"Home"},{to:"/shop",label:"Shop"},{to:"/about",label:"About"}].map(m=>r.jsx(S.div,{whileHover:{y:-2},transition:{duration:.2},children:r.jsxs($,{to:m.to,className:"relative text-gray-700 hover:text-orange-600 transition-colors font-medium group",children:[m.label,r.jsx("span",{className:"absolute inset-x-0 -bottom-1 h-0.5 bg-gradient-to-r from-orange-500 to-yellow-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-200"})]})},m.to))}),r.jsxs("div",{className:"flex items-center space-x-3",children:[n?r.jsxs("div",{className:"relative",ref:u,children:[r.jsxs(S.button,{onClick:()=>l(!o),className:"flex items-center space-x-2 p-2 rounded-full hover:bg-white/30 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full flex items-center justify-center",children:r.jsx(le,{className:"w-4 h-4 text-white"})}),e?.full_name&&r.jsx("span",{className:"hidden md:block text-sm font-medium text-gray-700",children:e.full_name.split(" ")[0]})]}),r.jsx(ot,{children:o&&r.jsxs(S.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 mt-2 w-48 bg-white/95 backdrop-blur-sm rounded-xl shadow-xl border border-white/40 py-2 z-50",children:[r.jsxs($,{to:"/account",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-orange-50 transition-colors",onClick:()=>l(!1),children:[r.jsx(le,{className:"w-4 h-4 mr-2"}),"My Account"]}),t&&r.jsxs($,{to:"/admin",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-orange-50 transition-colors",onClick:()=>l(!1),children:[r.jsx(yt,{className:"w-4 h-4 mr-2"}),"Admin Panel"]}),r.jsx("hr",{className:"my-2 border-gray-200"}),r.jsxs("button",{onClick:f,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[r.jsx(qa,{className:"w-4 h-4"}),"Sign Out"]})]})})]}):r.jsx(S.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsxs($,{to:"/account",className:"flex items-center space-x-2 px-3 py-2 bg-gradient-to-r from-orange-500 to-yellow-500 text-white rounded-full hover:from-orange-600 hover:to-yellow-600 transition-all font-medium shadow-md",children:[r.jsx(le,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden md:block text-sm",children:"Login"})]})}),r.jsx(S.div,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"relative",children:r.jsxs($,{to:"/cart",className:"relative p-2 rounded-full hover:bg-white/30 transition-colors flex items-center justify-center min-w-[40px] min-h-[40px]",children:[r.jsx(xt,{className:"h-6 w-6 text-gray-700 hover:text-orange-600 transition-colors"}),h>0&&r.jsx(S.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-gradient-to-r from-orange-500 to-yellow-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold shadow-lg min-w-[20px] z-10",children:h>99?"99+":h})]})}),r.jsx(S.button,{onClick:()=>i(!a),className:"md:hidden ml-4 p-2 rounded-full hover:bg-white/30 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.95},children:a?r.jsx(Ms,{className:"h-6 w-6 text-gray-700"}):r.jsx(Na,{className:"h-6 w-6 text-gray-700"})})]})]})}),r.jsx(ot,{children:a&&r.jsx(S.nav,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-gradient-to-r from-orange-50 via-yellow-25 to-orange-100 border-t border-orange-200/50 backdrop-blur-sm",children:r.jsxs("div",{className:"px-4 py-2 space-y-1",children:[[{to:"/",label:"Home"},{to:"/shop",label:"Shop"},{to:"/about",label:"About"}].map(m=>r.jsx($,{to:m.to,className:"block py-3 px-2 text-gray-700 hover:text-orange-600 hover:bg-white/50 rounded-lg transition-all font-medium",onClick:()=>i(!1),children:m.label},m.to)),r.jsxs($,{to:"/cart",className:"flex items-center py-3 px-2 text-gray-700 hover:text-orange-600 hover:bg-white/50 rounded-lg transition-all font-medium",onClick:()=>i(!1),children:[r.jsx(xt,{className:"w-4 h-4 mr-2"}),"Cart ",h>0&&`(${h})`]}),r.jsx("hr",{className:"my-2 border-orange-200"}),n?r.jsxs(r.Fragment,{children:[r.jsxs($,{to:"/account",className:"flex items-center py-3 px-2 text-gray-700 hover:text-orange-600 hover:bg-white/50 rounded-lg transition-all font-medium",onClick:()=>i(!1),children:[r.jsx(le,{className:"w-4 h-4 mr-2"}),"My Account"]}),t&&r.jsxs($,{to:"/admin",className:"flex items-center py-3 px-2 text-gray-700 hover:text-orange-600 hover:bg-white/50 rounded-lg transition-all font-medium",onClick:()=>i(!1),children:[r.jsx(yt,{className:"w-4 h-4 mr-2"}),"Admin Panel"]}),r.jsxs("button",{onClick:()=>{f(),i(!1)},className:"flex items-center w-full py-3 px-2 text-gray-700 hover:text-orange-600 hover:bg-white/50 rounded-lg transition-all font-medium",children:[r.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]}):r.jsxs($,{to:"/account",className:"flex items-center py-3 px-2 text-gray-700 hover:text-orange-600 hover:bg-white/50 rounded-lg transition-all font-medium",onClick:()=>i(!1),children:[r.jsx(le,{className:"w-4 h-4 mr-2"}),"Login / Sign Up"]})]})})})]})}function Ha(){return r.jsx("footer",{className:"bg-gray-900 text-white py-8 mt-auto",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About Saffron Society"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Celebrating Bollywood's cult classics with unique t-shirt designs."})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx($,{to:"/shop",className:"text-gray-400 hover:text-white transition",children:"Shop"})}),r.jsx("li",{children:r.jsx($,{to:"/about",className:"text-gray-400 hover:text-white transition",children:"About"})}),r.jsx("li",{children:r.jsx($,{to:"/account",className:"text-gray-400 hover:text-white transition",children:"My Account"})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Email: hello@saffronsociety.com"})]})]}),r.jsx("div",{className:"mt-8 pt-8 border-t border-gray-800 text-center text-sm text-gray-400",children:r.jsx("p",{children:" 2024 Saffron Society. All rights reserved."})})]})})}const Wa="/.netlify/functions/printify-products",Ga={black:"#000000",white:"#FFFFFF",gray:"#808080",grey:"#808080",red:"#FF0000",blue:"#0000FF",navy:"#000080",green:"#008000",yellow:"#FFFF00",orange:"#FFA500",purple:"#800080",pink:"#FFC0CB",brown:"#964B00",beige:"#F5F5DC",tan:"#D2B48C",maroon:"#800000",olive:"#808000",lime:"#00FF00",aqua:"#00FFFF",teal:"#008080",silver:"#C0C0C0",gold:"#FFD700",coral:"#FF7F50",salmon:"#FA8072",khaki:"#F0E68C",crimson:"#DC143C",fuchsia:"#FF00FF",magenta:"#FF00FF",indigo:"#4B0082",turquoise:"#40E0D0",chocolate:"#D2691E",charcoal:"#36454F",heather:"#9D9D9D",burgundy:"#800020",lavender:"#E6E6FA",mint:"#3EB489",rose:"#FF007F",sand:"#C2B280",sky:"#87CEEB",steel:"#4682B4",stone:"#918A84",wine:"#722F37"};function Ka(n){const e=n.toUpperCase();for(const[t,s]of Object.entries(Ga))if(s.toUpperCase()===e)return t.charAt(0).toUpperCase()+t.slice(1);return n}async function Xe(){try{const n=await fetch(Wa);if(!n.ok)throw new Error("Failed to fetch products");return(await n.json()).products||[]}catch(n){return console.error("Error fetching Printify products:",n),[]}}function ds(n){return n?typeof n=="string"?n:n&&typeof n=="object"&&n.src?n.src:n&&typeof n=="object"&&n.url?n.url:(console.warn("Could not normalize image:",n),"/assets/logo_big.png"):"/assets/logo_big.png"}const Va=()=>{const[n,e]=b.useState(null),[t,s]=b.useState(!0);return b.useEffect(()=>{(async()=>{try{const i=await Xe();i&&i.length>0&&e(i[0])}catch(i){console.error("Failed to load latest product:",i)}finally{s(!1)}})()},[]),r.jsxs("section",{className:"relative min-h-[70vh] flex items-center justify-center overflow-visible bg-gradient-to-br from-orange-100 to-orange-200 py-20",children:[r.jsx("div",{className:"absolute inset-0 opacity-10",children:r.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),r.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[r.jsx(S.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.6},className:"relative flex justify-center items-center py-8",children:r.jsxs("div",{className:"relative group max-w-xs mx-auto",children:[r.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl overflow-hidden shadow-lg group-hover:shadow-2xl transition-all duration-300 border border-white/40 transform group-hover:scale-[1.02] group-hover:-translate-y-2",children:t?r.jsx("div",{className:"w-full h-[280px] bg-gradient-to-br from-gray-200 via-gray-100 to-gray-200 animate-pulse flex items-center justify-center",children:r.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"text-gray-600 font-medium text-xs",children:"Loading latest product..."})]})}):n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"aspect-square bg-transparent relative overflow-hidden",children:[r.jsx("img",{src:typeof n.image=="string"?n.image:n.image?.src||"/src/assets/logo_big.png",alt:n.name,className:"w-full h-full object-cover group-hover:scale-110 transition-all duration-500 filter drop-shadow-lg",onError:a=>{a.currentTarget.src="/src/assets/logo_big.png"}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/5 via-transparent to-orange-50/10 mix-blend-overlay"})]}),r.jsxs("div",{className:"p-3 bg-gradient-to-r from-white/90 to-orange-50/80 backdrop-blur-sm text-center",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2 group-hover:text-orange-700 transition-colors duration-200 uppercase tracking-wide leading-tight line-clamp-2",children:n.name}),n.colors&&n.colors.length>0&&r.jsxs("div",{className:"flex justify-center gap-1 mb-2",children:[n.colors.slice(0,4).map((a,i)=>r.jsxs(S.div,{className:"w-5 h-5 rounded-full border-2 border-white shadow-sm cursor-pointer relative group/swatch",style:{backgroundColor:a.hex},whileHover:{scale:1.3,zIndex:10},whileTap:{scale:.9},title:a.name,children:[r.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover/swatch:opacity-100 transition-opacity duration-200 whitespace-nowrap z-30 pointer-events-none",children:[a.name,r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-900"})]}),r.jsx("div",{className:"absolute inset-1 rounded-full border border-black/10",style:{borderColor:a.hex==="#FFFFFF"||a.hex==="#F7E1B0"?"#00000020":"transparent"}})]},i)),n.colors.length>4&&r.jsxs("div",{className:"w-5 h-5 rounded-full bg-gray-200 border-2 border-white shadow-sm flex items-center justify-center text-xs font-bold text-gray-600",children:["+",n.colors.length-4]})]}),r.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[r.jsxs("span",{className:"text-xl font-black text-orange-600",children:["$",(n.variants&&n.variants.length>0?Math.min(...n.variants.filter(a=>a.is_enabled).map(a=>a.price)):n.price).toFixed(2)]}),r.jsx("div",{className:"text-xs font-mono text-gray-500 uppercase",children:"CULT CLASSIC"})]}),r.jsxs($,{to:`/product/${n.id}`,className:"group/button inline-flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500 text-white px-4 py-1.5 rounded-full font-bold text-xs hover:from-orange-600 hover:to-yellow-600 transition-all duration-300 shadow-xl border border-white/20 backdrop-blur-sm transform hover:scale-105 hover:-translate-y-1",children:[r.jsx("span",{className:"mr-1",children:"VIEW PRODUCT"}),r.jsx(cs,{className:"w-3 h-3 group-hover/button:translate-x-1 transition-transform duration-300"})]})]})]}):r.jsx("div",{className:"w-full h-[280px] bg-gradient-to-br from-gray-100/80 to-gray-200/80 backdrop-blur-sm flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full mx-auto mb-2 flex items-center justify-center",children:r.jsx("span",{className:"text-lg",children:""})}),r.jsx("span",{className:"text-gray-500 font-medium text-xs",children:"No products available"})]})})}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-200/40 via-yellow-100/30 to-orange-300/40 rounded-xl blur-xl scale-105 opacity-0 group-hover:opacity-100 transition-opacity duration-500 -z-10"}),r.jsx("div",{className:"absolute -top-2 -right-2 z-10",children:r.jsxs("div",{className:"relative bg-gradient-to-r from-orange-500 via-orange-400 to-yellow-400 text-white px-2 py-0.5 rounded-full text-xs font-bold shadow-lg",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-600 to-orange-500 rounded-full blur opacity-50"}),r.jsx("span",{className:"relative",children:t?"Loading...":" Latest Drop"})]})})]})}),r.jsxs("div",{className:"text-center lg:text-left",children:[r.jsxs(S.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-5xl sm:text-6xl lg:text-7xl font-bold text-gray-900 mb-6",children:[r.jsx("br",{}),"Wear the",r.jsx("br",{}),"Cult Classics."]}),r.jsx(S.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-xl sm:text-2xl text-gray-700 mb-8 max-w-2xl mx-auto lg:mx-0",children:"Bollywood's Golden Era Meets Modern Streetwear"}),r.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:r.jsxs($,{to:"/shop",className:"inline-flex items-center gap-2 bg-orange-600 text-white px-8 py-4 rounded-full text-lg font-semibold hover:bg-orange-700 transition-colors",children:["Shop Collection",r.jsx(cs,{className:"w-5 h-5"})]})})]})]})}),r.jsx(S.div,{initial:{opacity:0,scale:0},animate:{opacity:.1,scale:1},transition:{duration:1,delay:.6},className:"absolute top-20 left-20 w-72 h-72 bg-orange-500 rounded-full filter blur-3xl"}),r.jsx(S.div,{initial:{opacity:0,scale:0},animate:{opacity:.1,scale:1},transition:{duration:1,delay:.8},className:"absolute bottom-20 right-20 w-96 h-96 bg-yellow-500 rounded-full filter blur-3xl"})]})},Hs=({product:n})=>{const[e,t]=b.useState(!1),[s,a]=b.useState(0),[i,o]=b.useState(!0),[l,c]=b.useState(!1),{addItem:d}=Re(),u=(()=>{try{if(!n.images||n.images.length===0)return"/assets/logo_big.png";if(n.images[s]){const w=n.images[s];return ds(w)}const g=n.images[0];return ds(g)}catch(g){return console.error("Error getting product image:",g),"/assets/logo_big.png"}})(),h=g=>{g.preventDefault(),g.stopPropagation();const w=n.colors?.[s]?.hex||"#000000",j=n.sizes?.[0]||"M";d(n,j,w)},f=()=>{o(!1),c(!1)},m=()=>{o(!1),c(!0)};return r.jsx(S.div,{whileHover:{y:-5},transition:{duration:.3},className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden group h-full flex flex-col",onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),children:r.jsxs($,{to:`/product/${n.id}`,className:"flex flex-col h-full",children:[r.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gray-100",children:[i&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})}),r.jsx("img",{src:l?"/assets/logo_big.png":u,alt:n.name,className:`w-full h-full object-cover transition-opacity duration-300 ${i?"opacity-0":"opacity-100"}`,loading:"lazy",onLoad:f,onError:m}),r.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:e?1:0,y:e?0:20},transition:{duration:.3},className:"absolute bottom-4 left-4 right-4",children:r.jsxs("button",{onClick:h,className:"w-full bg-white/90 backdrop-blur-sm text-gray-900 py-2 px-4 rounded-full flex items-center justify-center gap-2 hover:bg-white transition-colors duration-200 shadow-lg",children:[r.jsx(St,{className:"w-4 h-4"}),"Quick Add to Cart"]})}),r.jsx("button",{className:"absolute top-4 right-4 p-2 bg-white/80 backdrop-blur-sm rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-white",onClick:g=>{g.preventDefault(),g.stopPropagation()},children:r.jsx(Fs,{className:"w-4 h-4 text-gray-600 hover:text-red-500 transition-colors"})})]}),r.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1 line-clamp-2 min-h-[3.5rem]",children:n.name}),r.jsxs("p",{className:"text-xl font-bold text-orange-600 mb-3",children:["$",(n.variants&&n.variants.length>0?Math.min(...n.variants.filter(g=>g.is_enabled).map(g=>g.price)):n.price).toFixed(2)]}),n.colors&&n.colors.length>0&&r.jsxs("div",{className:"flex gap-2 mt-auto",children:[n.colors.slice(0,4).map((g,w)=>r.jsx("button",{onClick:j=>{j.preventDefault(),j.stopPropagation(),a(w)},className:`w-6 h-6 rounded-full border-2 transition-all duration-200 ${w===s?"border-gray-900 shadow-md scale-110":"border-gray-300 hover:border-gray-500"}`,style:{backgroundColor:g.hex},title:g.name},w)),n.colors.length>4&&r.jsxs("div",{className:"w-6 h-6 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center text-xs font-bold text-gray-600",children:["+",n.colors.length-4]})]})]})]})})},Ja=({products:n,loading:e})=>{const[t,s]=b.useState([]),[a,i]=b.useState(!0),[o,l]=b.useState(null);return b.useEffect(()=>{if(n!==void 0){s(n),i(e||!1);return}(async()=>{try{i(!0),l(null);const d=await Xe();s(d.slice(0,4))}catch(d){console.error("Failed to load featured products:",d),l("Failed to load featured products. Please check your API configuration.")}finally{i(!1)}})()},[n,e]),a?r.jsx("section",{className:"section-padding bg-cream-50 relative",children:r.jsx("div",{className:"container-custom",children:r.jsxs("div",{className:"text-center",children:[r.jsx(S.div,{className:"inline-block w-12 h-12 border-4 border-saffron-200 border-t-saffron-500 rounded-full animate-spin",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),r.jsx("p",{className:"mt-4 text-neutral-600 font-montserrat",children:"Loading featured products..."})]})})}):o?r.jsx("section",{className:"section-padding bg-cream-50 relative",children:r.jsx("div",{className:"container-custom",children:r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"card p-8 max-w-md mx-auto",children:[r.jsx("p",{className:"text-error-600 mb-6 leading-relaxed",children:o}),r.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Retry Loading"})]})})})}):t.length===0?r.jsx("section",{className:"section-padding bg-cream-50 relative",children:r.jsx("div",{className:"container-custom",children:r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"card p-8 max-w-md mx-auto",children:[r.jsx(is,{className:"w-16 h-16 text-saffron-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-playfair font-semibold text-neutral-900 mb-2",children:"Coming Soon"}),r.jsx("p",{className:"text-neutral-600",children:"Our featured collection is being curated. Check back soon for amazing designs!"})]})})})}):r.jsxs("section",{className:"section-padding bg-cream-50 relative",children:[r.jsx("div",{className:"absolute inset-0 bg-paisley opacity-3"}),r.jsx("div",{className:"container-custom relative",children:r.jsxs(S.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsxs(S.div,{className:"inline-flex items-center gap-2 bg-saffron-100 text-saffron-800 rounded-full px-4 py-2 text-sm font-montserrat font-medium mb-4",initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},transition:{delay:.2,duration:.5},viewport:{once:!0},children:[r.jsx(is,{className:"w-4 h-4"}),"Handpicked for You"]}),r.jsx(S.h2,{className:"text-3xl md:text-4xl lg:text-5xl font-playfair font-bold text-neutral-900 mb-6",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.3,duration:.6},viewport:{once:!0},children:"Be Proud. Be Bold. Be You."}),r.jsx(S.p,{className:"text-lg text-neutral-600 max-w-3xl mx-auto leading-relaxed",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4,duration:.6},viewport:{once:!0}})]}),r.jsx("div",{className:"flex justify-end mb-6",children:r.jsxs(S.a,{href:"/shop",className:"text-primary hover:text-secondary transition-colors duration-300 font-montserrat font-medium group flex items-center gap-2",initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},transition:{delay:.3,duration:.6},viewport:{once:!0},whileHover:{x:5},children:[r.jsx("span",{children:"See More"}),r.jsx(fa,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8",children:t.map((c,d)=>r.jsx(S.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{delay:d*.15,duration:.6},viewport:{once:!0},children:r.jsx(Hs,{product:c})},c.id))})]})})]})},Xa=()=>r.jsxs("div",{className:"min-h-screen",children:[r.jsx(Va,{}),r.jsxs("div",{className:"relative -mt-20 z-10",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-orange-50 to-[#ffe4cc]"}),r.jsx("div",{className:"relative h-32"})]}),r.jsx("section",{className:"relative bg-gradient-to-b from-[#ffe4cc] to-[#fff0e5] pb-20",children:r.jsx(Ja,{})})]}),us=[{id:"1",name:"Baazigar (1993)  Pulp Grit",price:24.95,description:"A vintage-inspired design celebrating the iconic Bollywood thriller...",images:["/assets/products/baazigar-pulp-grit.jpg"],category:"Unisex",availableSizes:["S","M","L","XL","2XL"],availableColors:["#000000","#FFFFFF","#8B4513"]},{id:"mock-1",name:"Vintage Bollywood Hero Tee",description:"Channel the essence of classic Bollywood heroes with this vintage-inspired design featuring iconic retro typography and nostalgic color schemes.",price:29.99,image:"/assets/male-model.png",category:"T-Shirts",tags:["bollywood","vintage","hero","retro"],sizes:["S","M","L","XL","XXL"],colors:[{name:"Black",hex:"#000000"},{name:"Navy",hex:"#1A2237"},{name:"Maroon",hex:"#642838"}],variants:[{id:"mock-1-s",title:"Black / S",price:29.99,is_enabled:!0},{id:"mock-1-m",title:"Black / M",price:29.99,is_enabled:!0},{id:"mock-1-l",title:"Black / L",price:29.99,is_enabled:!0}]},{id:"mock-2",name:"Classic Cinema Design",description:"A tribute to the golden age of Indian cinema with artistic typography and cultural motifs that celebrate timeless storytelling.",price:32.99,image:"/assets/female-model.png",category:"T-Shirts",tags:["cinema","classic","artistic","cultural"],sizes:["S","M","L","XL","XXL"],colors:[{name:"White",hex:"#FFFFFF"},{name:"Royal",hex:"#274D91"},{name:"Forest",hex:"#223B26"}],variants:[{id:"mock-2-s",title:"White / S",price:32.99,is_enabled:!0},{id:"mock-2-m",title:"White / M",price:32.99,is_enabled:!0}]},{id:"mock-3",name:"Modern Fusion Streetwear",description:"Contemporary streetwear meets traditional aesthetics in this bold design that bridges past and present with striking visual elements.",price:27.99,image:"/assets/male-model-2.png",category:"T-Shirts",tags:["fusion","streetwear","modern","traditional"],sizes:["S","M","L","XL","XXL"],colors:[{name:"Gray",hex:"#808080"},{name:"Cherry Red",hex:"#A82235"}],variants:[{id:"mock-3-s",title:"Gray / S",price:27.99,is_enabled:!0},{id:"mock-3-m",title:"Gray / M",price:27.99,is_enabled:!0}]},{id:"mock-4",name:"Retro Dialogue Design",description:"Featuring iconic dialogue and memorable quotes from beloved films, this design celebrates the wit and wisdom of classic cinema.",price:31.99,image:"/assets/male-model-3.png",category:"T-Shirts",tags:["retro","dialogue","quotes","memorable"],sizes:["S","M","L","XL","XXL"],colors:[{name:"Black",hex:"#000000"},{name:"Navy",hex:"#1A2237"}],variants:[{id:"mock-4-s",title:"Black / S",price:31.99,is_enabled:!0},{id:"mock-4-m",title:"Black / M",price:31.99,is_enabled:!0}]}];async function Qa(){console.log("[products.ts] Fetching products from Printify API...");try{const n=await Xe();return!Array.isArray(n)||n.length===0?(console.log("[products.ts] No products returned from API, using fallback mock data"),us):(console.log(`[products.ts] Successfully fetched ${n.length} products from API`),n)}catch(n){return console.error("[products.ts] Error fetching from API, using fallback mock data:",n),us}}const Ya=()=>{const[n,e]=b.useState([]),[t,s]=b.useState(!0),[a,i]=b.useState(!1),[o,l]=b.useState(""),[c,d]=b.useState("all"),[u,h]=b.useState("all"),[f,m]=b.useState("all"),[g,w]=b.useState("all"),[j,k]=b.useState("featured"),[C,x]=b.useState(1),p=12;b.useEffect(()=>{(async()=>{try{s(!0);const E=await Qa();e(E)}catch(E){console.error("Error loading products:",E)}finally{s(!1)}})()},[]);const N=b.useMemo(()=>{let y=[...n];switch(o&&(y=y.filter(E=>E.name.toLowerCase().includes(o.toLowerCase())||E.description.toLowerCase().includes(o.toLowerCase()))),c!=="all"&&(y=y.filter(E=>E.name.toLowerCase().includes(c.toLowerCase()))),u!=="all"&&(y=y.filter(E=>E.name.includes(u))),f!=="all"&&(y=y.filter(E=>E.name.toLowerCase().includes(f.toLowerCase()))),g!=="all"&&(y=y.filter(E=>E.colors?.some(P=>P.name.toLowerCase()===g.toLowerCase()))),j){case"name":y.sort((E,P)=>E.name.localeCompare(P.name));break;case"price":y.sort((E,P)=>E.price-P.price);break;case"newest":y.sort((E,P)=>{const Ne=parseInt(E.name.match(/\d{4}/)?.[0]||"0");return parseInt(P.name.match(/\d{4}/)?.[0]||"0")-Ne});break}return y},[n,o,c,u,f,g,j]),O=b.useMemo(()=>{const y=(C-1)*p;return N.slice(y,y+p)},[N,C]),R=Math.ceil(N.length/p);b.useEffect(()=>{x(1)},[o,c,u,f,g,j]);const B=b.useMemo(()=>{const y=new Set;return n.forEach(E=>{const P=E.name.match(/^([^(]+)/)?.[1]?.trim();P&&y.add(P)}),Array.from(y).sort()},[n]),de=b.useMemo(()=>{const y=new Set;return n.forEach(E=>{const P=E.name.match(/\((\d{4})\)/)?.[1];P&&y.add(P)}),Array.from(y).sort((E,P)=>parseInt(P)-parseInt(E))},[n]),V=b.useMemo(()=>{const y=new Set;return n.forEach(E=>{const P=E.name.match(/\s*([^]+)$/)?.[1]?.trim();P&&y.add(P)}),Array.from(y).sort()},[n]),Q=b.useMemo(()=>{const y=new Set;return n.forEach(E=>{E.colors?.forEach(P=>y.add(P.name))}),Array.from(y).sort()},[n]),[v,_]=b.useState("");return b.useEffect(()=>{const y=setTimeout(()=>{_(o)},300);return()=>clearTimeout(y)},[o]),b.useEffect(()=>{l(v)},[v]),r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-gradient-to-r from-orange-100 via-yellow-50 to-orange-100 py-12",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Shop Our Collection"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Discover unique designs that celebrate culture and heritage"})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[r.jsx(S.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:`lg:w-64 ${a?"block":"hidden lg:block"}`,children:r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),r.jsx("button",{onClick:()=>i(!1),className:"lg:hidden",children:r.jsx(Ms,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),r.jsxs("div",{className:"relative",children:[r.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:o,onChange:y=>l(y.target.value),placeholder:"Search products...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),r.jsxs("select",{value:j,onChange:y=>k(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"featured",children:"Featured"}),r.jsx("option",{value:"name",children:"Name"}),r.jsx("option",{value:"price",children:"Price"}),r.jsx("option",{value:"newest",children:"Newest"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Design"}),r.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Designs"}),B.map(y=>r.jsx("option",{value:y,children:y},y))]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),r.jsxs("select",{value:u,onChange:y=>h(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Years"}),de.map(y=>r.jsx("option",{value:y,children:y},y))]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Style"}),r.jsxs("select",{value:f,onChange:y=>m(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Styles"}),V.map(y=>r.jsx("option",{value:y,children:y},y))]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),r.jsxs("select",{value:g,onChange:y=>w(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Colors"}),Q.map(y=>r.jsx("option",{value:y,children:y},y))]})]}),r.jsx("button",{onClick:()=>{l(""),d("all"),h("all"),m("all"),w("all"),k("featured")},className:"w-full py-2 text-sm text-orange-600 hover:text-orange-700 font-medium",children:"Clear All Filters"})]})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"lg:hidden mb-4",children:r.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-sm text-gray-700 hover:bg-gray-50",children:[r.jsx(wa,{className:"w-5 h-5"}),"Filters"]})}),r.jsx("div",{className:"mb-6",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",O.length," of ",N.length," products"]})}),t?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(ja,{className:"w-8 h-8 animate-spin text-orange-500"})}):O.length===0?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"No products found matching your filters."})}):r.jsxs(r.Fragment,{children:[r.jsx(S.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map((y,E)=>r.jsx(S.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:E*.05},children:r.jsx(Hs,{product:y})},y.id))}),R>1&&r.jsxs("div",{className:"mt-12 flex justify-center gap-2",children:[r.jsx("button",{onClick:()=>x(y=>Math.max(1,y-1)),disabled:C===1,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(R)].map((y,E)=>{const P=E+1;return P===1||P===R||P>=C-1&&P<=C+1?r.jsx("button",{onClick:()=>x(P),className:`px-4 py-2 text-sm font-medium rounded-lg ${C===P?"bg-orange-500 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:P},P):P===C-2||P===C+2?r.jsx("span",{className:"px-2",children:"..."},P):null}),r.jsx("button",{onClick:()=>x(y=>Math.min(R,y+1)),disabled:C===R,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})})]})},at="/assets/logo_big-Dcd49tNZ.png",hs=["XS","S","M","L","XL","2XL","3XL","4XL","5XL"],vt=n=>{const e=document.createElement("textarea");return e.innerHTML=n,e.value},Za=n=>[{id:"about",title:"About product",content:{designTitle:vt(n.name),designDescription:vt(n.description||"Express yourself with this unique design from Saffron Society. Our premium quality t-shirts combine comfort with style, perfect for making a statement wherever you go."),features:["Premium quality cotton construction","Vibrant, long-lasting print","Comfortable unisex fit","Ethically sourced and produced"]}},{id:"details",title:"Product details",content:[{title:"Without side seams",description:"Knitted in one piece using tubular knit, it reduces fabric waste and makes the garment more attractive"},{title:"Ribbed knit collar without seam",description:"Ribbed knit makes the collar highly elastic and helps retain its shape"},{title:"Shoulder tape",description:"Twill tape covers the shoulder seams to stabilize the back of the garment and prevent stretching"},{title:"Fiber composition",description:"Solid colors are 100% cotton; Heather colors are 50% cotton, 50% polyester (Sport Grey is 90% cotton, 10% polyester); Antique colors are 90% cotton, 10% polyester"},{title:"Bigger shirt size",description:"The t-shirt runs bigger than usual giving extra space for comfort"},{title:"Fabric",description:'Environmentally-friendly manufactured cotton that gives thicker vintage feel to the shirt. Long-lasting garment suitable for everyday use. The "Natural" color is made with unprocessed cotton, which results in small black flecks throughout the fabric'},{title:"Age restrictions",description:"For adults and teens"},{title:"Other compliance information",description:"Meets the formaldehyde, phthalates, lead and flammability level requirements."}]},{id:"care",title:"Care instructions",content:["Machine wash: cold (max 30C or 90F)","Non-chlorine: bleach as needed","Do not tumble dry","Do not iron","Do not dryclean"]},{id:"shipping",title:"Shipping & delivery",content:"Accurate shipping options will be available in checkout after entering your full address."},{id:"returns",title:"30 day return policy",content:`Any goods purchased can only be returned in accordance with the Terms and Conditions and Returns Policy.

We want to make sure that you are satisfied with your order and we are committed to making things right in case of any issues. We will provide a solution in cases of any defects if you contact us within 30 days of receiving your order.

See Terms of Use`},{id:"gpsr",title:"GPSR",content:{euRep:"EU representative: Saffron Society, support@saffronsociety.com, 21 Attlebery Crescent, Paris, ON, N3L0H9, CA",productInfo:"Product information: Gildan 2000, 2 year warranty in EU and Northern Ireland as per Directive 1999/44/EC",warnings:"Warnings, Hazard: For adults",care:"Care instructions: Machine wash: cold (max 30C or 90F), Non-chlorine: bleach as needed, Do not tumble dry, Do not iron, Do not dryclean"}}],it={"#000000":"#25282A","#DCD2BE":"#D7D2CB","#642838":"#5B2B42","#31221D":"#382F2D","#005C70":"#005D6F","#FF8E9D":"#DD74A1","#FFFFFF":"#FFFFFF","#F7E1B0":"#F4D1A1","#FFF6E3":"#FFFFFF","#223B26":"#273B33","#454545":"#333F48","#274D91":"#224D8F","#1A2237":"#263147","#A82235":"#AC2B37","#B54557":"#B15533","#F6F6F6":"#FFFFFF","#D3D590":"#F4D1A1","#6A798E":"#4D6995",Amethyst:"#6c4b94","Antique Cherry Red":"#971b2f","Antique Heliconia":"#aa0061","Antique Irish Green":"#00843d","Antique Jade Dome":"#006269","Antique Orange":"#b33d26","Antique Royal":"#003087","Antique Sapphire":"#006a8e",Ash:"#c8c9c7","Ash Grey":"#c8c9c7",Azalea:"#dd74a1","Baby Blue":"#69b3e7",Berry:"#7f2952",Black:"#25282a",Blackberry:"#221c35","Blue Dusk":"#253746","Bright Salmon":"#e5554f","Brown Savana":"#7a6855",Cactus:"#788a7a","Cardinal Red":"#8a1538","Caribbean Blue":"#00a9ce","Caribbean Mist":"#00a9ce","Carolina Blue":"#7ba4db","Carolina Blue Mist":"#7ba4db",Cement:"#aeaeae","Chalky Mint":"#5cb8b2",Chambray:"#bdd6e6",Charcoal:"#66676c","Charity Pink":"#f8a3bc","Cherry Red":"#ac2b37",Chestnut:"#83635c",Cobalt:"#171c8f","Coral Silk":"#fb637e",Cornsilk:"#f0ec74",Daisy:"#fed101","Dark Chocolate":"#382f2d","Dark Heather":"#425563","Dune Mist":"#7a7256","Dusty Rose":"#e1bbb4","Electric Green":"#43b02a","Flo Blue":"#5576d1",Forest:"#273b33","Galapagos Blue":"#005d6f",Garnet:"#7d2935",Gold:"#eead1a","Graphite Heather":"#707372",Gravel:"#888b8d",Gunmetal:"#939694","Heather Berry":"#994878","Heather Blue":"#3a5dae","Heather Bronze":"#c04c36","Heather Cardinal":"#9b2743","Heather Caribbean Blue":"#00afd7","Heather Coral Silk":"#ff808b","Heather Dark Green":"#3e5d58","Heather Grey":"#9ea2a2","Heather Heliconia":"#e24585","Heather Indigo":"#4d6995","Heather Irish Green":"#5caa7f","Heather Maroon":"#672e45","Heather Military Green":"#7e7f74","Heather Navy":"#333f48","Heather Orange":"#ff8d6d","Heather Purple":"#614b79","Heather Radiant Orchid":"#a15a95","Heather Red":"#bf0d3e","Heather Royal":"#307fe2","Heather Sapphire":"#0076a8","Heather Seafoam":"#40c1ac","Heather Sport Dark Maroon":"#651d32","Heather Sport Dark Navy":"#595478","Heather Sport Royal":"#1d4f91","Heather Sport Scarlet Red":"#b83a4b",Heliconia:"#db3e79",Honey:"#edaesa","Ice Grey":"#d7d2cb","Indigo Blue":"#486d87",Iris:"#3975b7","Irish Green":"#00a74a","Island Reef":"#8fd6bd","Jade Dome":"#00857d",Kelly:"#00805e","Kelly Green":"#00805e","Kelly Mist":"#00805e",Kiwi:"#89a84f","Lagoon Blue":"#4ac3e0","Legion Blue":"#1f495b","Light Blue":"#a3b3cb","Light Pink":"#e4c6d4",Lilac:"#563d82",Lime:"#92bf55","Marbled Charcoal":"#66676c","Marbled Galapagos Blue":"#005d6f","Marbled Heliconia":"#db3e79","Marbled Navy":"#263147","Marbled Royal":"#224d8f",Maroon:"#5b2b42","Maroon Mist":"#6d273c",Meadow:"#046a38","Metro Blue":"#464e7e",Midnight:"#005670","Military Green":"#5e7461","Mint Green":"#a0cfab",Moss:"#3d441e",Mustard:"#c3964d",Natural:"#e7ceb5",Navy:"#263147"},ei=()=>{const{id:n}=Vs(),e=Ie(),{addItem:t}=Re(),[s,a]=b.useState(null),[i,o]=b.useState(!0),[l,c]=b.useState(""),[d,u]=b.useState(""),[h,f]=b.useState(hs[2]),[m,g]=b.useState(0),[w,j]=b.useState(1),[k,C]=b.useState(new Set(["about"]));b.useEffect(()=>{O()},[n]),b.useEffect(()=>{s&&h&&x()},[s,h,d]),b.useEffect(()=>{s&&d&&p()},[d]);const x=()=>{if(!s)return;const v=s.colors?.find(y=>y.hex===d)?.name,_=s.variants?.find(y=>{const E=y.size===h,P=y.color?.toLowerCase()===v?.toLowerCase();return E&&P});if(_)g(_.price);else{const y=s.variants&&s.variants.length>0?Math.min(...s.variants.filter(E=>E.is_enabled).map(E=>E.price)):s.price;g(y)}},p=()=>{if(!s)return;const v=s.colors?.find(_=>_.hex===d||_.name.toLowerCase()===d.toLowerCase());v?.image?c(v.image):s.images&&s.images.length>0&&c(s.images[0])},N=v=>{if(!s||!s.variants)return!1;const _=s.colors?.find(y=>y.hex===d)?.name;return s.variants.some(y=>y.size===v&&y.color?.toLowerCase()===_?.toLowerCase()&&y.is_enabled&&y.is_available)};async function O(){try{o(!0);const _=(await Xe()).find(y=>y.id===n);if(_){a(_);const y=_.images&&_.images.length>0?_.images[0]:typeof _.image=="string"?_.image:_.image?.src||at;c(y),u(_.colors?.[0]?.hex||_.colors?.[0]?.name||"");const E=_.variants&&_.variants.length>0?Math.min(..._.variants.filter(P=>P.is_enabled).map(P=>P.price)):_.price;g(E)}}catch(v){console.error("Failed to load product:",v)}finally{o(!1)}}const R=()=>{s&&t(s,h,d,w)},B=v=>{C(_=>{const y=new Set(_);return y.has(v)?y.delete(v):y.add(v),y})},de=v=>{v.currentTarget.src=at},V=v=>{const _=Object.entries(it).find(([y,E])=>E.toLowerCase()===v.toLowerCase());return _?_[0]:v};if(i)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})});if(!s)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Product not found"}),r.jsxs("button",{onClick:()=>e("/shop"),className:"text-orange-500 hover:text-orange-600 flex items-center gap-2 mx-auto",children:[r.jsx(as,{className:"w-4 h-4"}),"Back to products"]})]})});const Q=s.images&&s.images.length>0?s.images:[typeof s.image=="string"?s.image:s.image?.src||at];return r.jsx("div",{className:"min-h-screen py-8 px-4 md:px-8 bg-gradient-to-br from-amber-50 via-orange-50 to-red-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("button",{onClick:()=>e("/shop"),className:"mb-6 text-gray-700 hover:text-orange-600 flex items-center gap-2 transition-colors font-medium",children:[r.jsx(as,{className:"w-4 h-4"}),"Back to products"]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6},className:"relative aspect-square bg-white/70 backdrop-blur-lg rounded-2xl overflow-hidden border border-white/40 shadow-xl",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-transparent via-transparent to-orange-100/30 pointer-events-none"}),r.jsx("div",{className:"absolute top-4 left-4 z-10",children:r.jsx("div",{className:"bg-black/80 backdrop-blur-md text-amber-300 px-3 py-1.5 rounded-full text-xs font-bold tracking-wider border border-amber-400/30",children:"CULT CLASSICS"})}),r.jsx("img",{src:l,alt:s.name,className:"w-full h-full object-contain relative z-10",onError:de}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-orange-200/20 via-transparent to-transparent pointer-events-none"})]}),Q.length>1&&r.jsx("div",{className:"grid grid-cols-4 gap-3",children:Q.slice(0,8).map((v,_)=>r.jsx(S.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(v),className:`aspect-square bg-white/60 backdrop-blur-md rounded-xl overflow-hidden border-2 transition-all shadow-lg ${l===v?"border-orange-400 shadow-orange-200/50":"border-white/40 hover:border-orange-300/60"}`,children:r.jsx("img",{src:v,alt:`${s.name} view ${_+1}`,className:"w-full h-full object-contain",onError:de})},_))})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/70 backdrop-blur-lg rounded-2xl p-6 border border-white/40 shadow-xl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-3",children:vt(s.name)}),r.jsxs("p",{className:"text-3xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:["$",m.toFixed(2)]})]}),s.colors&&s.colors.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Color"}),r.jsx("div",{className:"flex flex-wrap gap-3",children:s.colors.map(v=>{const _=typeof v=="string"?v:v.hex||v.name,y=typeof v=="string"?it[v]||v:v.hex||it[v.name]||v.name,E=typeof v=="string"?v:v.name;return r.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>u(_),className:`w-10 h-10 rounded-full border-3 transition-all shadow-lg ${d===_?"border-gray-800 shadow-lg":"border-white/60 hover:border-gray-400"}`,style:{backgroundColor:y},title:E||V(_)},_)})}),d&&r.jsxs("p",{className:"text-sm text-gray-600 mt-3 font-medium",children:["Selected: ",s.colors?.find(v=>v.hex===d)?.name||V(d)]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Size"}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:hs.map(v=>{const _=N(v),y=h===v;return r.jsx(S.button,{whileHover:_?{scale:1.05}:{},whileTap:_?{scale:.95}:{},onClick:()=>_&&f(v),disabled:!_,className:`py-3 px-4 border-2 rounded-xl font-semibold transition-all relative ${y&&_?"border-orange-500 bg-orange-50 text-orange-700 shadow-lg":_?"border-white/60 bg-white/50 hover:border-orange-300 hover:bg-orange-50/50":"border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:_?"":"line-through",children:v}),!_&&r.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Sold Out"})]})},v)})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Quantity"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>j(Math.max(1,w-1)),className:"w-12 h-12 rounded-xl border-2 border-white/60 bg-white/50 hover:border-orange-300 hover:bg-orange-50/50 flex items-center justify-center transition-all font-bold text-lg",children:"-"}),r.jsx("span",{className:"w-16 text-center font-bold text-xl",children:w}),r.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>j(w+1),className:"w-12 h-12 rounded-xl border-2 border-white/60 bg-white/50 hover:border-orange-300 hover:bg-orange-50/50 flex items-center justify-center transition-all font-bold text-lg",children:"+"})]})]}),r.jsxs("div",{className:"flex gap-4 mb-6",children:[r.jsxs(S.button,{whileHover:N(h)?{scale:1.02}:{},whileTap:N(h)?{scale:.98}:{},onClick:N(h)?R:void 0,disabled:!N(h),className:`flex-1 py-4 px-6 rounded-xl font-bold transition-all flex items-center justify-center gap-3 shadow-lg text-lg ${N(h)?"bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[r.jsx(xt,{className:"w-5 h-5"}),N(h)?"Add to Cart":"Size Not Available"]}),r.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-4 border-2 border-white/60 bg-white/50 rounded-xl hover:border-red-300 hover:bg-red-50/50 transition-all",children:r.jsx(Fs,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"border-t border-white/40 pt-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 font-medium",children:[r.jsx(Ge,{className:"w-5 h-5 text-orange-500"}),r.jsx("span",{children:"30 days return policy."}),r.jsx("a",{href:"/terms",className:"text-orange-600 hover:text-orange-700 underline font-semibold",children:"See details"})]}),r.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700 font-medium",children:[r.jsx(yt,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{children:"Secure payments accepted"})]})]})]}),r.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/70 backdrop-blur-lg rounded-2xl border border-white/40 shadow-xl overflow-hidden",children:Za(s).map(v=>r.jsxs("div",{className:"border-b border-white/30 last:border-b-0",children:[r.jsxs(S.button,{whileHover:{backgroundColor:"rgba(255, 255, 255, 0.1)"},onClick:()=>B(v.id),className:"w-full py-5 px-6 flex items-center justify-between text-left hover:text-orange-600 transition-colors",children:[r.jsx("h2",{className:"text-lg font-bold",children:v.title}),r.jsx(S.div,{animate:{rotate:k.has(v.id)?180:0},transition:{duration:.2},children:r.jsx(ga,{className:"w-5 h-5"})})]}),r.jsx(ot,{children:k.has(v.id)&&r.jsx(S.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:r.jsxs("div",{className:"pb-6 px-6 text-gray-700",children:[v.id==="about"&&v.content&&typeof v.content=="object"&&"designTitle"in v.content&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2",children:"The Design"}),r.jsx("p",{className:"font-medium mb-2",children:v.content.designTitle}),r.jsx("div",{className:`prose prose-sm max-w-none\r
                                    [&>h2]:text-lg [&>h2]:font-semibold [&>h2]:text-gray-800 [&>h2]:mt-6 [&>h2]:mb-3 [&>h2]:first:mt-0\r
                                    [&>h3]:text-base [&>h3]:font-semibold [&>h3]:text-gray-800 [&>h3]:mt-4 [&>h3]:mb-2 \r
                                    [&>h4]:text-sm [&>h4]:font-semibold [&>h4]:text-gray-800 [&>h4]:mt-3 [&>h4]:mb-2\r
                                    [&>p]:text-sm [&>p]:text-gray-700 [&>p]:mb-3 [&>p]:leading-relaxed\r
                                    [&>ul]:text-sm [&>ul]:text-gray-700 [&>ul]:mb-3 [&>ul]:space-y-1\r
                                    [&>ul>li]:flex [&>ul>li]:items-start [&>ul>li]:ml-4\r
                                    [&>ul>li:before]:content-[''] [&>ul>li:before]:text-orange-500 [&>ul>li:before]:mr-2 [&>ul>li:before]:mt-0.5\r
                                    [&>strong]:font-semibold [&>strong]:text-gray-800\r
                                    [&>em]:italic [&>em]:text-gray-600`,dangerouslySetInnerHTML:{__html:s.description||"Express yourself with this unique design from Saffron Society. Our premium quality t-shirts combine comfort with style, perfect for making a statement wherever you go."}}),r.jsx("button",{className:"text-orange-500 hover:text-orange-600 text-sm mt-2",children:"Read more"})]}),v.content.features&&r.jsx("ul",{className:"space-y-2",children:v.content.features.map((_,y)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"text-orange-500 mr-2",children:""}),_]},y))})]}),v.id==="details"&&Array.isArray(v.content)&&r.jsx("div",{className:"space-y-4",children:v.content.map((_,y)=>r.jsx("div",{children:typeof _=="object"&&_.title?r.jsxs(r.Fragment,{children:[r.jsx("h4",{className:"font-semibold mb-1",children:_.title}),r.jsx("p",{className:"text-sm",children:_.description})]}):r.jsx("p",{className:"text-sm",children:typeof _=="string"?_:""})},y))}),v.id==="care"&&Array.isArray(v.content)&&r.jsx("ul",{className:"space-y-1",children:v.content.map((_,y)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"text-orange-500 mr-2",children:""}),typeof _=="string"?_:""]},y))}),v.id==="shipping"&&typeof v.content=="string"&&r.jsx("p",{children:v.content}),v.id==="returns"&&typeof v.content=="string"&&r.jsx("div",{className:"space-y-3",children:v.content.split(`

`).map((_,y)=>r.jsx("p",{children:_.includes("Terms of Use")?r.jsxs(r.Fragment,{children:[_.split("Terms of Use")[0],r.jsx("a",{href:"/terms",className:"text-orange-500 hover:text-orange-600 underline",children:"Terms of Use"})]}):_},y))}),v.id==="gpsr"&&v.content&&typeof v.content=="object"&&"euRep"in v.content&&r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsx("p",{children:v.content.euRep}),r.jsx("p",{children:v.content.productInfo}),r.jsx("p",{children:v.content.warnings}),r.jsx("p",{children:v.content.care})]})]})})})]},v.id))})]})]})]})})},ti=()=>{const{items:n,removeItem:e,updateQuantity:t,total:s}=Re();b.useEffect(()=>{window.scrollTo(0,0)},[]);const a=i=>`$${i.toFixed(2)}`;return n.length===0?r.jsx("div",{className:"container-custom py-16",children:r.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-lg mx-auto text-center",children:[r.jsx(St,{className:"h-16 w-16 mx-auto text-neutral-300 mb-6"}),r.jsx("h1",{className:"font-playfair text-3xl font-bold text-maroon mb-4",children:"Your cart is empty"}),r.jsx("p",{className:"text-neutral-700 mb-8",children:"Looks like you haven't added any items to your cart yet. Browse our collection to find the perfect Bollywood-inspired tee for you."}),r.jsx($,{to:"/products",className:"btn-primary",children:"Continue Shopping"})]})}):r.jsx("div",{className:"container-custom py-8 md:py-12",children:r.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsx("h1",{className:"font-playfair text-3xl font-bold text-maroon",children:"Your Cart"}),r.jsxs($,{to:"/products",className:"flex items-center text-neutral-700 hover:text-maroon transition-colors",children:[r.jsx(Ls,{className:"h-4 w-4 mr-1"}),"Continue Shopping"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 pb-2 border-b border-neutral-200 text-neutral-500 font-medium",children:[r.jsx("div",{className:"col-span-6",children:"Product"}),r.jsx("div",{className:"col-span-2 text-center",children:"Price"}),r.jsx("div",{className:"col-span-2 text-center",children:"Quantity"}),r.jsx("div",{className:"col-span-2 text-right",children:"Total"})]}),n.map(i=>r.jsxs(S.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-center py-4 border-b border-neutral-200",children:[r.jsxs("div",{className:"col-span-6 flex items-center",children:[r.jsx("img",{src:i.product.images?.[0]||"/placeholder.png",alt:i.product.name,className:"w-20 h-20 object-cover rounded-md"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:i.product.name}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[r.jsxs("span",{children:["Color:",r.jsx("span",{className:"inline-block w-4 h-4 rounded-full ml-1 mr-1 border border-gray-300",style:{backgroundColor:i.selectedColor}}),Ka(i.selectedColor||"")]}),r.jsxs("span",{children:["Size: ",i.selectedSize]})]})]})]}),r.jsx("div",{className:"hidden md:block col-span-2 text-center text-neutral-800 font-medium",children:a(i.product.price)}),r.jsx("div",{className:"col-span-2",children:r.jsxs("div",{className:"flex items-center justify-center border border-neutral-200 rounded-md max-w-32 mx-auto",children:[r.jsx("button",{onClick:()=>t(i.product.id,i.selectedSize||"",i.selectedColor||"",i.quantity-1),className:"text-neutral-600 hover:text-maroon transition-colors p-2","aria-label":"Decrease quantity",children:r.jsx(Sa,{className:"h-4 w-4"})}),r.jsx("span",{className:"mx-3",children:i.quantity}),r.jsx("button",{onClick:()=>t(i.product.id,i.selectedSize||"",i.selectedColor||"",i.quantity+1),className:"text-neutral-600 hover:text-maroon transition-colors p-2","aria-label":"Increase quantity",children:r.jsx(Ea,{className:"h-4 w-4"})})]})}),r.jsxs("div",{className:"col-span-2 flex items-center justify-between md:justify-end",children:[r.jsx("span",{className:"font-semibold text-maroon",children:a(i.product.price*i.quantity)}),r.jsx("button",{onClick:()=>{console.log("Removing item:",{productId:i.product.id,size:i.selectedSize||"",color:i.selectedColor||""}),e(i.product.id,i.selectedSize||"",i.selectedColor||"")},className:"p-1 text-gray-400 hover:text-red-500 transition-colors","aria-label":"Remove item",children:r.jsx(Pa,{className:"w-4 h-4"})})]})]},i.product.id+"-"+(i.selectedColor||"")+"-"+(i.selectedSize||"")))]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"font-playfair text-xl font-bold text-neutral-800 mb-4",children:"Order Summary"}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-neutral-600",children:"Subtotal"}),r.jsx("span",{className:"text-neutral-800 font-medium",children:a(s)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-neutral-600",children:"Shipping"}),r.jsx("span",{className:"text-neutral-800 font-medium",children:"Free"})]}),r.jsxs("div",{className:"pt-3 border-t border-neutral-200 flex justify-between",children:[r.jsx("span",{className:"font-medium text-neutral-800",children:"Total"}),r.jsx("span",{className:"font-bold text-xl text-maroon",children:a(s)})]})]}),r.jsx($,{to:"/checkout",className:"btn-primary w-full text-center",children:"Proceed to Checkout"})]})})]})]})})},si=()=>{const{state:n,clearCart:e}=Re(),[t,s]=b.useState(!1),[a,i]=b.useState(!1);b.useEffect(()=>{window.scrollTo(0,0)},[]);const o=c=>`$${c.toFixed(2)}`,l=c=>{c.preventDefault(),i(!0),setTimeout(()=>{i(!1),s(!0),e()},1500)};return t?r.jsx("div",{className:"container-custom py-16",children:r.jsxs(S.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"max-w-lg mx-auto text-center",children:[r.jsx(Nt,{className:"h-16 w-16 mx-auto text-success-500 mb-6"}),r.jsx("h1",{className:"font-playfair text-3xl font-bold text-maroon mb-4",children:"Order Confirmed!"}),r.jsx("p",{className:"text-neutral-700 mb-8",children:"Thank you for your purchase! Your order has been confirmed and will be shipped shortly. We've sent a confirmation email with all the details."}),r.jsx($,{to:"/",className:"btn-primary",children:"Back to Home"})]})}):r.jsx("div",{className:"container-custom py-8 md:py-12",children:r.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsx("h1",{className:"font-playfair text-3xl font-bold text-maroon",children:"Checkout"}),r.jsxs($,{to:"/cart",className:"flex items-center text-neutral-700 hover:text-maroon transition-colors",children:[r.jsx(Ls,{className:"h-4 w-4 mr-1"}),"Back to Cart"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("form",{onSubmit:l,className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"font-playfair text-xl font-bold text-neutral-800 mb-4",children:"Contact Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-neutral-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",id:"email",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-neutral-700 mb-1",children:"Phone Number"}),r.jsx("input",{type:"tel",id:"phone",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"font-playfair text-xl font-bold text-neutral-800 mb-4",children:"Shipping Address"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"firstName",className:"block text-neutral-700 mb-1",children:"First Name"}),r.jsx("input",{type:"text",id:"firstName",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"lastName",className:"block text-neutral-700 mb-1",children:"Last Name"}),r.jsx("input",{type:"text",id:"lastName",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{htmlFor:"address",className:"block text-neutral-700 mb-1",children:"Address"}),r.jsx("input",{type:"text",id:"address",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"city",className:"block text-neutral-700 mb-1",children:"City"}),r.jsx("input",{type:"text",id:"city",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"postalCode",className:"block text-neutral-700 mb-1",children:"Postal Code"}),r.jsx("input",{type:"text",id:"postalCode",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{htmlFor:"country",className:"block text-neutral-700 mb-1",children:"Country"}),r.jsxs("select",{id:"country",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon",children:[r.jsx("option",{value:"",children:"Select a country"}),r.jsx("option",{value:"US",children:"United States"}),r.jsx("option",{value:"IN",children:"India"}),r.jsx("option",{value:"CA",children:"Canada"}),r.jsx("option",{value:"UK",children:"United Kingdom"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-playfair text-xl font-bold text-neutral-800 mb-4",children:"Payment Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"cardName",className:"block text-neutral-700 mb-1",children:"Name on Card"}),r.jsx("input",{type:"text",id:"cardName",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"cardNumber",className:"block text-neutral-700 mb-1",children:"Card Number"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",id:"cardNumber",placeholder:"0000 0000 0000 0000",required:!0,className:"w-full p-2 pl-10 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"}),r.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-500"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"expDate",className:"block text-neutral-700 mb-1",children:"Expiration Date"}),r.jsx("input",{type:"text",id:"expDate",placeholder:"MM/YY",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"cvv",className:"block text-neutral-700 mb-1",children:"CVV"}),r.jsx("input",{type:"text",id:"cvv",placeholder:"123",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]})]})]})]}),r.jsx("button",{type:"submit",disabled:a,className:"btn-primary w-full text-center flex items-center justify-center mt-8",children:a?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Complete Purchase"})]})}),r.jsx("div",{children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"font-playfair text-xl font-bold text-neutral-800 mb-4",children:"Order Summary"}),r.jsx("div",{className:"max-h-60 overflow-y-auto mb-6 space-y-3",children:n.items.map(c=>r.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-neutral-100",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("img",{src:c.images?.[0]||"/placeholder.png",alt:c.name,className:"w-12 h-12 object-cover rounded-md"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:c.name}),r.jsxs("p",{className:"text-neutral-600 text-sm",children:["Qty: ",c.quantity]}),r.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:[c.selectedColor&&r.jsxs("span",{children:["Color: ",r.jsx("span",{style:{backgroundColor:c.selectedColor},className:"inline-block w-3 h-3 rounded-full align-middle mr-1 border"})," ",c.selectedColor]}),c.selectedSize&&r.jsxs("span",{className:"ml-2",children:["Size: ",c.selectedSize]})]})]})]}),r.jsx("span",{className:"text-neutral-800 font-medium",children:o(c.price*c.quantity)})]},c.id+"-"+(c.selectedColor||"")+"-"+(c.selectedSize||"")))}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-neutral-600",children:"Subtotal"}),r.jsx("span",{className:"text-neutral-800 font-medium",children:o(n.totalAmount)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-neutral-600",children:"Shipping"}),r.jsx("span",{className:"text-neutral-800 font-medium",children:"Free"})]}),r.jsxs("div",{className:"pt-3 border-t border-neutral-200 flex justify-between",children:[r.jsx("span",{className:"font-medium text-neutral-800",children:"Total"}),r.jsx("span",{className:"font-bold text-xl text-maroon",children:o(n.totalAmount)})]})]})]})})]})]})})};function ri(){return r.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-8",children:"About Saffron Society"}),r.jsxs("div",{className:"prose prose-lg max-w-none space-y-6",children:[r.jsx("p",{className:"text-gray-700",children:"Welcome to Saffron Society, where we celebrate the magic of Bollywood through unique, high-quality t-shirt designs inspired by cult classic films and iconic moments from Indian cinema."}),r.jsxs("section",{className:"mt-12",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Our Story"}),r.jsx("p",{className:"text-gray-700",children:"Born from a love of Bollywood's golden era and its timeless characters, Saffron Society brings you wearable art that captures the essence of Indian cinema. Each design is carefully crafted to pay homage to the films that shaped our culture and continue to inspire generations."})]}),r.jsxs("section",{className:"mt-8",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Our Mission"}),r.jsx("p",{className:"text-gray-700",children:'We believe that fashion should tell a story. Our mission is to create clothing that not only looks great but also connects you to the rich tapestry of Bollywood history. From the haunting melodies of "Bhoot Bangla" to the comedic genius of "Andaz Apna Apna," each t-shirt is a conversation starter and a piece of cinema history.'})]}),r.jsxs("section",{className:"mt-8",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Quality & Sustainability"}),r.jsx("p",{className:"text-gray-700",children:"All our products are printed on-demand using eco-friendly materials and processes. We partner with Printify to ensure high-quality prints that last, while minimizing waste and environmental impact."})]}),r.jsxs("section",{className:"mt-8",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Join the Society"}),r.jsx("p",{className:"text-gray-700",children:"Whether you're a die-hard Bollywood fan or simply appreciate unique design, Saffron Society has something for you. Wear your favorite films, share your passion, and become part of our growing community of cinema enthusiasts."})]})]})]})})})}const ni=()=>{const n=Ie(),e=ms(),{signIn:t,signUp:s,loading:a}=Fe(),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[d,u]=b.useState(""),[h,f]=b.useState({email:"",password:"",fullName:"",phone:""}),m=e.state?.from?.pathname||"/",g=async w=>{w.preventDefault(),u(""),c(!0);try{i?(await s(h.email,h.password,{full_name:h.fullName,phone:h.phone}),n("/account")):(await t(h.email,h.password),n(m,{replace:!0}))}catch(j){u(j.message||"An error occurred")}finally{c(!1)}};return a?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-yellow-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-yellow-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:i?"Create your account":"Sign in to your account"}),r.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",r.jsx("button",{onClick:()=>{o(!i),u("")},className:"font-medium text-orange-600 hover:text-orange-500",children:i?"sign in to existing account":"create a new account"})]})]}),r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[d&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-2",children:[r.jsx(ha,{className:"w-5 h-5"}),r.jsx("span",{children:d})]}),r.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[i&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"fullName",className:"sr-only",children:"Full Name"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(le,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"fullName",name:"fullName",type:"text",autoComplete:"name",required:i,value:h.fullName,onChange:w=>f({...h,fullName:w.target.value}),className:"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Full Name"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"sr-only",children:"Phone Number"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ca,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"phone",name:"phone",type:"tel",autoComplete:"tel",value:h.phone,onChange:w=>f({...h,phone:w.target.value}),className:"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Phone Number (optional)"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(ka,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:h.email,onChange:w=>f({...h,email:w.target.value}),className:`appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 ${i?"":"rounded-t-md"} focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm`,placeholder:"Email address"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(_a,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:i?"new-password":"current-password",required:!0,value:h.password,onChange:w=>f({...h,password:w.target.value}),className:"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Processing...":i?"Sign up":"Sign in"})})]})]})})},ai=()=>{const{user:n,profile:e,signOut:t,loading:s,isAuthenticated:a}=Fe(),[i,o]=b.useState(!1),[l,c]=b.useState(null),[d,u]=b.useState({email:"",full_name:"",phone:""}),h=async()=>{try{o(!0),await t()}catch(f){console.error("Error signing out:",f)}finally{o(!1)}};return b.useEffect(()=>{n&&u({email:n.email||"",full_name:n.user_metadata?.full_name||e?.full_name||"",phone:n.user_metadata?.phone||e?.phone||""})},[n,e]),s?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-yellow-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):!a||!n?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-yellow-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Please log in to view your account"}),r.jsx($,{to:"/login",className:"inline-block px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Go to Login"})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-yellow-50 py-12",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"My Account"}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[r.jsx("div",{className:"md:col-span-1",children:r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs($,{to:"/account",className:"flex items-center justify-between p-3 rounded-lg bg-orange-50 text-orange-600",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(le,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Profile"})]}),r.jsx(ze,{className:"w-4 h-4"})]}),r.jsxs($,{to:"/orders",className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ge,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Orders"})]}),r.jsx(ze,{className:"w-4 h-4"})]}),r.jsxs($,{to:"/wishlist",className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(St,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Wishlist"})]}),r.jsx(ze,{className:"w-4 h-4"})]}),r.jsxs($,{to:"/settings",className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Aa,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Settings"})]}),r.jsx(ze,{className:"w-4 h-4"})]}),r.jsx("button",{onClick:h,disabled:i,className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-gray-700",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ds,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:i?"Signing out...":"Sign Out"})]})})]})})}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Profile Information"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsx("input",{type:"email",id:"email",value:d.email,onChange:f=>u({...d,email:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),r.jsx("input",{type:"text",id:"full_name",value:d.full_name,onChange:f=>u({...d,full_name:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your full name"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),r.jsx("input",{type:"tel",id:"phone",value:d.phone,onChange:f=>u({...d,phone:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your phone number"})]}),r.jsx("div",{className:"pt-4",children:r.jsx("button",{type:"button",className:"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium",children:"Save Changes"})})]})]})})]})]})})})},ii=()=>{const{isAdmin:n,loading:e}=Fe(),t=Ie(),[s,a]=b.useState([]),[i,o]=b.useState({totalOrders:0,totalRevenue:0,totalCustomers:0,pendingOrders:0,monthlyRevenue:0,monthlyGrowth:0}),[l,c]=b.useState(!0),[d,u]=b.useState(""),[h,f]=b.useState("all"),[m,g]=b.useState(null);b.useEffect(()=>{!e&&!n?t("/"):n&&w()},[n,e,t]);const w=async()=>{if(!F){c(!1);return}try{c(!0);const{data:p,error:N}=await F.from("orders").select(`
          *,
          profiles:user_id (
            email,
            full_name
          )
        `).order("created_at",{ascending:!1});if(N)throw N;a(p||[]);const O=p?.length||0,R=p?.reduce((z,H)=>z+H.total,0)||0,B=p?.filter(z=>z.status==="pending").length||0,de=new Set(p?.map(z=>z.user_id)).size,V=new Date().getMonth(),Q=new Date().getFullYear(),_=(p?.filter(z=>{const H=new Date(z.created_at);return H.getMonth()===V&&H.getFullYear()===Q})||[]).reduce((z,H)=>z+H.total,0),y=V===0?11:V-1,E=V===0?Q-1:Q,Ne=(p?.filter(z=>{const H=new Date(z.created_at);return H.getMonth()===y&&H.getFullYear()===E})||[]).reduce((z,H)=>z+H.total,0),Ct=Ne>0?(_-Ne)/Ne*100:100;o({totalOrders:O,totalRevenue:R,totalCustomers:de,pendingOrders:B,monthlyRevenue:_,monthlyGrowth:Ct})}catch(p){console.error("Error fetching dashboard data:",p)}finally{c(!1)}},j=async(p,N)=>{if(F)try{const{error:O}=await F.from("orders").update({status:N,updated_at:new Date().toISOString()}).eq("id",p);if(O)throw O;w()}catch(O){console.error("Error updating order status:",O)}},k=()=>{const p=[["Order ID","Customer","Email","Total","Status","Date"],...C.map(B=>[B.id,B.profiles?.full_name||"N/A",B.profiles?.email||"N/A",`$${B.total.toFixed(2)}`,B.status,new Date(B.created_at).toLocaleDateString()])].map(B=>B.join(",")).join(`
`),N=new Blob([p],{type:"text/csv"}),O=window.URL.createObjectURL(N),R=document.createElement("a");R.href=O,R.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,R.click()},C=s.filter(p=>{const N=p.id.toLowerCase().includes(d.toLowerCase())||p.profiles?.email?.toLowerCase().includes(d.toLowerCase())||p.profiles?.full_name?.toLowerCase().includes(d.toLowerCase()),O=h==="all"||p.status===h;return N&&O}),x=p=>{switch(p){case"pending":return r.jsx(pa,{className:"w-4 h-4 text-yellow-500"});case"processing":return r.jsx(Ge,{className:"w-4 h-4 text-blue-500"});case"shipped":return r.jsx(Ta,{className:"w-4 h-4 text-purple-500"});case"delivered":return r.jsx(Nt,{className:"w-4 h-4 text-green-500"});case"cancelled":return r.jsx(Ra,{className:"w-4 h-4 text-red-500"});default:return null}};return e||l?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):F?n?r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage orders, view analytics, and more"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Orders"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalOrders})]}),r.jsx(Ge,{className:"w-8 h-8 text-orange-500"})]})}),r.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",i.totalRevenue.toFixed(2)]})]}),r.jsx(xa,{className:"w-8 h-8 text-green-500"})]})}),r.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Customers"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalCustomers})]}),r.jsx(Ia,{className:"w-8 h-8 text-blue-500"})]})}),r.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Revenue"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",i.monthlyRevenue.toFixed(2)]}),r.jsxs("p",{className:`text-sm mt-1 flex items-center gap-1 ${i.monthlyGrowth>=0?"text-green-600":"text-red-600"}`,children:[r.jsx(Oa,{className:"w-4 h-4"}),i.monthlyGrowth>=0?"+":"",i.monthlyGrowth.toFixed(1),"%"]})]}),r.jsx(ma,{className:"w-8 h-8 text-purple-500"})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Orders"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search orders...",value:d,onChange:p=>u(p.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),r.jsxs("select",{value:h,onChange:p=>f(p.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"processing",children:"Processing"}),r.jsx("option",{value:"shipped",children:"Shipped"}),r.jsx("option",{value:"delivered",children:"Delivered"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]}),r.jsxs("button",{onClick:k,className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors flex items-center gap-2",children:[r.jsx(va,{className:"w-4 h-4"}),"Export"]})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(p=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[p.id.substring(0,8),"..."]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:p.profiles?.full_name||"N/A"}),r.jsx("div",{className:"text-sm text-gray-500",children:p.profiles?.email})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",p.total.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-2",children:[x(p.status),r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                          ${p.status==="pending"?"bg-yellow-100 text-yellow-800":""}
                          ${p.status==="processing"?"bg-blue-100 text-blue-800":""}
                          ${p.status==="shipped"?"bg-purple-100 text-purple-800":""}
                          ${p.status==="delivered"?"bg-green-100 text-green-800":""}
                          ${p.status==="cancelled"?"bg-red-100 text-red-800":""}
                        `,children:p.status})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(p.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>g(p),className:"text-orange-600 hover:text-orange-900",children:r.jsx(ba,{className:"w-4 h-4"})}),r.jsxs("select",{value:p.status,onChange:N=>j(p.id,N.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"processing",children:"Processing"}),r.jsx("option",{value:"shipped",children:"Shipped"}),r.jsx("option",{value:"delivered",children:"Delivered"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})})]},p.id))})]})})]}),m&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Order Details"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Order ID"}),r.jsx("p",{className:"font-medium",children:m.id})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Customer"}),r.jsx("p",{className:"font-medium",children:m.profiles?.full_name||"N/A"}),r.jsx("p",{className:"text-sm text-gray-500",children:m.profiles?.email})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Shipping Address"}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded mt-1",children:[r.jsxs("p",{children:[m.shipping_address.firstName," ",m.shipping_address.lastName]}),r.jsx("p",{children:m.shipping_address.address1}),m.shipping_address.address2&&r.jsx("p",{children:m.shipping_address.address2}),r.jsxs("p",{children:[m.shipping_address.city,", ",m.shipping_address.state," ",m.shipping_address.zip]}),r.jsx("p",{children:m.shipping_address.country})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Items"}),r.jsx("div",{className:"space-y-2",children:m.items.map((p,N)=>r.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[r.jsx("p",{className:"font-medium",children:p.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Size: ",p.selectedSize,", Color: ",p.selectedColor]}),r.jsxs("p",{className:"text-sm",children:["$",p.price.toFixed(2)," x ",p.quantity," = $",(p.price*p.quantity).toFixed(2)]})]},N))})]}),r.jsx("div",{className:"border-t pt-4",children:r.jsxs("p",{className:"text-lg font-semibold",children:["Total: $",m.total.toFixed(2)]})})]}),r.jsx("button",{onClick:()=>g(null),className:"mt-6 w-full bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Close"})]})})})]})}):null:r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[r.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Admin Dashboard"}),r.jsxs("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-lg",children:[r.jsx("p",{className:"text-amber-800",children:"Database is currently not configured."}),r.jsx("p",{className:"text-sm text-amber-600 mt-2",children:"Please configure Supabase to enable admin features."})]})]})})})};function oi(){const n=Math.random().toString(36).substr(2,9).toUpperCase();return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12",children:r.jsxs(S.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"max-w-md w-full mx-4 text-center",children:[r.jsx(Nt,{className:"mx-auto h-16 w-16 text-green-500 mb-4"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Order Confirmed!"}),r.jsx("p",{className:"text-lg text-gray-700 mb-8",children:"Thank you for your order. We've sent a confirmation email with your order details."}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Order number:"}),r.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["#",n]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx($,{to:"/shop",className:"inline-block bg-orange-500 text-white font-semibold px-6 py-3 rounded-md hover:bg-orange-600 transition-colors",children:"Continue Shopping"}),r.jsx("p",{className:"text-sm text-gray-600",children:"You will receive an email confirmation shortly."})]})]})})}function li(){const n=Ie();return b.useEffect(()=>{console.log(" OAuth callback page loaded"),console.log(" Current URL:",window.location.href);const e=setTimeout(()=>{console.log(" Redirecting to account page..."),n("/account")},1e3);return()=>clearTimeout(e)},[n]),r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs(S.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-orange-500 border-t-transparent"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Completing sign in..."})]})})}const ci=({children:n})=>{const{isAuthenticated:e,loading:t}=Fe(),s=ms();return t?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-yellow-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e?r.jsx(r.Fragment,{children:n}):r.jsx(Js,{to:"/login",state:{from:s},replace:!0})};function di(){return r.jsx(Xs,{children:r.jsx(ca,{children:r.jsx(nr,{children:r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsx(za,{}),r.jsx("main",{className:"flex-grow",children:r.jsxs(Qs,{children:[r.jsx(W,{path:"/",element:r.jsx(Xa,{})}),r.jsx(W,{path:"/shop",element:r.jsx(Ya,{})}),r.jsx(W,{path:"/product/:id",element:r.jsx(ei,{})}),r.jsx(W,{path:"/cart",element:r.jsx(ti,{})}),r.jsx(W,{path:"/checkout",element:r.jsx(si,{})}),r.jsx(W,{path:"/about",element:r.jsx(ri,{})}),r.jsx(W,{path:"/login",element:r.jsx(ni,{})}),r.jsx(W,{path:"/account",element:r.jsx(ci,{children:r.jsx(ai,{})})}),r.jsx(W,{path:"/admin",element:r.jsx(ii,{})}),r.jsx(W,{path:"/order-confirmation",element:r.jsx(oi,{})}),r.jsx(W,{path:"/auth/callback",element:r.jsx(li,{})})]})}),r.jsx(Ha,{})]})})})})}const ui={reducedMotion:"user",transition:{type:"spring",stiffness:300,damping:30}};rr.createRoot(document.getElementById("root")).render(r.jsx(se.StrictMode,{children:r.jsx(Ys,{...ui,children:r.jsx(di,{})})}));
//# sourceMappingURL=index-BnOL2FyY.js.map
