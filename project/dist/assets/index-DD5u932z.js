import{a as Ws,b as Gs,g as hs,r as y,c as Ks,R as re,u as Ie,L as F,d as Vs,e as fs,N as Js,B as Xs,f as Ys,h as K}from"./react-vendor-DhpbOPac.js";import{m as _,A as He,M as Qs}from"./ui-vendor-BAFQOdfE.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var Ze={exports:{}},Se={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Et;function Zs(){if(Et)return Se;Et=1;var n=Ws(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var u,h={},m=null,f=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(f=c.ref);for(u in c)s.call(c,u)&&!i.hasOwnProperty(u)&&(h[u]=c[u]);if(l&&l.defaultProps)for(u in c=l.defaultProps,c)h[u]===void 0&&(h[u]=c[u]);return{$$typeof:e,type:l,key:m,ref:f,props:h,_owner:a.current}}return Se.Fragment=t,Se.jsx=o,Se.jsxs=o,Se}var At;function er(){return At||(At=1,Ze.exports=Zs()),Ze.exports}var r=er(),De={},Pt;function tr(){if(Pt)return De;Pt=1;var n=Gs();return De.createRoot=n.createRoot,De.hydrateRoot=n.hydrateRoot,De}var sr=tr();const rr=hs(sr),ms=y.createContext(void 0);function nr({children:n}){const[e,t]=y.useState(()=>{try{const d=localStorage.getItem("cart");if(d){const u=JSON.parse(d);return Array.isArray(u)?u:[]}return[]}catch(d){return console.error("Error loading cart from localStorage:",d),[]}});y.useEffect(()=>{try{localStorage.setItem("cart",JSON.stringify(e))}catch(d){console.error("Error saving cart to localStorage:",d)}},[e]);const s=(d,u,h,m=1)=>{t(f=>{const x=f.findIndex(b=>b.product.id===d.id&&(b.selectedSize||"")===u&&(b.selectedColor||"")===h);if(x>=0){const b=[...f];return b[x].quantity+=m,b}return[...f,{product:d,quantity:m,selectedSize:u,selectedColor:h}]})},a=(d,u,h)=>{console.log("RemoveItem called with:",{productId:d,size:u,color:h}),console.log("Current cart items:",e.map(m=>({id:m.product.id,size:m.selectedSize,color:m.selectedColor}))),t(m=>{const f=m.filter(x=>!(x.product.id===d&&(x.selectedSize||"")===u&&(x.selectedColor||"")===h));return console.log("Items after filter:",f.length,"vs before:",m.length),f})},i=(d,u,h,m)=>{if(m<=0){a(d,u,h);return}t(f=>f.map(x=>x.product.id===d&&(x.selectedSize||"")===u&&(x.selectedColor||"")===h?{...x,quantity:m}:x))},o=()=>{t([])},l=Array.isArray(e)?e.reduce((d,u)=>d+u.product.price*u.quantity,0):0,c=Array.isArray(e)?e.reduce((d,u)=>d+u.quantity,0):0;return r.jsx(ms.Provider,{value:{items:e,addItem:s,removeItem:a,updateQuantity:i,clearCart:o,total:l,itemCount:c},children:n})}function Fe(){const n=y.useContext(ms);if(!n)throw new Error("useCart must be used within CartProvider");return n}const ir="modulepreload",ar=function(n){return"/"+n},Ot={},$e=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");a=c(t.map(d=>{if(d=ar(d),d in Ot)return;Ot[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":ir,u||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((f,x)=>{m.addEventListener("load",f),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},or=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>$e(async()=>{const{default:s}=await Promise.resolve().then(()=>Ne);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class vt extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class lr extends vt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Tt extends vt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class It extends vt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var lt;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(lt||(lt={}));var cr=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};class dr{constructor(e,{headers:t={},customFetch:s,region:a=lt.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=or(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return cr(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=t;let l={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(b=>{throw new lr(b)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new Tt(h);if(!h.ok)throw new It(h);let f=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return f==="application/json"?x=yield h.json():f==="application/octet-stream"?x=yield h.blob():f==="text/event-stream"?x=h:f==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof It||a instanceof Tt?a.context:void 0}}})}}var M={},ue={},he={},fe={},me={},ge={},ur=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_e=ur();const hr=_e.fetch,gs=_e.fetch.bind(_e),ps=_e.Headers,fr=_e.Request,mr=_e.Response,Ne=Object.freeze(Object.defineProperty({__proto__:null,Headers:ps,Request:fr,Response:mr,default:gs,fetch:hr},Symbol.toStringTag,{value:"Module"})),gr=Ks(Ne);var Ue={},Ft;function xs(){if(Ft)return Ue;Ft=1,Object.defineProperty(Ue,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Ue.default=n,Ue}var $t;function ys(){if($t)return ge;$t=1;var n=ge&&ge.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ge,"__esModule",{value:!0});const e=n(gr),t=n(xs());class s{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,h,m;let f=null,x=null,b=null,v=d.status,j=d.statusText;if(d.ok){if(this.method!=="HEAD"){const k=await d.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?x=k:x=JSON.parse(k))}const p=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),g=(h=d.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");p&&g&&g.length>1&&(b=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(f={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,b=null,v=406,j="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const p=await d.text();try{f=JSON.parse(p),Array.isArray(f)&&d.status===404&&(x=[],f=null,v=200,j="OK")}catch{d.status===404&&p===""?(v=204,j="No Content"):f={message:p}}if(f&&this.isMaybeSingle&&(!((m=f?.details)===null||m===void 0)&&m.includes("0 rows"))&&(f=null,v=200,j="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:x,count:b,status:v,statusText:j}});return this.shouldThrowOnError||(c=c.catch(d=>{var u,h,m;return{error:{message:`${(u=d?.name)!==null&&u!==void 0?u:"FetchError"}: ${d?.message}`,details:`${(h=d?.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(m=d?.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,o)}returns(){return this}overrideTypes(){return this}}return ge.default=s,ge}var Rt;function bs(){if(Rt)return me;Rt=1;var n=me&&me.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(me,"__esModule",{value:!0});const e=n(ys());class t extends e.default{select(a){let i=!1;const o=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(d,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var u;const h=[a?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${m}"; options=${h};`,d==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return me.default=t,me}var Lt;function wt(){if(Lt)return fe;Lt=1;var n=fe&&fe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fe,"__esModule",{value:!0});const e=n(bs());class t extends e.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const o=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${o})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(a,`${c}fts${d}.${i}`),this}match(a){return Object.entries(a).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(a,i,o){return this.url.searchParams.append(a,`not.${i}.${o}`),this}or(a,{foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,i,o){return this.url.searchParams.append(a,`${i}.${o}`),this}}return fe.default=t,fe}var Dt;function vs(){if(Dt)return he;Dt=1;var n=he&&he.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(he,"__esModule",{value:!0});const e=n(wt());class t{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=i,this.schema=o,this.fetch=l}select(a,{head:i=!1,count:o}={}){const l=i?"HEAD":"GET";let c=!1;const d=(a??"*").split("").map(u=>/\s/.test(u)&&!c?"":(u==='"'&&(c=!c),u)).join("");return this.url.searchParams.set("select",d),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:i,defaultToNull:o=!0}={}){const l="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),o||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(a)){const d=a.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(d.length>0){const u=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){const d="POST",u=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&u.push(this.headers.Prefer),l&&u.push(`count=${l}`),c||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(a)){const h=a.reduce((m,f)=>m.concat(Object.keys(f)),[]);if(h.length>0){const m=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:i}={}){const o="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const i="DELETE",o=[];return a&&o.push(`count=${a}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return he.default=t,he}var Ce={},Ee={},Ut;function pr(){return Ut||(Ut=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.version=void 0,Ee.version="0.0.0-automated"),Ee}var Mt;function xr(){if(Mt)return Ce;Mt=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.DEFAULT_HEADERS=void 0;const n=pr();return Ce.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Ce}var Bt;function yr(){if(Bt)return ue;Bt=1;var n=ue&&ue.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ue,"__esModule",{value:!0});const e=n(vs()),t=n(wt()),s=xr();class a{constructor(o,{headers:l={},schema:c,fetch:d}={}){this.url=o,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),l),this.schemaName=c,this.fetch=d}from(o){const l=new URL(`${this.url}/${o}`);return new e.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new a(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:c=!1,get:d=!1,count:u}={}){let h;const m=new URL(`${this.url}/rpc/${o}`);let f;c||d?(h=c?"HEAD":"GET",Object.entries(l).filter(([b,v])=>v!==void 0).map(([b,v])=>[b,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([b,v])=>{m.searchParams.append(b,v)})):(h="POST",f=l);const x=Object.assign({},this.headers);return u&&(x.Prefer=`count=${u}`),new t.default({method:h,url:m,headers:x,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return ue.default=a,ue}var qt;function br(){if(qt)return M;qt=1;var n=M&&M.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(M,"__esModule",{value:!0}),M.PostgrestError=M.PostgrestBuilder=M.PostgrestTransformBuilder=M.PostgrestFilterBuilder=M.PostgrestQueryBuilder=M.PostgrestClient=void 0;const e=n(yr());M.PostgrestClient=e.default;const t=n(vs());M.PostgrestQueryBuilder=t.default;const s=n(wt());M.PostgrestFilterBuilder=s.default;const a=n(bs());M.PostgrestTransformBuilder=a.default;const i=n(ys());M.PostgrestBuilder=i.default;const o=n(xs());return M.PostgrestError=o.default,M.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:o.default},M}var vr=br();const wr=hs(vr),{PostgrestClient:jr,PostgrestQueryBuilder:va,PostgrestFilterBuilder:wa,PostgrestTransformBuilder:ja,PostgrestBuilder:_a,PostgrestError:Na}=wr;function _r(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Nr=_r(),kr="2.11.15",Sr=`realtime-js/${kr}`,Cr="1.0.0",ws=1e4,Er=1e3;var Pe;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Pe||(Pe={}));var q;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(q||(q={}));var J;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(J||(J={}));var ct;(function(n){n.websocket="websocket"})(ct||(ct={}));var le;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(le||(le={}));class Ar{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const a=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+a));o=o+a;const c=s.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class js{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})($||($={}));const zt=(n,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=Pr(o,n,e,a),i),{})},Pr=(n,e,t,s)=>{const a=e.find(l=>l.name===n),i=a?.type,o=t[n];return i&&!s.includes(i)?_s(i,o):dt(o)},_s=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Fr(e,t)}switch(n){case $.bool:return Or(e);case $.float4:case $.float8:case $.int2:case $.int4:case $.int8:case $.numeric:case $.oid:return Tr(e);case $.json:case $.jsonb:return Ir(e);case $.timestamp:return $r(e);case $.abstime:case $.date:case $.daterange:case $.int4range:case $.int8range:case $.money:case $.reltime:case $.text:case $.time:case $.timestamptz:case $.timetz:case $.tsrange:case $.tstzrange:return dt(e);default:return dt(e)}},dt=n=>n,Or=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Tr=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Ir=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Fr=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>_s(e,l))}return n},$r=n=>typeof n=="string"?n.replace(" ","T"):n,Ns=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class et{constructor(e,t,s={},a=ws){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ht;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Ht||(Ht={}));class Oe{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oe.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Oe.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Oe.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const i=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const m=u.map(v=>v.presence_ref),f=h.map(v=>v.presence_ref),x=u.filter(v=>f.indexOf(v.presence_ref)<0),b=h.filter(v=>m.indexOf(v.presence_ref)<0);x.length>0&&(l[d]=x),b.length>0&&(c[d]=b)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(e,t,s,a){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(f=>f.presence_ref),m=u.filter(f=>h.indexOf(f.presence_ref)<0);e[l].unshift(...m)}s(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,a(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wt;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Wt||(Wt={}));var Gt;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Gt||(Gt={}));var Q;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Q||(Q={}));class jt{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=q.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new et(this,J.join,this.params,this.timeout),this.rejoinTimer=new js(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=q.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=q.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=q.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=q.errored,this.rejoinTimer.scheduleTimeout())}),this._on(J.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Oe(this),this.broadcastEndpointURL=Ns(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==q.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>e?.(Q.CHANNEL_ERROR,u)),this._onClose(()=>e?.(Q.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e?.(Q.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,f=(h=m?.length)!==null&&h!==void 0?h:0,x=[];for(let b=0;b<f;b++){const v=m[b],{filter:{event:j,schema:N,table:p,filter:g}}=v,k=u&&u[b];if(k&&k.event===j&&k.schema===N&&k.table===p&&k.filter===g)x.push(Object.assign(Object.assign({},v),{id:k.id}));else{this.unsubscribe(),this.state=q.errored,e?.(Q.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Q.SUBSCRIBED);return}}).receive("error",u=>{this.state=q.errored,e?.(Q.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e?.(Q.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=q.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(J.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new et(this,J.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new et(this,e,t,s);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=J;if(s&&[l,c,d,u].indexOf(o)>=0&&s!==this._joinRef())return;let m=this._onMessage(o,t,s);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var x,b,v;return((x=f.filter)===null||x===void 0?void 0:x.event)==="*"||((v=(b=f.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(f=>f.callback(m,s)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var x,b,v,j,N,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const g=f.id,k=(x=f.filter)===null||x===void 0?void 0:x.event;return g&&((b=t.ids)===null||b===void 0?void 0:b.includes(g))&&(k==="*"||k?.toLocaleLowerCase()===((v=t.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const g=(N=(j=f?.filter)===null||j===void 0?void 0:j.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return g==="*"||g===((p=t?.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:b,table:v,commit_timestamp:j,type:N,errors:p}=x;m=Object.assign(Object.assign({},{schema:b,table:v,commit_timestamp:j,eventType:N,new:{},old:{},errors:p}),this._getPayloadRecords(x))}f.callback(m,s)})}_isClosed(){return this.state===q.closed}_isJoined(){return this.state===q.joined}_isJoining(){return this.state===q.joining}_isLeaving(){return this.state===q.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),i={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&jt.isEqual(a.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(J.close,{},e)}_onError(e){this._on(J.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=q.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=zt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=zt(e.columns,e.old_record)),t}}const Kt=()=>{},Rr=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Lr{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ws,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Kt,this.ref=0,this.logger=Kt,this.conn=null,this.sendBuffer=[],this.serializer=new Ar,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>$e(async()=>{const{default:c}=await Promise.resolve().then(()=>Ne);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${ct.websocket}`,this.httpEndpoint=Ns(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const a=(s=t?.params)===null||s===void 0?void 0:s.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t?.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new js(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Nr),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Cr}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Pe.connecting:return le.Connecting;case Pe.open:return le.Open;case Pe.closing:return le.Closing;default:return le.Closed}}isConnected(){return this.connectionState()===le.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new jt(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:Sr};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(J.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Er,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:a,payload:i,ref:o}=t;s==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(J.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Rr],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class _t extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function B(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Dr extends _t{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ut extends _t{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ur=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};const ks=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>$e(async()=>{const{default:s}=await Promise.resolve().then(()=>Ne);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Mr=()=>Ur(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $e(()=>Promise.resolve().then(()=>Ne),void 0)).Response:Response}),ht=n=>{if(Array.isArray(n))return n.map(t=>ht(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=ht(s)}),e};var de=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};const tt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Br=(n,e,t)=>de(void 0,void 0,void 0,function*(){const s=yield Mr();n instanceof s&&!t?.noResolveJson?n.json().then(a=>{e(new Dr(tt(a),n.status||500))}).catch(a=>{e(new ut(tt(a),a))}):e(new ut(tt(n),n))}),qr=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s&&(a.body=JSON.stringify(s)),Object.assign(Object.assign({},a),t))};function Re(n,e,t,s,a,i){return de(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(t,qr(e,s,a,i)).then(c=>{if(!c.ok)throw c;return s?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Br(c,l,s))})})}function We(n,e,t,s){return de(this,void 0,void 0,function*(){return Re(n,"GET",e,t,s)})}function te(n,e,t,s,a){return de(this,void 0,void 0,function*(){return Re(n,"POST",e,s,a,t)})}function zr(n,e,t,s,a){return de(this,void 0,void 0,function*(){return Re(n,"PUT",e,s,a,t)})}function Hr(n,e,t,s){return de(this,void 0,void 0,function*(){return Re(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Ss(n,e,t,s,a){return de(this,void 0,void 0,function*(){return Re(n,"DELETE",e,s,a,t)})}var z=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};const Wr={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gr{constructor(e,t={},s,a){this.url=e,this.headers=t,this.bucketId=s,this.fetch=ks(a)}uploadOrUpdate(e,t,s,a){return z(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Vt),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a?.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:l},o?.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:d,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(B(i))return{data:null,error:i};throw i}})}upload(e,t,s){return z(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return z(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:Vt.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(B(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return z(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const i=yield te(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new _t("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}})}update(e,t,s){return z(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return z(this,void 0,void 0,function*(){try{return{data:yield te(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(B(a))return{data:null,error:a};throw a}})}copy(e,t,s){return z(this,void 0,void 0,function*(){try{return{data:{path:(yield te(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(B(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return z(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield te(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(B(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return z(this,void 0,void 0,function*(){try{const a=yield te(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(B(a))return{data:null,error:a};throw a}})}download(e,t){return z(this,void 0,void 0,function*(){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield We(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(B(l))return{data:null,error:l};throw l}})}info(e){return z(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield We(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ht(s),error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}})}exists(e){return z(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Hr(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(B(s)&&s instanceof ut){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&a.push(i);const l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(e){return z(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}list(e,t,s){return z(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Wr),t),{prefix:e||""});return{data:yield te(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(B(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Kr="2.7.1",Vr={"X-Client-Info":`storage-js/${Kr}`};var pe=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};class Jr{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Vr),t),this.fetch=ks(s)}listBuckets(){return pe(this,void 0,void 0,function*(){try{return{data:yield We(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(B(e))return{data:null,error:e};throw e}})}getBucket(e){return pe(this,void 0,void 0,function*(){try{return{data:yield We(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return pe(this,void 0,void 0,function*(){try{return{data:yield te(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return pe(this,void 0,void 0,function*(){try{return{data:yield zr(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}})}emptyBucket(e){return pe(this,void 0,void 0,function*(){try{return{data:yield te(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}deleteBucket(e){return pe(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(B(t))return{data:null,error:t};throw t}})}}class Xr extends Jr{constructor(e,t={},s){super(e,t,s)}from(e){return new Gr(this.url,this.headers,e,this.fetch)}}const Yr="2.52.0";let Ae="";typeof Deno<"u"?Ae="deno":typeof document<"u"?Ae="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ae="react-native":Ae="node";const Qr={"X-Client-Info":`supabase-js-${Ae}/${Yr}`},Zr={headers:Qr},en={schema:"public"},tn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sn={};var rn=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};const nn=n=>{let e;return n?e=n:typeof fetch>"u"?e=gs:e=fetch,(...t)=>e(...t)},an=()=>typeof Headers>"u"?ps:Headers,on=(n,e,t)=>{const s=nn(t),a=an();return(i,o)=>rn(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:n;let d=new a(o?.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:d}))})};var ln=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};function cn(n){return n.endsWith("/")?n:n+"/"}function dn(n,e){var t,s;const{db:a,auth:i,realtime:o,global:l}=n,{db:c,auth:d,realtime:u,global:h}=e,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(t=h?.headers)!==null&&t!==void 0?t:{}),(s=l?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>ln(this,void 0,void 0,function*(){return""})};return n.accessToken?m.accessToken=n.accessToken:delete m.accessToken,m}const Cs="2.71.1",we=30*1e3,ft=3,st=ft*we,un="http://localhost:9999",hn="supabase.auth.token",fn={"X-Client-Info":`gotrue-js/${Cs}`},mt="X-Supabase-Api-Version",Es={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mn=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gn=600*1e3;class Nt extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function C(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class pn extends Nt{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function xn(n){return C(n)&&n.name==="AuthApiError"}class As extends Nt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ne extends Nt{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class ee extends ne{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function yn(n){return C(n)&&n.name==="AuthSessionMissingError"}class Me extends ne{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Be extends ne{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qe extends ne{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bn(n){return C(n)&&n.name==="AuthImplicitGrantRedirectError"}class Jt extends ne{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gt extends ne{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function rt(n){return C(n)&&n.name==="AuthRetryableFetchError"}class Xt extends ne{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class pt extends ne{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yt=` 	
\r=`.split(""),vn=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Yt.length;e+=1)n[Yt[e].charCodeAt(0)]=-2;for(let e=0;e<Ge.length;e+=1)n[Ge[e].charCodeAt(0)]=e;return n})();function Qt(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Ge[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Ge[s]),e.queuedBits-=6}}function Ps(n,e,t){const s=vn[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Zt(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{_n(o,s,t)};for(let o=0;o<n.length;o+=1)Ps(n.charCodeAt(o),a,i);return e.join("")}function wn(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function jn(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}wn(s,e)}}function _n(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Nn(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)Ps(n.charCodeAt(a),t,s);return new Uint8Array(e)}function kn(n){const e=[];return jn(n,t=>e.push(t)),new Uint8Array(e)}function Sn(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return n.forEach(a=>Qt(a,t,s)),Qt(null,t,s),e.join("")}function Cn(n){return Math.round(Date.now()/1e3)+n}function En(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const V=()=>typeof window<"u"&&typeof document<"u",ie={tested:!1,writable:!1},Os=()=>{if(!V())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ie.tested)return ie.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ie.tested=!0,ie.writable=!0}catch{ie.tested=!0,ie.writable=!1}return ie.writable};function An(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const Ts=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>$e(async()=>{const{default:s}=await Promise.resolve().then(()=>Ne);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Pn=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",je=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ae=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Z=async(n,e)=>{await n.removeItem(e)};class Ye{constructor(){this.promise=new Ye.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ye.promiseConstructor=Promise;function nt(n){const e=n.split(".");if(e.length!==3)throw new pt("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!mn.test(e[s]))throw new pt("JWT not in base64url format");return{header:JSON.parse(Zt(e[0])),payload:JSON.parse(Zt(e[1])),signature:Nn(e[2]),raw:{header:e[0],payload:e[1]}}}async function On(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Tn(n,e){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function In(n){return("0"+n.toString(16)).substr(-2)}function Fn(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let i=0;i<56;i++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,In).join("")}async function $n(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Rn(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await $n(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xe(n,e,t=!1){const s=Fn();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await je(n,`${e}-code-verifier`,a);const i=await Rn(s);return[i,s===i?"plain":"s256"]}const Ln=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Dn(n){const e=n.headers.get(mt);if(!e||!e.match(Ln))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Un(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Mn(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Bn=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ye(n){if(!Bn.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function it(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function es(n){return JSON.parse(JSON.stringify(n))}var qn=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};const oe=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),zn=[502,503,504];async function ts(n){var e;if(!Pn(n))throw new gt(oe(n),0);if(zn.includes(n.status))throw new gt(oe(n),n.status);let t;try{t=await n.json()}catch(i){throw new As(oe(i),i)}let s;const a=Dn(n);if(a&&a.getTime()>=Es["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Xt(oe(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ee}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Xt(oe(t),n.status,t.weak_password.reasons);throw new pn(oe(t),n.status||500,s)}const Hn=(n,e,t,s)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function E(n,e,t,s){var a;const i=Object.assign({},s?.headers);i[mt]||(i[mt]=Es["2024-01-01"].name),s?.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Wn(n,e,t+l,{headers:i,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(c):{data:Object.assign({},c),error:null}}async function Wn(n,e,t,s,a,i){const o=Hn(e,s,a,i);let l;try{l=await n(t,Object.assign({},o))}catch(c){throw console.error(c),new gt(oe(c),0)}if(l.ok||await ts(l),s?.noResolveJson)return l;try{return await l.json()}catch(c){await ts(c)}}function Y(n){var e;let t=null;Jn(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Cn(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function ss(n){const e=Y(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function se(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Gn(n){return{data:n,error:null}}function Kn(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:i}=n,o=qn(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Vn(n){return n}function Jn(n){return n.access_token&&n.refresh_token&&n.expires_in}const at=["global","local","others"];var Xn=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t};class Yn{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Ts(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=at[0]){if(at.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${at.join(", ")}`);try{return await E(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await E(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:se})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Xn(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await E(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Kn,redirectTo:t?.redirectTo})}catch(t){if(C(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await E(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:se})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await E(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Vn});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(x.split(";")[1].split("=")[1]);d[`${v}Page`]=b}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(C(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){ye(e);try{return await E(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:se})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ye(e);try{return await E(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:se})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){ye(e);try{return await E(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:se})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){ye(e.userId);try{const{data:t,error:s}=await E(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(C(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ye(e.userId),ye(e.id);try{return{data:await E(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}}function rs(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Qn(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const be={debug:!!(globalThis&&Os()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Is extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Zn extends Is{}async function ei(n,e,t){be.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),be.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){be.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{be.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw be.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Zn(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(be.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Qn();const ti={url:un,storageKey:hn,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fn,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ns(n,e,t){return await t()}const ve={};class Te{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Te.nextInstanceID,Te.nextInstanceID+=1,this.instanceID>0&&V()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},ti),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Yn({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Ts(a.fetch),this.lock=a.lock||ns,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:V()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=ei:this.lock=ns,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Os()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rs(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=rs(this.memoryStorage)),V()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=ve[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){ve[this.storageKey]=Object.assign(Object.assign({},ve[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=ve[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ve[this.storageKey]=Object.assign(Object.assign({},ve[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Cs}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=An(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),V()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),bn(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return C(t)?{error:t}:{error:new As("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const i=await E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Y}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,a;try{let i;if("email"in e){const{email:u,password:h,options:m}=e;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await xe(this.storage,this.storageKey)),i=await E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:u,password:h,data:(t=m?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:f,code_challenge_method:x},xform:Y})}else if("phone"in e){const{phone:u,password:h,options:m}=e;i=await E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=m?.data)!==null&&s!==void 0?s:{},channel:(a=m?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Y})}else throw new Be("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await E(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:ss})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await E(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:ss})}else throw new Be("You must provide either an email or phone number and a password");const{data:s,error:a}=t;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Me}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,a,i,o,l,c,d,u,h,m,f;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:v,wallet:j,statement:N,options:p}=e;let g;if(V())if(typeof j=="object")g=j;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))g=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!p?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=j}const k=new URL((t=p?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in g&&g.signIn){const S=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p?.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),N?{statement:N}:null));let O;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")O=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)O=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)x=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),b=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in g)||typeof g.signMessage!="function"||!("publicKey"in g)||typeof g!="object"||!g.publicKey||!("toBase58"in g.publicKey)||typeof g.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${k.host} wants you to sign in with your Solana account:`,g.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(s=p?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=p?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((d=p?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(u=p?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const S=await g.signMessage(new TextEncoder().encode(x),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=S}}try{const{data:v,error:j}=await E(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Sn(b)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Y});if(j)throw j;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Me}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:j})}catch(v){if(C(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const t=await ae(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:i,error:o}=await E(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Y});if(await Z(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Me}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(C(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:i,nonce:o}=e,l=await E(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Y}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Me}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,a,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await xe(this.storage,this.storageKey));const{error:h}=await E(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await E(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c?.data)!==null&&a!==void 0?a:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:u}}throw new Be("You must provide either an email or phone number.")}catch(l){if(C(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{let a,i;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await E(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Y});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(C(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,s,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await xe(this.storage,this.storageKey)),await E(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Gn})}catch(i){if(C(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new ee;const{error:a}=await E(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(C(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:i}=e,{error:o}=await E(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:a,options:i}=e,{data:o,error:l}=await E(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new Be("You must provide either an email or phone number and a type")}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ae(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<st:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await ae(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=it()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await E(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:se}):await this._useSession(async t=>{var s,a,i;const{data:o,error:l}=t;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ee}:await E(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:se})})}catch(t){if(C(t))return yn(t)&&(await this._removeSession(),await Z(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new ee;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await xe(this.storage,this.storageKey));const{data:d,error:u}=await E(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:se});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ee;const t=Date.now()/1e3;let s=t,a=!0,i=null;const{payload:o}=nt(e.access_token);if(o.exp&&(s=o.exp,a=s<=t),a){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(C(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new ee;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!V())throw new qe("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qe(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Jt("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qe("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Jt("No code detected.");const{data:N,error:p}=await this._exchangeCodeForSession(e.code);if(p)throw p;const g=new URL(window.location.href);return g.searchParams.delete("code"),window.history.replaceState(window.history.state,"",g.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new qe("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;c&&(m=parseInt(c));const f=m-u;f*1e3<=we&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const x=m-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,u);const{data:b,error:v}=await this._getUser(i);if(v)throw v;const j={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:e.type},error:null}}catch(s){if(C(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ae(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:i}=t;if(i)return{error:i};const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(xn(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Z(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=En(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await xe(this.storage,this.storageKey,!0));try{return await E(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(C(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await E(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return V()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(C(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:i,error:o}=t;if(o)throw o;return await E(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Tn(async a=>(a>0&&await On(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await E(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Y})),(a,i)=>{const o=200*Math.pow(2,a);return i&&rt(i)&&Date.now()+o-s<we})}catch(s){if(this._debug(t,"error",s),C(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),V()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await ae(this.storage,this.storageKey);if(a&&this.userStorage){let o=await ae(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await je(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o?.user)!==null&&e!==void 0?e:it()}else if(a&&!a.user&&!a.user){const o=await ae(this.storage,this.storageKey+"-user");o&&o?.user?(a.user=o.user,await Z(this.storage,this.storageKey+"-user"),await je(this.storage,this.storageKey,a)):a.user=it()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<st;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${st}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),rt(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&o?.user?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new ee;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ye;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ee;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),C(i)){const o={session:null,error:i};return rt(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await je(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const i=es(a);await je(this.storage,this.storageKey,i)}else{const a=es(t);await je(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Z(this.storage,this.storageKey),await Z(this.storage,this.storageKey+"-code-verifier"),await Z(this.storage,this.storageKey+"-user"),this.userStorage&&await Z(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&V()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),we);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/we);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${we}ms, refresh threshold is ${ft} ticks`),a<=ft&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Is)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!V()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await xe(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s?.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:i}=t;return i?{data:null,error:i}:await E(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:i,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await E(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=c?.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await E(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:i}=t;return i?{data:null,error:i}:await E(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=e?.factors||[],a=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=nt(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(t=a.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(l=>l.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+gn>a)return s;const{data:i,error:o}=await E(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:f,error:x}=await this.getSession();if(x||!f.session)return{data:null,error:x};s=f.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=nt(s);t?.allowExpired||Un(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:f}=await this.getUser(s);if(f)throw f;return{data:{claims:i,header:a,signature:o},error:null}}const u=Mn(a.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,kn(`${l}.${c}`)))throw new pt("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}}}Te.nextInstanceID=0;const si=Te;class ri extends si{constructor(e){super(e)}}var ni=function(n,e,t,s){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};class ii{constructor(e,t,s){var a,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=cn(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:en,realtime:sn,auth:Object.assign(Object.assign({},tn),{storageKey:d}),global:Zr},h=dn(s??{},u);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=on(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new jr(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new dr(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Xr(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return ni(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,storageKey:i,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ri({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Lr(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ai=(n,e,t)=>new ii(n,e,t),oi="https://qokxhvqxfzfgdmkvodyu.supabase.co",li="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFva3hodnF4ZnpmZ2Rta3ZvZHl1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNzYyODUsImV4cCI6MjA2Nzk1MjI4NX0.vM5xPPf8U8wGbLpZDWI_xmw8jBzpqKKUGg_ZtqzIFWQ",L=ai(oi,li),Fs=y.createContext(void 0);function Le(){const n=y.useContext(Fs);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}function ci({children:n}){const[e,t]=y.useState(null),[s,a]=y.useState(null),[i,o]=y.useState(null),[l,c]=y.useState(!0);y.useEffect(()=>{if(!L){c(!1);return}(async()=>{try{if(console.log(" Initializing auth..."),!L){c(!1);return}const{data:{session:p},error:g}=await L.auth.getSession();if(g){if(console.error(" Error getting session:",g),window.location.hash.includes("error=")){const k=new URLSearchParams(window.location.hash.substring(1)),S=k.get("error"),O=k.get("error_description");console.error(" OAuth error:",S,O),window.history.replaceState({},document.title,window.location.pathname)}}else p?(console.log(" Session found:",p),o(p),t(p.user),await d(p.user.id),window.location.hash.includes("access_token")&&(console.log(" Cleaning OAuth tokens from URL..."),window.history.replaceState({},document.title,window.location.pathname))):console.log(" No session found");c(!1)}catch(p){console.error(" Error initializing auth:",p),c(!1)}})();const{data:{subscription:N}}=L.auth.onAuthStateChange(async(p,g)=>{console.log(" Auth state change:",p),p==="SIGNED_IN"&&g?(console.log(" User signed in:",g.user),o(g),t(g.user),await d(g.user.id),window.location.hash.includes("access_token")&&(console.log(" Cleaning OAuth tokens from URL after sign in..."),window.history.replaceState({},document.title,"/account"))):p==="SIGNED_OUT"?(console.log(" User signed out"),o(null),t(null),a(null)):p==="TOKEN_REFRESHED"&&g?(console.log(" Token refreshed"),o(g)):p==="USER_UPDATED"&&g&&(console.log(" User updated:",g.user),t(g.user),await d(g.user.id))});return()=>N.unsubscribe()},[]);const d=async j=>{if(L)try{const{data:N,error:p}=await L.from("profiles").select("*").eq("id",j).single();if(p)throw p;a(N)}catch(N){console.error("Error fetching profile:",N),e?.email&&await u(j,e.email)}},u=async(j,N,p)=>{if(L)try{const{data:g,error:k}=await L.from("profiles").insert({id:j,email:N,full_name:p,role:"user"}).select().single();if(k)throw k;a(g)}catch(g){console.error("Error creating profile:",g)}},h=async(j,N)=>{if(!L)throw new Error("Authentication not available");const{error:p}=await L.auth.signInWithPassword({email:j,password:N});if(p)throw p},m=async(j,N,p)=>{if(!L)throw new Error("Authentication not available");const{data:g,error:k}=await L.auth.signUp({email:j,password:N,options:{data:{full_name:p}}});if(k)throw k;g.user&&await u(g.user.id,j,p)},f=async()=>{if(!L)throw new Error("Authentication not available");let j=window.location.origin;window.location.hostname.includes("github.dev")?j=`https://${window.location.hostname.split(".")[0]}-5174.app.github.dev`:window.location.hostname==="localhost"&&(j=`http://localhost:${window.location.port||"5174"}`),j=`${j}/account`,console.log(" Starting Google OAuth with redirect to:",j);const{error:N}=await L.auth.signInWithOAuth({provider:"google",options:{redirectTo:j,queryParams:{access_type:"offline",prompt:"consent"}}});if(N)throw console.error(" Google OAuth error:",N),N},x=async()=>{if(!L)throw new Error("Authentication not available");let j=window.location.origin;window.location.hostname.includes("github.dev")?j=`https://${window.location.hostname.split(".")[0]}-5174.app.github.dev`:window.location.hostname==="localhost"&&(j=`http://localhost:${window.location.port||"5174"}`),j=`${j}/account`;const{error:N}=await L.auth.signInWithOAuth({provider:"facebook",options:{redirectTo:j}});if(N)throw N},b=async()=>{try{console.log("Attempting to sign out..."),t(null);const{error:j}=await L.auth.signOut();j&&console.error("Supabase sign out error:",j),localStorage.removeItem("supabase.auth.token"),sessionStorage.clear(),console.log("Sign out completed")}catch(j){console.error("Sign out error:",j),t(null)}},v=s?.role==="admin";return r.jsx(Fs.Provider,{value:{user:e,profile:s,session:i,isAdmin:v,loading:l,signInWithEmail:h,signUpWithEmail:m,signInWithGoogle:f,signInWithFacebook:x,signOut:b},children:n})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var di={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),A=(n,e)=>{const t=y.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>y.createElement("svg",{ref:u,...di,width:a,height:a,stroke:s,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${ui(n)}`,l].join(" "),...d},[...e.map(([h,m])=>y.createElement(h,m)),...Array.isArray(c)?c:[c]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=A("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=A("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=A("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=A("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=A("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=A("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=A("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=A("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=A("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=A("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=A("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=A("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=A("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=A("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=A("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=A("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=A("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=A("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=A("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=A("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=A("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=A("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=A("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=A("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=A("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=A("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=A("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=A("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=A("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=A("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=A("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=A("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=A("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=A("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=A("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=A("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Ms={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},os=re.createContext&&re.createContext(Ms),$i=["attr","size","title"];function Ri(n,e){if(n==null)return{};var t=Li(n,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function Li(n,e){if(n==null)return{};var t={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function Ve(){return Ve=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Ve.apply(this,arguments)}function ls(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function Je(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ls(Object(t),!0).forEach(function(s){Di(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ls(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function Di(n,e,t){return e=Ui(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ui(n){var e=Mi(n,"string");return typeof e=="symbol"?e:e+""}function Mi(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Bs(n){return n&&n.map((e,t)=>re.createElement(e.tag,Je({key:t},e.attr),Bs(e.child)))}function qs(n){return e=>re.createElement(Bi,Ve({attr:Je({},n.attr)},e),Bs(n.child))}function Bi(n){var e=t=>{var{attr:s,size:a,title:i}=n,o=Ri(n,$i),l=a||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),re.createElement("svg",Ve({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,o,{className:c,style:Je(Je({color:n.color||t.color},t.style),n.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&re.createElement("title",null,i),n.children)};return os!==void 0?re.createElement(os.Consumer,null,t=>e(t)):e(Ms)}function cs(n){return qs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(n)}function qi(n){return qs({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(n)}function zi(){const{user:n,profile:e,isAdmin:t,signOut:s}=Le(),[a,i]=y.useState(!1),[o,l]=y.useState(!1),c=Fe(),d=Ie(),u=y.useRef(null),h=c.itemCount,m=async()=>{try{console.log("Sign out button clicked"),l(!1),await s(),console.log("Sign out successful, navigating to home"),d("/",{replace:!0})}catch(f){console.error("Sign out error:",f),d("/",{replace:!0})}};return y.useEffect(()=>{function f(x){u.current&&!u.current.contains(x.target)&&l(!1)}return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[]),r.jsxs("header",{className:"bg-gradient-to-r from-orange-100 via-yellow-50 to-orange-200 shadow-lg sticky top-0 z-50 backdrop-blur-sm",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex items-center justify-between h-16 relative overflow-visible",children:[r.jsx(F,{to:"/",className:"flex items-center group",children:r.jsx(_.h1,{className:"text-xl font-bold bg-gradient-to-r from-orange-600 to-yellow-600 bg-clip-text text-transparent",whileHover:{scale:1.05},transition:{duration:.2},children:"SAFFRON SOCIETY TEES"})}),r.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:[{to:"/",label:"Home"},{to:"/shop",label:"Shop"},{to:"/about",label:"About"}].map(f=>r.jsx(_.div,{whileHover:{y:-2},transition:{duration:.2},children:r.jsxs(F,{to:f.to,className:"relative text-gray-700 hover:text-orange-600 transition-colors font-medium group",children:[f.label,r.jsx("span",{className:"absolute inset-x-0 -bottom-1 h-0.5 bg-gradient-to-r from-orange-500 to-yellow-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-200"})]})},f.to))}),r.jsxs("div",{className:"flex items-center space-x-3",children:[n?r.jsxs("div",{className:"relative",ref:u,children:[r.jsxs(_.button,{onClick:()=>l(!o),className:"flex items-center space-x-2 p-2 rounded-full hover:bg-white/30 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full flex items-center justify-center",children:r.jsx(ce,{className:"w-4 h-4 text-white"})}),e?.full_name&&r.jsx("span",{className:"hidden md:block text-sm font-medium text-gray-700",children:e.full_name.split(" ")[0]})]}),r.jsx(He,{children:o&&r.jsxs(_.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 mt-2 w-48 bg-white/95 backdrop-blur-sm rounded-xl shadow-xl border border-white/40 py-2 z-50",children:[r.jsxs(F,{to:"/account",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-orange-50 transition-colors",onClick:()=>l(!1),children:[r.jsx(ce,{className:"w-4 h-4 mr-2"}),"My Account"]}),t&&r.jsxs(F,{to:"/admin",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-orange-50 transition-colors",onClick:()=>l(!1),children:[r.jsx(xt,{className:"w-4 h-4 mr-2"}),"Admin Panel"]}),r.jsx("hr",{className:"my-2 border-gray-200"}),r.jsxs("button",{onClick:m,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[r.jsx(qi,{className:"w-4 h-4"}),"Sign Out"]})]})})]}):r.jsx(_.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsxs(F,{to:"/account",className:"flex items-center space-x-2 px-3 py-2 bg-gradient-to-r from-orange-500 to-yellow-500 text-white rounded-full hover:from-orange-600 hover:to-yellow-600 transition-all font-medium shadow-md",children:[r.jsx(ce,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden md:block text-sm",children:"Login"})]})}),r.jsx(_.div,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"relative",children:r.jsxs(F,{to:"/cart",className:"relative p-2 rounded-full hover:bg-white/30 transition-colors flex items-center justify-center min-w-[40px] min-h-[40px]",children:[r.jsx(yt,{className:"h-6 w-6 text-gray-700 hover:text-orange-600 transition-colors"}),h>0&&r.jsx(_.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-gradient-to-r from-orange-500 to-yellow-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold shadow-lg min-w-[20px] z-10",children:h>99?"99+":h})]})}),r.jsx(_.button,{onClick:()=>i(!a),className:"md:hidden ml-4 p-2 rounded-full hover:bg-white/30 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.95},children:a?r.jsx(Us,{className:"h-6 w-6 text-gray-700"}):r.jsx(ki,{className:"h-6 w-6 text-gray-700"})})]})]})}),r.jsx(He,{children:a&&r.jsx(_.nav,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-gradient-to-r from-orange-50 via-yellow-25 to-orange-100 border-t border-orange-200/50 backdrop-blur-sm",children:r.jsxs("div",{className:"px-4 py-2 space-y-1",children:[[{to:"/",label:"Home"},{to:"/shop",label:"Shop"},{to:"/about",label:"About"}].map(f=>r.jsx(F,{to:f.to,className:"block py-3 px-2 text-gray-700 hover:text-orange-600 hover:bg-white/50 rounded-lg transition-all font-medium",onClick:()=>i(!1),children:f.label},f.to)),r.jsxs(F,{to:"/cart",className:"flex items-center py-3 px-2 text-gray-700 hover:text-orange-600 hover:bg-white/50 rounded-lg transition-all font-medium",onClick:()=>i(!1),children:[r.jsx(yt,{className:"w-4 h-4 mr-2"}),"Cart ",h>0&&`(${h})`]}),r.jsx("hr",{className:"my-2 border-orange-200"}),n?r.jsxs(r.Fragment,{children:[r.jsxs(F,{to:"/account",className:"flex items-center py-3 px-2 text-gray-700 hover:text-orange-600 hover:bg-white/50 rounded-lg transition-all font-medium",onClick:()=>i(!1),children:[r.jsx(ce,{className:"w-4 h-4 mr-2"}),"My Account"]}),t&&r.jsxs(F,{to:"/admin",className:"flex items-center py-3 px-2 text-gray-700 hover:text-orange-600 hover:bg-white/50 rounded-lg transition-all font-medium",onClick:()=>i(!1),children:[r.jsx(xt,{className:"w-4 h-4 mr-2"}),"Admin Panel"]}),r.jsxs("button",{onClick:()=>{m(),i(!1)},className:"flex items-center w-full py-3 px-2 text-gray-700 hover:text-orange-600 hover:bg-white/50 rounded-lg transition-all font-medium",children:[r.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]}):r.jsxs(F,{to:"/account",className:"flex items-center py-3 px-2 text-gray-700 hover:text-orange-600 hover:bg-white/50 rounded-lg transition-all font-medium",onClick:()=>i(!1),children:[r.jsx(ce,{className:"w-4 h-4 mr-2"}),"Login / Sign Up"]})]})})})]})}function Hi(){return r.jsx("footer",{className:"bg-gray-900 text-white py-8 mt-auto",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About Saffron Society"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Celebrating Bollywood's cult classics with unique t-shirt designs."})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx(F,{to:"/shop",className:"text-gray-400 hover:text-white transition",children:"Shop"})}),r.jsx("li",{children:r.jsx(F,{to:"/about",className:"text-gray-400 hover:text-white transition",children:"About"})}),r.jsx("li",{children:r.jsx(F,{to:"/account",className:"text-gray-400 hover:text-white transition",children:"My Account"})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Email: hello@saffronsociety.com"})]})]}),r.jsx("div",{className:"mt-8 pt-8 border-t border-gray-800 text-center text-sm text-gray-400",children:r.jsx("p",{children:" 2024 Saffron Society. All rights reserved."})})]})})}const Wi="/.netlify/functions/printify-products",Gi={black:"#000000",white:"#FFFFFF",gray:"#808080",grey:"#808080",red:"#FF0000",blue:"#0000FF",navy:"#000080",green:"#008000",yellow:"#FFFF00",orange:"#FFA500",purple:"#800080",pink:"#FFC0CB",brown:"#964B00",beige:"#F5F5DC",tan:"#D2B48C",maroon:"#800000",olive:"#808000",lime:"#00FF00",aqua:"#00FFFF",teal:"#008080",silver:"#C0C0C0",gold:"#FFD700",coral:"#FF7F50",salmon:"#FA8072",khaki:"#F0E68C",crimson:"#DC143C",fuchsia:"#FF00FF",magenta:"#FF00FF",indigo:"#4B0082",turquoise:"#40E0D0",chocolate:"#D2691E",charcoal:"#36454F",heather:"#9D9D9D",burgundy:"#800020",lavender:"#E6E6FA",mint:"#3EB489",rose:"#FF007F",sand:"#C2B280",sky:"#87CEEB",steel:"#4682B4",stone:"#918A84",wine:"#722F37"};function Ki(n){const e=n.toUpperCase();for(const[t,s]of Object.entries(Gi))if(s.toUpperCase()===e)return t.charAt(0).toUpperCase()+t.slice(1);return n}async function Qe(){try{const n=await fetch(Wi);if(!n.ok)throw new Error("Failed to fetch products");return(await n.json()).products||[]}catch(n){return console.error("Error fetching Printify products:",n),[]}}function ds(n){return n?typeof n=="string"?n:n&&typeof n=="object"&&n.src?n.src:n&&typeof n=="object"&&n.url?n.url:(console.warn("Could not normalize image:",n),"/assets/logo_big.png"):"/assets/logo_big.png"}const Vi=()=>{const[n,e]=y.useState(null),[t,s]=y.useState(!0);return y.useEffect(()=>{(async()=>{try{const i=await Qe();i&&i.length>0&&e(i[0])}catch(i){console.error("Failed to load latest product:",i)}finally{s(!1)}})()},[]),r.jsxs("section",{className:"relative min-h-[70vh] flex items-center justify-center overflow-visible bg-gradient-to-br from-orange-100 to-orange-200 py-20",children:[r.jsx("div",{className:"absolute inset-0 opacity-10",children:r.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),r.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[r.jsx(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.6},className:"relative flex justify-center items-center py-8",children:r.jsxs("div",{className:"relative group max-w-xs mx-auto",children:[r.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl overflow-hidden shadow-lg group-hover:shadow-2xl transition-all duration-300 border border-white/40 transform group-hover:scale-[1.02] group-hover:-translate-y-2",children:t?r.jsx("div",{className:"w-full h-[280px] bg-gradient-to-br from-gray-200 via-gray-100 to-gray-200 animate-pulse flex items-center justify-center",children:r.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"text-gray-600 font-medium text-xs",children:"Loading latest product..."})]})}):n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"aspect-square bg-transparent relative overflow-hidden",children:[r.jsx("img",{src:typeof n.image=="string"?n.image:n.image?.src||"/src/assets/logo_big.png",alt:n.name,className:"w-full h-full object-cover group-hover:scale-110 transition-all duration-500 filter drop-shadow-lg",onError:a=>{a.currentTarget.src="/src/assets/logo_big.png"}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/5 via-transparent to-orange-50/10 mix-blend-overlay"})]}),r.jsxs("div",{className:"p-3 bg-gradient-to-r from-white/90 to-orange-50/80 backdrop-blur-sm text-center",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2 group-hover:text-orange-700 transition-colors duration-200 uppercase tracking-wide leading-tight line-clamp-2",children:n.name}),n.colors&&n.colors.length>0&&r.jsxs("div",{className:"flex justify-center gap-1 mb-2",children:[n.colors.slice(0,4).map((a,i)=>r.jsxs(_.div,{className:"w-5 h-5 rounded-full border-2 border-white shadow-sm cursor-pointer relative group/swatch",style:{backgroundColor:a.hex},whileHover:{scale:1.3,zIndex:10},whileTap:{scale:.9},title:a.name,children:[r.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover/swatch:opacity-100 transition-opacity duration-200 whitespace-nowrap z-30 pointer-events-none",children:[a.name,r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-900"})]}),r.jsx("div",{className:"absolute inset-1 rounded-full border border-black/10",style:{borderColor:a.hex==="#FFFFFF"||a.hex==="#F7E1B0"?"#00000020":"transparent"}})]},i)),n.colors.length>4&&r.jsxs("div",{className:"w-5 h-5 rounded-full bg-gray-200 border-2 border-white shadow-sm flex items-center justify-center text-xs font-bold text-gray-600",children:["+",n.colors.length-4]})]}),r.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[r.jsxs("span",{className:"text-xl font-black text-orange-600",children:["$",(n.variants&&n.variants.length>0?Math.min(...n.variants.filter(a=>a.is_enabled).map(a=>a.price)):n.price).toFixed(2)]}),r.jsx("div",{className:"text-xs font-mono text-gray-500 uppercase",children:"CULT CLASSIC"})]}),r.jsxs(F,{to:`/product/${n.id}`,className:"group/button inline-flex items-center justify-center bg-gradient-to-r from-orange-500 to-yellow-500 text-white px-4 py-1.5 rounded-full font-bold text-xs hover:from-orange-600 hover:to-yellow-600 transition-all duration-300 shadow-xl border border-white/20 backdrop-blur-sm transform hover:scale-105 hover:-translate-y-1",children:[r.jsx("span",{className:"mr-1",children:"VIEW PRODUCT"}),r.jsx(cs,{className:"w-3 h-3 group-hover/button:translate-x-1 transition-transform duration-300"})]})]})]}):r.jsx("div",{className:"w-full h-[280px] bg-gradient-to-br from-gray-100/80 to-gray-200/80 backdrop-blur-sm flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full mx-auto mb-2 flex items-center justify-center",children:r.jsx("span",{className:"text-lg",children:""})}),r.jsx("span",{className:"text-gray-500 font-medium text-xs",children:"No products available"})]})})}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-200/40 via-yellow-100/30 to-orange-300/40 rounded-xl blur-xl scale-105 opacity-0 group-hover:opacity-100 transition-opacity duration-500 -z-10"}),r.jsx("div",{className:"absolute -top-2 -right-2 z-10",children:r.jsxs("div",{className:"relative bg-gradient-to-r from-orange-500 via-orange-400 to-yellow-400 text-white px-2 py-0.5 rounded-full text-xs font-bold shadow-lg",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-600 to-orange-500 rounded-full blur opacity-50"}),r.jsx("span",{className:"relative",children:t?"Loading...":" Latest Drop"})]})})]})}),r.jsxs("div",{className:"text-center lg:text-left",children:[r.jsxs(_.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-5xl sm:text-6xl lg:text-7xl font-bold text-gray-900 mb-6",children:[r.jsx("br",{}),"Wear the",r.jsx("br",{}),"Cult Classics."]}),r.jsx(_.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-xl sm:text-2xl text-gray-700 mb-8 max-w-2xl mx-auto lg:mx-0",children:"Bollywood's Golden Era Meets Modern Streetwear"}),r.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:r.jsxs(F,{to:"/shop",className:"inline-flex items-center gap-2 bg-orange-600 text-white px-8 py-4 rounded-full text-lg font-semibold hover:bg-orange-700 transition-colors",children:["Shop Collection",r.jsx(cs,{className:"w-5 h-5"})]})})]})]})}),r.jsx(_.div,{initial:{opacity:0,scale:0},animate:{opacity:.1,scale:1},transition:{duration:1,delay:.6},className:"absolute top-20 left-20 w-72 h-72 bg-orange-500 rounded-full filter blur-3xl"}),r.jsx(_.div,{initial:{opacity:0,scale:0},animate:{opacity:.1,scale:1},transition:{duration:1,delay:.8},className:"absolute bottom-20 right-20 w-96 h-96 bg-yellow-500 rounded-full filter blur-3xl"})]})},zs=({product:n})=>{const[e,t]=y.useState(0),[s,a]=y.useState(!0),[i,o]=y.useState(!1),{addItem:l}=Fe(),c=(()=>{try{if(!n.images||n.images.length===0)return"/assets/logo_big.png";if(n.images[e]){const x=n.images[e];return ds(x)}const f=n.images[0];return ds(f)}catch(f){return console.error("Error getting product image:",f),"/assets/logo_big.png"}})(),d=()=>{const f=n.colors?.[e]?.hex||"#000000",x=n.sizes?.[0]||"M";l(n,x,f)},u=()=>{a(!1),o(!1)},h=()=>{a(!1),o(!0)},m=()=>{const f=n.description||"";return f.includes("Soft cotton")||f.includes("vintage")||f.includes("bollywood")?f.slice(0,80)+"...":"Soft cotton. Iconic vibes. Designed for Desi streetwear heads."};return r.jsx(_.div,{whileHover:{y:-5},transition:{duration:.3},className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden group",children:r.jsxs(F,{to:`/product/${n.id}`,children:[r.jsxs("div",{className:"relative w-full aspect-[4/5] overflow-hidden",children:[s&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-black"})}),r.jsx("img",{src:i?"/assets/logo_big.png":c,alt:n.name,className:`object-cover w-full h-full transition-transform duration-500 group-hover:scale-105 ${s?"opacity-0":"opacity-100"}`,loading:"lazy",onLoad:u,onError:h}),r.jsx("div",{className:"absolute top-2 right-2 bg-white text-black text-xs font-semibold px-2 py-1 rounded-md shadow",children:"NEW"})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"text-lg font-semibold font-playfair leading-tight text-gray-900 line-clamp-2 min-h-[3.5rem]",children:n.name}),r.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:n.description||"Vintage Bollywood-inspired streetwear that tells a story."}),r.jsxs("div",{className:"flex items-center justify-between mt-3",children:[r.jsxs("span",{className:"text-base font-bold text-gray-900",children:["$",(n.variants&&n.variants.length>0?Math.min(...n.variants.filter(f=>f.is_enabled).map(f=>f.price)):n.price).toFixed(2)]}),r.jsx("div",{className:"flex gap-1",children:n.colors&&n.colors.length>0?r.jsxs(r.Fragment,{children:[n.colors.slice(0,3).map((f,x)=>r.jsx("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),t(x)},className:`w-4 h-4 rounded-full border transition-all duration-200 ${x===e?"border-gray-700 ring-2 ring-gray-700 ring-offset-1":"border-gray-300 hover:border-gray-500"}`,style:{backgroundColor:f.hex},title:f.name},x)),n.colors.length>3&&r.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["+",n.colors.length-3]})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:"#000000"}}),r.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:"#ffffff"}}),r.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:"#A82235"}})]})})]}),r.jsx("div",{className:"mt-4",children:r.jsxs("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),d()},className:"w-full bg-black text-white text-sm py-2 px-4 rounded-md hover:bg-gray-900 transition-colors duration-200 flex items-center justify-center gap-2",children:[r.jsx(St,{className:"w-4 h-4"}),"Add to Cart"]})}),r.jsxs("div",{className:"mt-3 text-xs text-gray-500 italic",children:[" Why You'll Love It:",r.jsx("span",{className:"block text-gray-700 not-italic font-normal mt-1",children:m()})]})]})]})})},Ji=({products:n,loading:e})=>{const[t,s]=y.useState([]),[a,i]=y.useState(!0),[o,l]=y.useState(null);return y.useEffect(()=>{if(n!==void 0){s(n),i(e||!1);return}(async()=>{try{i(!0),l(null);const d=await Qe();s(d.slice(0,4))}catch(d){console.error("Failed to load featured products:",d),l("Failed to load featured products. Please check your API configuration.")}finally{i(!1)}})()},[n,e]),a?r.jsx("section",{className:"section-padding bg-cream-50 relative",children:r.jsx("div",{className:"container-custom",children:r.jsxs("div",{className:"text-center",children:[r.jsx(_.div,{className:"inline-block w-12 h-12 border-4 border-saffron-200 border-t-saffron-500 rounded-full animate-spin",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),r.jsx("p",{className:"mt-4 text-neutral-600 font-montserrat",children:"Loading featured products..."})]})})}):o?r.jsx("section",{className:"section-padding bg-cream-50 relative",children:r.jsx("div",{className:"container-custom",children:r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"card p-8 max-w-md mx-auto",children:[r.jsx("p",{className:"text-error-600 mb-6 leading-relaxed",children:o}),r.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Retry Loading"})]})})})}):t.length===0?r.jsx("section",{className:"section-padding bg-cream-50 relative",children:r.jsx("div",{className:"container-custom",children:r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"card p-8 max-w-md mx-auto",children:[r.jsx(as,{className:"w-16 h-16 text-saffron-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-playfair font-semibold text-neutral-900 mb-2",children:"Coming Soon"}),r.jsx("p",{className:"text-neutral-600",children:"Our featured collection is being curated. Check back soon for amazing designs!"})]})})})}):r.jsxs("section",{className:"section-padding bg-cream-50 relative",children:[r.jsx("div",{className:"absolute inset-0 bg-paisley opacity-3"}),r.jsx("div",{className:"container-custom relative",children:r.jsxs(_.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsxs(_.div,{className:"inline-flex items-center gap-2 bg-saffron-100 text-saffron-800 rounded-full px-4 py-2 text-sm font-montserrat font-medium mb-4",initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},transition:{delay:.2,duration:.5},viewport:{once:!0},children:[r.jsx(as,{className:"w-4 h-4"}),"Handpicked for You"]}),r.jsx(_.h2,{className:"text-3xl md:text-4xl lg:text-5xl font-playfair font-bold text-neutral-900 mb-6",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.3,duration:.6},viewport:{once:!0},children:"Be Proud. Be Bold. Be You."}),r.jsx(_.p,{className:"text-lg text-neutral-600 max-w-3xl mx-auto leading-relaxed",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4,duration:.6},viewport:{once:!0}})]}),r.jsx("div",{className:"flex justify-end mb-6",children:r.jsxs(_.a,{href:"/shop",className:"text-primary hover:text-secondary transition-colors duration-300 font-montserrat font-medium group flex items-center gap-2",initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},transition:{delay:.3,duration:.6},viewport:{once:!0},whileHover:{x:5},children:[r.jsx("span",{children:"See More"}),r.jsx(fi,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8",children:t.map((c,d)=>r.jsx(_.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{delay:d*.15,duration:.6},viewport:{once:!0},children:r.jsx(zs,{product:c})},c.id))})]})})]})},Xi=()=>r.jsxs("div",{className:"min-h-screen",children:[r.jsx(Vi,{}),r.jsxs("div",{className:"relative -mt-20 z-10",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-orange-50 to-[#ffe4cc]"}),r.jsx("div",{className:"relative h-32"})]}),r.jsx("section",{className:"relative bg-gradient-to-b from-[#ffe4cc] to-[#fff0e5] pb-20",children:r.jsx(Ji,{})})]}),us=[{id:"1",name:"Baazigar (1993)  Pulp Grit",price:24.95,description:"A vintage-inspired design celebrating the iconic Bollywood thriller...",images:["/assets/products/baazigar-pulp-grit.jpg"],category:"Unisex",availableSizes:["S","M","L","XL","2XL"],availableColors:["#000000","#FFFFFF","#8B4513"]},{id:"mock-1",name:"Vintage Bollywood Hero Tee",description:"Channel the essence of classic Bollywood heroes with this vintage-inspired design featuring iconic retro typography and nostalgic color schemes.",price:29.99,image:"/assets/male-model.png",category:"T-Shirts",tags:["bollywood","vintage","hero","retro"],sizes:["S","M","L","XL","XXL"],colors:[{name:"Black",hex:"#000000"},{name:"Navy",hex:"#1A2237"},{name:"Maroon",hex:"#642838"}],variants:[{id:"mock-1-s",title:"Black / S",price:29.99,is_enabled:!0},{id:"mock-1-m",title:"Black / M",price:29.99,is_enabled:!0},{id:"mock-1-l",title:"Black / L",price:29.99,is_enabled:!0}]},{id:"mock-2",name:"Classic Cinema Design",description:"A tribute to the golden age of Indian cinema with artistic typography and cultural motifs that celebrate timeless storytelling.",price:32.99,image:"/assets/female-model.png",category:"T-Shirts",tags:["cinema","classic","artistic","cultural"],sizes:["S","M","L","XL","XXL"],colors:[{name:"White",hex:"#FFFFFF"},{name:"Royal",hex:"#274D91"},{name:"Forest",hex:"#223B26"}],variants:[{id:"mock-2-s",title:"White / S",price:32.99,is_enabled:!0},{id:"mock-2-m",title:"White / M",price:32.99,is_enabled:!0}]},{id:"mock-3",name:"Modern Fusion Streetwear",description:"Contemporary streetwear meets traditional aesthetics in this bold design that bridges past and present with striking visual elements.",price:27.99,image:"/assets/male-model-2.png",category:"T-Shirts",tags:["fusion","streetwear","modern","traditional"],sizes:["S","M","L","XL","XXL"],colors:[{name:"Gray",hex:"#808080"},{name:"Cherry Red",hex:"#A82235"}],variants:[{id:"mock-3-s",title:"Gray / S",price:27.99,is_enabled:!0},{id:"mock-3-m",title:"Gray / M",price:27.99,is_enabled:!0}]},{id:"mock-4",name:"Retro Dialogue Design",description:"Featuring iconic dialogue and memorable quotes from beloved films, this design celebrates the wit and wisdom of classic cinema.",price:31.99,image:"/assets/male-model-3.png",category:"T-Shirts",tags:["retro","dialogue","quotes","memorable"],sizes:["S","M","L","XL","XXL"],colors:[{name:"Black",hex:"#000000"},{name:"Navy",hex:"#1A2237"}],variants:[{id:"mock-4-s",title:"Black / S",price:31.99,is_enabled:!0},{id:"mock-4-m",title:"Black / M",price:31.99,is_enabled:!0}]}];async function Yi(){console.log("[products.ts] Fetching products from Printify API...");try{const n=await Qe();return!Array.isArray(n)||n.length===0?(console.log("[products.ts] No products returned from API, using fallback mock data"),us):(console.log(`[products.ts] Successfully fetched ${n.length} products from API`),n)}catch(n){return console.error("[products.ts] Error fetching from API, using fallback mock data:",n),us}}const Qi=()=>{const[n,e]=y.useState([]),[t,s]=y.useState(!0),[a,i]=y.useState(!1),[o,l]=y.useState(""),[c,d]=y.useState("all"),[u,h]=y.useState("all"),[m,f]=y.useState("all"),[x,b]=y.useState("all"),[v,j]=y.useState("featured"),[N,p]=y.useState(1),g=12;y.useEffect(()=>{(async()=>{try{s(!0);const P=await Yi();e(P)}catch(P){console.error("Error loading products:",P)}finally{s(!1)}})()},[]);const k=y.useMemo(()=>{let w=[...n];switch(o&&(w=w.filter(P=>P.name.toLowerCase().includes(o.toLowerCase())||P.description.toLowerCase().includes(o.toLowerCase()))),c!=="all"&&(w=w.filter(P=>P.name.toLowerCase().includes(c.toLowerCase()))),u!=="all"&&(w=w.filter(P=>P.name.includes(u))),m!=="all"&&(w=w.filter(P=>P.name.toLowerCase().includes(m.toLowerCase()))),x!=="all"&&(w=w.filter(P=>P.colors?.some(I=>I.name.toLowerCase()===x.toLowerCase()))),v){case"name":w.sort((P,I)=>P.name.localeCompare(I.name));break;case"price":w.sort((P,I)=>P.price-I.price);break;case"newest":w.sort((P,I)=>{const ke=parseInt(P.name.match(/\d{4}/)?.[0]||"0");return parseInt(I.name.match(/\d{4}/)?.[0]||"0")-ke});break}return w},[n,o,c,u,m,x,v]),S=y.useMemo(()=>{const w=(N-1)*g;return k.slice(w,w+g)},[k,N]),O=Math.ceil(k.length/g);y.useEffect(()=>{p(1)},[o,c,u,m,x,v]);const U=y.useMemo(()=>{const w=new Set;return n.forEach(P=>{const I=P.name.match(/^([^(]+)/)?.[1]?.trim();I&&w.add(I)}),Array.from(w).sort()},[n]),D=y.useMemo(()=>{const w=new Set;return n.forEach(P=>{const I=P.name.match(/\((\d{4})\)/)?.[1];I&&w.add(I)}),Array.from(w).sort((P,I)=>parseInt(I)-parseInt(P))},[n]),T=y.useMemo(()=>{const w=new Set;return n.forEach(P=>{const I=P.name.match(/\s*([^]+)$/)?.[1]?.trim();I&&w.add(I)}),Array.from(w).sort()},[n]),R=y.useMemo(()=>{const w=new Set;return n.forEach(P=>{P.colors?.forEach(I=>w.add(I.name))}),Array.from(w).sort()},[n]),[H,X]=y.useState("");return y.useEffect(()=>{const w=setTimeout(()=>{X(o)},300);return()=>clearTimeout(w)},[o]),y.useEffect(()=>{l(H)},[H]),r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-gradient-to-r from-orange-100 via-yellow-50 to-orange-100 py-12",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Shop Our Collection"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Discover unique designs that celebrate culture and heritage"})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[r.jsx(_.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:`lg:w-64 ${a?"block":"hidden lg:block"}`,children:r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),r.jsx("button",{onClick:()=>i(!1),className:"lg:hidden",children:r.jsx(Us,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:o,onChange:w=>l(w.target.value),placeholder:"Search products...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),r.jsxs("select",{value:v,onChange:w=>j(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"featured",children:"Featured"}),r.jsx("option",{value:"name",children:"Name"}),r.jsx("option",{value:"price",children:"Price"}),r.jsx("option",{value:"newest",children:"Newest"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Design"}),r.jsxs("select",{value:c,onChange:w=>d(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Designs"}),U.map(w=>r.jsx("option",{value:w,children:w},w))]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),r.jsxs("select",{value:u,onChange:w=>h(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Years"}),D.map(w=>r.jsx("option",{value:w,children:w},w))]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Style"}),r.jsxs("select",{value:m,onChange:w=>f(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Styles"}),T.map(w=>r.jsx("option",{value:w,children:w},w))]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),r.jsxs("select",{value:x,onChange:w=>b(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Colors"}),R.map(w=>r.jsx("option",{value:w,children:w},w))]})]}),r.jsx("button",{onClick:()=>{l(""),d("all"),h("all"),f("all"),b("all"),j("featured")},className:"w-full py-2 text-sm text-orange-600 hover:text-orange-700 font-medium",children:"Clear All Filters"})]})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"lg:hidden mb-4",children:r.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-sm text-gray-700 hover:bg-gray-50",children:[r.jsx(vi,{className:"w-5 h-5"}),"Filters"]})}),r.jsx("div",{className:"mb-6",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",S.length," of ",k.length," products"]})}),t?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(ji,{className:"w-8 h-8 animate-spin text-orange-500"})}):S.length===0?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"No products found matching your filters."})}):r.jsxs(r.Fragment,{children:[r.jsx(_.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map((w,P)=>r.jsx(_.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:P*.05},children:r.jsx(zs,{product:w})},w.id))}),O>1&&r.jsxs("div",{className:"mt-12 flex justify-center gap-2",children:[r.jsx("button",{onClick:()=>p(w=>Math.max(1,w-1)),disabled:N===1,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(O)].map((w,P)=>{const I=P+1;return I===1||I===O||I>=N-1&&I<=N+1?r.jsx("button",{onClick:()=>p(I),className:`px-4 py-2 text-sm font-medium rounded-lg ${N===I?"bg-orange-500 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:I},I):I===N-2||I===N+2?r.jsx("span",{className:"px-2",children:"..."},I):null}),r.jsx("button",{onClick:()=>p(w=>Math.min(O,w+1)),disabled:N===O,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})})]})},ot="/assets/logo_big-Dcd49tNZ.png",Zi=({productName:n,mainImage:e,productImages:t,onImageSelect:s,onImageError:a})=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs(_.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6},className:"relative aspect-square bg-white/70 backdrop-blur-lg rounded-2xl overflow-hidden border border-white/40 shadow-xl",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-transparent via-transparent to-orange-100/30 pointer-events-none"}),r.jsx("div",{className:"absolute top-4 left-4 z-10",children:r.jsx("div",{className:"bg-black/80 backdrop-blur-md text-amber-300 px-3 py-1.5 rounded-full text-xs font-bold tracking-wider border border-amber-400/30",children:"CULT CLASSICS"})}),r.jsx("img",{src:e,alt:n,className:"w-full h-full object-contain relative z-10",onError:a}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-orange-200/20 via-transparent to-transparent pointer-events-none"})]}),t.length>1&&r.jsx("div",{className:"grid grid-cols-4 gap-3",children:t.slice(0,8).map((i,o)=>r.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s(i),className:`aspect-square bg-white/60 backdrop-blur-md rounded-xl overflow-hidden border-2 transition-all shadow-lg ${e===i?"border-orange-400 shadow-orange-200/50":"border-white/40 hover:border-orange-300/60"}`,children:r.jsx("img",{src:i,alt:`${n} view ${o+1}`,className:"w-full h-full object-contain",onError:a})},o))})]}),Xe=n=>{const e=document.createElement("textarea");return e.innerHTML=n,e.value},ea=n=>{if(!n)return"";let e=Xe(n);e=e.replace(/^[-.\s]+/,"").trim(),e=e.replace(/\s*Design Highlights[^]*/s,"");const t=e.split(new RegExp("(?<=[.!?])\\s+")),s=t[t.length-1]?.trim(),a=/^[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{1F900}-\u{1F9FF}\u{1F018}-\u{1F0F5}]/u,i=s&&s.length>20&&!a.test(s)&&!s.includes(":");let o=e;i&&(o=e.substring(0,e.lastIndexOf(s)).trim());const l=/(?:^|\.\s*)([\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F900}-\u{1F9FF}]|[\u{1F018}-\u{1F0F5}])\s*/gu,c=Array.from(o.matchAll(l));if(c.length===0){let u=`<p>${o}</p>`;return i&&(u+=`<p class="font-bold text-gray-900 mt-6 text-center">${s}</p>`),u}let d="";if(c[0].index>0){const u=o.substring(0,c[0].index).trim();u&&u.length>10&&(d+=`<p>${u}</p>`)}for(let u=0;u<c.length;u++){const h=c[u],m=h[1],f=h.index+h[0].length,x=u<c.length-1?c[u+1].index:o.length,b=o.substring(f,x).trim();if(b){const v=b.indexOf(":");if(v!==-1){const j=b.substring(0,v).trim(),N=b.substring(v+1).trim();if(j&&(d+=`<h3>${m} ${j}</h3>`),N)if(j.toLowerCase().includes("design highlight")){const p=[],g=N.split(/\.\s*/);for(const k of g){const S=k.trim();if(!S||S.length<5)continue;const O=S.replace(/[\u{1F300}-\u{1F9FF}\u{1F600}-\u{1F64F}\u{1F680}-\u{1F6FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{1F900}-\u{1F9FF}\u{1FA70}-\u{1FAFF}\u{1F000}-\u{1F02F}\u{1F0A0}-\u{1F0FF}\u{1F100}-\u{1F1FF}]/gu,"").trim(),U=O.indexOf(":");if(U!==-1&&U<50){const D=O.substring(0,U).trim(),T=O.substring(U+1).trim();D&&T&&p.push(`<li><strong>${D}:</strong> ${T}</li>`)}else O&&p.push(`<li>${O}</li>`)}if(p.length>0)d+=`<ul class="list-disc space-y-2 ml-4 text-gray-700">${p.join("")}</ul>`;else{const k=N.replace(/\.$/,"").trim();d+=`<p>${k}</p>`}}else{const p=N.replace(/\.$/,"").trim();d+=`<p>${p}</p>`}}else{const j=b.indexOf(".");if(j!==-1&&j<50){const N=b.substring(0,j).trim(),p=b.substring(j+1).trim();d+=`<h3>${m} ${N}</h3>`,p&&(d+=`<p>${p}</p>`)}else{const N=b.replace(/\.$/,"").trim();d+=`<h3>${m} ${N}</h3>`}}}}return i&&(d+=`<p class="font-bold text-gray-900 mt-6 text-center">${s}</p>`),d},ta=n=>{const e=[],t=n.match(/\s*Design Highlights[^]*/s);if(!t)return e;const a=t[0].split(`
`).filter(i=>i.trim());for(const i of a){if(i.includes("Design Highlights"))continue;const o=i.replace(/^[\-*]\s*/,"").replace(/[\u{1F300}-\u{1F9FF}]/gu,"").trim();if(!o)continue;const l=o.indexOf(":");if(l>0&&l<50){const c=o.substring(0,l).trim(),d=o.substring(l+1).trim();c&&d&&e.push({title:c,description:d})}}return e},Hs=["XS","S","M","L","XL","2XL","3XL","4XL","5XL"],bt={"#000000":"#25282A","#DCD2BE":"#D7D2CB","#642838":"#5B2B42","#31221D":"#382F2D","#005C70":"#005D6F","#FF8E9D":"#DD74A1","#FFFFFF":"#FFFFFF","#F7E1B0":"#F4D1A1","#FFF6E3":"#FFFFFF","#223B26":"#273B33","#454545":"#333F48","#274D91":"#224D8F","#1A2237":"#263147","#A82235":"#AC2B37","#B54557":"#B15533","#F6F6F6":"#FFFFFF","#D3D590":"#F4D1A1","#6A798E":"#4D6995",Amethyst:"#6c4b94","Antique Cherry Red":"#971b2f","Antique Heliconia":"#aa0061","Antique Irish Green":"#00843d","Antique Jade Dome":"#006269","Antique Orange":"#b33d26","Antique Royal":"#003087","Antique Sapphire":"#006a8e",Ash:"#c8c9c7","Ash Grey":"#c8c9c7",Azalea:"#dd74a1","Baby Blue":"#69b3e7",Berry:"#7f2952",Black:"#25282a",Blackberry:"#221c35","Blue Dusk":"#253746","Bright Salmon":"#e5554f","Brown Savana":"#7a6855",Cactus:"#788a7a","Cardinal Red":"#8a1538","Caribbean Blue":"#00a9ce","Caribbean Mist":"#00a9ce","Carolina Blue":"#7ba4db","Carolina Blue Mist":"#7ba4db",Cement:"#aeaeae","Chalky Mint":"#5cb8b2",Chambray:"#bdd6e6",Charcoal:"#66676c","Charity Pink":"#f8a3bc","Cherry Red":"#ac2b37",Chestnut:"#83635c",Cobalt:"#171c8f","Coral Silk":"#fb637e",Cornsilk:"#f0ec74",Daisy:"#fed101","Dark Chocolate":"#382f2d","Dark Heather":"#425563","Dune Mist":"#7a7256","Dusty Rose":"#e1bbb4","Electric Green":"#43b02a","Flo Blue":"#5576d1",Forest:"#273b33","Galapagos Blue":"#005d6f",Garnet:"#7d2935",Gold:"#eead1a","Graphite Heather":"#707372",Gravel:"#888b8d",Gunmetal:"#939694","Heather Berry":"#994878","Heather Blue":"#3a5dae","Heather Bronze":"#c04c36","Heather Cardinal":"#9b2743","Heather Caribbean Blue":"#00afd7","Heather Coral Silk":"#ff808b","Heather Dark Green":"#3e5d58","Heather Grey":"#9ea2a2","Heather Heliconia":"#e24585","Heather Indigo":"#4d6995","Heather Irish Green":"#5caa7f","Heather Maroon":"#672e45","Heather Military Green":"#7e7f74","Heather Navy":"#333f48","Heather Orange":"#ff8d6d","Heather Purple":"#614b79","Heather Radiant Orchid":"#a15a95","Heather Red":"#bf0d3e","Heather Royal":"#307fe2","Heather Sapphire":"#0076a8","Heather Seafoam":"#40c1ac","Heather Sport Dark Maroon":"#651d32","Heather Sport Dark Navy":"#595478","Heather Sport Royal":"#1d4f91","Heather Sport Scarlet Red":"#b83a4b",Heliconia:"#db3e79",Honey:"#edaesa","Ice Grey":"#d7d2cb","Indigo Blue":"#486d87",Iris:"#3975b7","Irish Green":"#00a74a","Island Reef":"#8fd6bd","Jade Dome":"#00857d",Kelly:"#00805e","Kelly Green":"#00805e","Kelly Mist":"#00805e",Kiwi:"#89a84f","Lagoon Blue":"#4ac3e0","Legion Blue":"#1f495b","Light Blue":"#a3b3cb","Light Pink":"#e4c6d4",Lilac:"#563d82",Lime:"#92bf55","Marbled Charcoal":"#66676c","Marbled Galapagos Blue":"#005d6f","Marbled Heliconia":"#db3e79","Marbled Navy":"#263147","Marbled Royal":"#224d8f",Maroon:"#5b2b42","Maroon Mist":"#6d273c",Meadow:"#046a38","Metro Blue":"#464e7e",Midnight:"#005670","Military Green":"#5e7461","Mint Green":"#a0cfab",Moss:"#3d441e",Mustard:"#c3964d",Natural:"#e7ceb5",Navy:"#263147"},sa=n=>[{id:"about",title:"About product",content:{designTitle:Xe(n.name),designDescription:Xe(n.description||"Express yourself with this unique design from Saffron Society. Our premium quality t-shirts combine comfort with style, perfect for making a statement wherever you go."),features:["Premium quality cotton construction","Vibrant, long-lasting print","Comfortable unisex fit","Ethically sourced and produced"]}},{id:"details",title:"Product details",content:[{title:"Without side seams",description:"Knitted in one piece using tubular knit, it reduces fabric waste and makes the garment more attractive"},{title:"Ribbed knit collar without seam",description:"Ribbed knit makes the collar highly elastic and helps retain its shape"},{title:"Shoulder tape",description:"Twill tape covers the shoulder seams to stabilize the back of the garment and prevent stretching"},{title:"Fiber composition",description:"Solid colors are 100% cotton; Heather colors are 50% cotton, 50% polyester (Sport Grey is 90% cotton, 10% polyester); Antique colors are 90% cotton, 10% polyester"},{title:"Bigger shirt size",description:"The t-shirt runs bigger than usual giving extra space for comfort"},{title:"Fabric",description:'Environmentally-friendly manufactured cotton that gives thicker vintage feel to the shirt. Long-lasting garment suitable for everyday use. The "Natural" color is made with unprocessed cotton, which results in small black flecks throughout the fabric'},{title:"Age restrictions",description:"For adults and teens"},{title:"Other compliance information",description:"Meets the formaldehyde, phthalates, lead and flammability level requirements."}]},{id:"care",title:"Care instructions",content:["Machine wash: cold (max 30C or 90F)","Non-chlorine: bleach as needed","Do not tumble dry","Do not iron","Do not dryclean"]},{id:"shipping",title:"Shipping & delivery",content:"Accurate shipping options will be available in checkout after entering your full address."},{id:"returns",title:"30 day return policy",content:`Any goods purchased can only be returned in accordance with the Terms and Conditions and Returns Policy.

We want to make sure that you are satisfied with your order and we are committed to making things right in case of any issues. We will provide a solution in cases of any defects if you contact us within 30 days of receiving your order.

See Terms of Use`},{id:"gpsr",title:"GPSR",content:{euRep:"EU representative: Saffron Society, support@saffronsociety.com, 21 Attlebery Crescent, Paris, ON, N3L0H9, CA",productInfo:"Product information: Gildan 2000, 2 year warranty in EU and Northern Ireland as per Directive 1999/44/EC",warnings:"Warnings, Hazard: For adults",care:"Care instructions: Machine wash: cold (max 30C or 90F), Non-chlorine: bleach as needed, Do not tumble dry, Do not iron, Do not dryclean"}}],ra=({colors:n,selectedColor:e,selectedSize:t,onColorSelect:s,onSizeSelect:a,isSizeAvailable:i,hexToName:o})=>r.jsxs(r.Fragment,{children:[n&&n.length>0&&r.jsxs("div",{className:"mb-5",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-3",children:"Color"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(l=>{const c=typeof l=="string"?l:l.hex||l.name,d=typeof l=="string"?bt[l]||l:l.hex||bt[l.name]||l.name,u=typeof l=="string"?l:l.name;return r.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>s(c),className:`w-8 h-8 rounded-full border-2 transition-all shadow-md ${e===c?"border-gray-800 shadow-lg":"border-white/60 hover:border-gray-400"}`,style:{backgroundColor:d},title:u||o(c)},c)})}),e&&r.jsxs("p",{className:"text-sm text-gray-600 mt-2 font-medium",children:["Selected: ",n?.find(l=>l.hex===e)?.name||o(e)]})]}),r.jsxs("div",{className:"mb-5",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-3",children:"Size"}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:Hs.map(l=>{const c=i(l),d=t===l;return r.jsx(_.button,{whileHover:c?{scale:1.05}:{},whileTap:c?{scale:.95}:{},onClick:()=>c&&a(l),disabled:!c,className:`py-2 px-3 border-2 rounded-lg font-semibold transition-all text-sm ${d&&c?"border-orange-500 bg-orange-50 text-orange-700 shadow-md":c?"border-white/60 bg-white/50 hover:border-orange-300 hover:bg-orange-50/50":"border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:c?"":"line-through",children:l}),!c&&r.jsx("span",{className:"text-xs text-gray-400 mt-0.5",children:"Sold Out"})]})},l)})})]})]}),na=({description:n})=>{const[e,t]=y.useState(null),s=ta(n);return!n||s.length===0?null:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"space-y-2",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:" Design Highlights"}),s.map((a,i)=>r.jsx(_.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+i*.1},children:r.jsxs(_.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(e===i?null:i),className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-xl p-4 text-left transition-all shadow-md hover:shadow-lg",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-semibold",children:a.title}),r.jsx(_.div,{animate:{rotate:e===i?180:0},transition:{duration:.2},children:r.jsx(Rs,{className:"w-5 h-5"})})]}),r.jsx(He,{children:e===i&&r.jsx(_.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:r.jsx("p",{className:"mt-3 text-orange-50 text-sm leading-relaxed",children:a.description})})})]})},i))]})},ia=({product:n})=>{const[e,t]=y.useState(new Set(["about"])),s=i=>{t(o=>{const l=new Set(o);return l.has(i)?l.delete(i):l.add(i),l})},a=sa(n);return r.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/70 backdrop-blur-lg rounded-2xl border border-white/40 shadow-xl overflow-hidden",children:a.map(i=>r.jsxs("div",{className:"border-b border-white/30 last:border-b-0",children:[r.jsxs(_.button,{whileHover:{backgroundColor:"rgba(255, 255, 255, 0.1)"},onClick:()=>s(i.id),className:"w-full py-5 px-6 flex items-center justify-between text-left hover:text-orange-600 transition-colors",children:[r.jsx("h2",{className:"text-lg font-bold",children:i.title}),r.jsx(_.div,{animate:{rotate:e.has(i.id)?180:0},transition:{duration:.2},children:r.jsx(Rs,{className:"w-5 h-5"})})]}),r.jsx(He,{children:e.has(i.id)&&r.jsx(_.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:r.jsxs("div",{className:"pb-6 px-6 text-gray-700",children:[i.id==="about"&&i.content&&typeof i.content=="object"&&"designTitle"in i.content&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-xl p-4 border border-orange-100",children:[r.jsx("h3",{className:"text-xl font-bold font-playfair text-gray-900 mb-2 flex items-center gap-2",children:" The Design"}),r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3 leading-tight",children:i.content.designTitle})]}),r.jsx("div",{className:"bg-white/50 rounded-xl p-4 border border-gray-100",children:r.jsx("div",{className:`prose prose-sm max-w-none text-gray-700 leading-relaxed\r
                            [&>h2]:text-lg [&>h2]:font-bold [&>h2]:font-playfair [&>h2]:text-gray-900 [&>h2]:mt-4 [&>h2]:mb-3 [&>h2]:first:mt-0 [&>h2]:border-b [&>h2]:border-orange-200 [&>h2]:pb-2\r
                            [&>h3]:text-base [&>h3]:font-bold [&>h3]:text-gray-800 [&>h3]:mt-4 [&>h3]:mb-2 [&>h3]:flex [&>h3]:items-center [&>h3]:gap-2\r
                            [&>h4]:text-sm [&>h4]:font-semibold [&>h4]:text-gray-800 [&>h4]:mt-3 [&>h4]:mb-2 [&>h4]:text-orange-700\r
                            [&>p]:text-sm [&>p]:text-gray-700 [&>p]:mb-3 [&>p]:leading-relaxed [&>p]:text-justify\r
                            [&>p.font-bold]:text-base [&>p.font-bold]:mt-6 [&>p.font-bold]:text-center\r
                            [&>ul]:text-sm [&>ul]:text-gray-700 [&>ul]:mb-3 [&>ul]:space-y-2\r
                            [&>ul>li]:flex [&>ul>li]:items-start [&>ul>li]:gap-2\r
                            [&>ul>li]:before:content-[''] [&>ul>li]:before:text-orange-500 [&>ul>li]:before:font-bold [&>ul>li]:before:text-base\r
                            [&>ul>li>strong]:font-bold [&>ul>li>strong]:text-gray-900 [&>ul>li>strong]:bg-transparent\r
                            [&>strong]:font-bold [&>strong]:text-gray-900 [&>strong]:bg-yellow-100 [&>strong]:px-1 [&>strong]:rounded\r
                            [&>em]:italic [&>em]:text-orange-600 [&>em]:font-medium\r
                            [&_img]:rounded-lg [&_img]:shadow-md [&_img]:my-3`,dangerouslySetInnerHTML:{__html:ea(i.content.designDescription||"")}})}),i.content.features&&r.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200",children:[r.jsx("h4",{className:"text-base font-bold text-gray-900 mb-3 flex items-center gap-2",children:" Why You'll Love This Design"}),r.jsx("div",{className:"grid gap-3",children:i.content.features.map((o,l)=>r.jsxs("div",{className:"flex items-start gap-3 bg-white rounded-lg p-3 shadow-sm border border-gray-100",children:[r.jsx("span",{className:"w-6 h-6 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:l+1}),r.jsx("span",{className:"text-sm text-gray-700 font-medium",children:o})]},l))})]})]}),i.id==="details"&&Array.isArray(i.content)&&r.jsx("div",{className:"space-y-4",children:i.content.map((o,l)=>r.jsx("div",{children:typeof o=="object"&&o.title?r.jsxs(r.Fragment,{children:[r.jsx("h4",{className:"font-semibold mb-1",children:o.title}),r.jsx("p",{className:"text-sm",children:o.description})]}):r.jsx("p",{className:"text-sm",children:typeof o=="string"?o:""})},l))}),i.id==="care"&&Array.isArray(i.content)&&r.jsx("ul",{className:"space-y-1",children:i.content.map((o,l)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"text-orange-500 mr-2",children:""}),o]},l))}),i.id==="shipping"&&typeof i.content=="string"&&r.jsx("p",{children:i.content}),i.id==="returns"&&typeof i.content=="string"&&r.jsx("div",{className:"space-y-3",children:i.content.split(`

`).map((o,l)=>r.jsx("p",{children:o.includes("Terms of Use")?r.jsxs(r.Fragment,{children:[o.split("Terms of Use")[0],r.jsx("a",{href:"/terms",className:"text-orange-500 hover:text-orange-600 underline",children:"Terms of Use"})]}):o},l))}),i.id==="gpsr"&&i.content&&typeof i.content=="object"&&"euRep"in i.content&&r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsx("p",{children:i.content.euRep}),r.jsx("p",{children:i.content.productInfo}),r.jsx("p",{children:i.content.warnings}),r.jsx("p",{children:i.content.care})]})]})})})]},i.id))})},aa=()=>{const{id:n}=Vs(),e=Ie(),{addItem:t}=Fe(),[s,a]=y.useState(null),[i,o]=y.useState(!0),[l,c]=y.useState(""),[d,u]=y.useState(""),[h,m]=y.useState(Hs[2]),[f,x]=y.useState(0),[b,v]=y.useState(1);y.useEffect(()=>{g()},[n]),y.useEffect(()=>{s&&h&&j()},[s,h,d]),y.useEffect(()=>{s&&d&&N()},[d]);const j=()=>{if(!s)return;const D=s.colors?.find(R=>R.hex===d)?.name,T=s.variants?.find(R=>{const H=R.size===h,X=R.color?.toLowerCase()===D?.toLowerCase();return H&&X});if(T)x(T.price);else{const R=s.variants&&s.variants.length>0?Math.min(...s.variants.filter(H=>H.is_enabled).map(H=>H.price)):s.price;x(R)}},N=()=>{if(!s)return;const D=s.colors?.find(T=>T.hex===d||T.name.toLowerCase()===d.toLowerCase());D?.image?c(D.image):s.images&&s.images.length>0&&c(s.images[0])},p=D=>{if(!s||!s.variants)return!1;const T=s.colors?.find(R=>R.hex===d)?.name;return s.variants.some(R=>R.size===D&&R.color?.toLowerCase()===T?.toLowerCase()&&R.is_enabled)};async function g(){try{o(!0);const T=(await Qe()).find(R=>R.id===n);if(T){a(T);const R=T.images&&T.images.length>0?T.images[0]:typeof T.image=="string"?T.image:T.image?.src||ot;c(R),u(T.colors?.[0]?.hex||T.colors?.[0]?.name||"");const H=T.variants&&T.variants.length>0?Math.min(...T.variants.filter(X=>X.is_enabled).map(X=>X.price)):T.price;x(H)}}catch(D){console.error("Failed to load product:",D)}finally{o(!1)}}const k=()=>{s&&t(s,h,d,b)},S=D=>{D.currentTarget.src=ot},O=D=>{const T=Object.entries(bt).find(([R,H])=>H.toLowerCase()===D.toLowerCase());return T?T[0]:D};if(i)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})});if(!s)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Product not found"}),r.jsxs("button",{onClick:()=>e("/shop"),className:"text-orange-500 hover:text-orange-600 flex items-center gap-2 mx-auto",children:[r.jsx(is,{className:"w-4 h-4"}),"Back to products"]})]})});const U=s.images&&s.images.length>0?s.images:[typeof s.image=="string"?s.image:s.image?.src||ot];return r.jsx("div",{className:"min-h-screen py-8 px-4 md:px-8 bg-gradient-to-br from-amber-50 via-orange-50 to-red-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("button",{onClick:()=>e("/shop"),className:"mb-6 text-gray-700 hover:text-orange-600 flex items-center gap-2 transition-colors font-medium",children:[r.jsx(is,{className:"w-4 h-4"}),"Back to products"]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[r.jsx(Zi,{productImages:U,mainImage:l,onImageSelect:c,productName:s.name,onImageError:S}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/70 backdrop-blur-lg rounded-2xl p-5 border border-white/40 shadow-xl",children:[r.jsxs("div",{className:"mb-5",children:[r.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-2",children:Xe(s.name)}),r.jsxs("p",{className:"text-2xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:["$",f.toFixed(2)]})]}),r.jsx(ra,{colors:s.colors||[],selectedColor:d,selectedSize:h,onColorSelect:u,onSizeSelect:m,isSizeAvailable:p,hexToName:O}),r.jsxs("div",{className:"mb-5",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-3",children:"Quantity"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>v(Math.max(1,b-1)),className:"w-10 h-10 rounded-lg border-2 border-white/60 bg-white/50 hover:border-orange-300 hover:bg-orange-50/50 flex items-center justify-center transition-all font-bold",children:"-"}),r.jsx("span",{className:"w-12 text-center font-bold text-lg",children:b}),r.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>v(b+1),className:"w-10 h-10 rounded-lg border-2 border-white/60 bg-white/50 hover:border-orange-300 hover:bg-orange-50/50 flex items-center justify-center transition-all font-bold",children:"+"})]})]}),r.jsxs("div",{className:"flex gap-3 mb-5",children:[r.jsxs(_.button,{whileHover:p(h)?{scale:1.02}:{},whileTap:p(h)?{scale:.98}:{},onClick:p(h)?k:void 0,disabled:!p(h),className:`flex-1 py-3 px-5 rounded-lg font-bold transition-all flex items-center justify-center gap-2 shadow-md ${p(h)?"bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600":"bg-gray-400 text-gray-200 cursor-not-allowed"}`,children:[r.jsx(yt,{className:"w-4 h-4"}),p(h)?"Add to Cart":"Size Not Available"]}),r.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-3 border-2 border-white/60 bg-white/50 rounded-lg hover:border-red-300 hover:bg-red-50/50 transition-all",children:r.jsx(wi,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"border-t border-white/40 pt-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 font-medium",children:[r.jsx(Ke,{className:"w-4 h-4 text-orange-500"}),r.jsx("span",{children:"30 days return policy."}),r.jsx("a",{href:"/terms",className:"text-orange-600 hover:text-orange-700 underline font-semibold",children:"See details"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 font-medium",children:[r.jsx(xt,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{children:"Secure payments accepted"})]})]})]}),s.description&&r.jsx(na,{description:s.description}),r.jsx(ia,{product:s})]})]})]})})},oa=()=>{const{items:n,removeItem:e,updateQuantity:t,total:s}=Fe();y.useEffect(()=>{window.scrollTo(0,0)},[]);const a=i=>`$${i.toFixed(2)}`;return n.length===0?r.jsx("div",{className:"container-custom py-16",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-lg mx-auto text-center",children:[r.jsx(St,{className:"h-16 w-16 mx-auto text-neutral-300 mb-6"}),r.jsx("h1",{className:"font-playfair text-3xl font-bold text-maroon mb-4",children:"Your cart is empty"}),r.jsx("p",{className:"text-neutral-700 mb-8",children:"Looks like you haven't added any items to your cart yet. Browse our collection to find the perfect Bollywood-inspired tee for you."}),r.jsx(F,{to:"/products",className:"btn-primary",children:"Continue Shopping"})]})}):r.jsx("div",{className:"container-custom py-8 md:py-12",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsx("h1",{className:"font-playfair text-3xl font-bold text-maroon",children:"Your Cart"}),r.jsxs(F,{to:"/products",className:"flex items-center text-neutral-700 hover:text-maroon transition-colors",children:[r.jsx($s,{className:"h-4 w-4 mr-1"}),"Continue Shopping"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 pb-2 border-b border-neutral-200 text-neutral-500 font-medium",children:[r.jsx("div",{className:"col-span-6",children:"Product"}),r.jsx("div",{className:"col-span-2 text-center",children:"Price"}),r.jsx("div",{className:"col-span-2 text-center",children:"Quantity"}),r.jsx("div",{className:"col-span-2 text-right",children:"Total"})]}),n.map(i=>r.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-center py-4 border-b border-neutral-200",children:[r.jsxs("div",{className:"col-span-6 flex items-center",children:[r.jsx("img",{src:i.product.images?.[0]||"/placeholder.png",alt:i.product.name,className:"w-20 h-20 object-cover rounded-md"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:i.product.name}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[r.jsxs("span",{children:["Color:",r.jsx("span",{className:"inline-block w-4 h-4 rounded-full ml-1 mr-1 border border-gray-300",style:{backgroundColor:i.selectedColor}}),Ki(i.selectedColor||"")]}),r.jsxs("span",{children:["Size: ",i.selectedSize]})]})]})]}),r.jsx("div",{className:"hidden md:block col-span-2 text-center text-neutral-800 font-medium",children:a(i.product.price)}),r.jsx("div",{className:"col-span-2",children:r.jsxs("div",{className:"flex items-center justify-center border border-neutral-200 rounded-md max-w-32 mx-auto",children:[r.jsx("button",{onClick:()=>t(i.product.id,i.selectedSize||"",i.selectedColor||"",i.quantity-1),className:"text-neutral-600 hover:text-maroon transition-colors p-2","aria-label":"Decrease quantity",children:r.jsx(Si,{className:"h-4 w-4"})}),r.jsx("span",{className:"mx-3",children:i.quantity}),r.jsx("button",{onClick:()=>t(i.product.id,i.selectedSize||"",i.selectedColor||"",i.quantity+1),className:"text-neutral-600 hover:text-maroon transition-colors p-2","aria-label":"Increase quantity",children:r.jsx(Ei,{className:"h-4 w-4"})})]})}),r.jsxs("div",{className:"col-span-2 flex items-center justify-between md:justify-end",children:[r.jsx("span",{className:"font-semibold text-maroon",children:a(i.product.price*i.quantity)}),r.jsx("button",{onClick:()=>{console.log("Removing item:",{productId:i.product.id,size:i.selectedSize||"",color:i.selectedColor||""}),e(i.product.id,i.selectedSize||"",i.selectedColor||"")},className:"p-1 text-gray-400 hover:text-red-500 transition-colors","aria-label":"Remove item",children:r.jsx(Pi,{className:"w-4 h-4"})})]})]},i.product.id+"-"+(i.selectedColor||"")+"-"+(i.selectedSize||"")))]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"font-playfair text-xl font-bold text-neutral-800 mb-4",children:"Order Summary"}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-neutral-600",children:"Subtotal"}),r.jsx("span",{className:"text-neutral-800 font-medium",children:a(s)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-neutral-600",children:"Shipping"}),r.jsx("span",{className:"text-neutral-800 font-medium",children:"Free"})]}),r.jsxs("div",{className:"pt-3 border-t border-neutral-200 flex justify-between",children:[r.jsx("span",{className:"font-medium text-neutral-800",children:"Total"}),r.jsx("span",{className:"font-bold text-xl text-maroon",children:a(s)})]})]}),r.jsx(F,{to:"/checkout",className:"btn-primary w-full text-center",children:"Proceed to Checkout"})]})})]})]})})},la=()=>{const{state:n,clearCart:e}=Fe(),[t,s]=y.useState(!1),[a,i]=y.useState(!1);y.useEffect(()=>{window.scrollTo(0,0)},[]);const o=c=>`$${c.toFixed(2)}`,l=c=>{c.preventDefault(),i(!0),setTimeout(()=>{i(!1),s(!0),e()},1500)};return t?r.jsx("div",{className:"container-custom py-16",children:r.jsxs(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"max-w-lg mx-auto text-center",children:[r.jsx(kt,{className:"h-16 w-16 mx-auto text-success-500 mb-6"}),r.jsx("h1",{className:"font-playfair text-3xl font-bold text-maroon mb-4",children:"Order Confirmed!"}),r.jsx("p",{className:"text-neutral-700 mb-8",children:"Thank you for your purchase! Your order has been confirmed and will be shipped shortly. We've sent a confirmation email with all the details."}),r.jsx(F,{to:"/",className:"btn-primary",children:"Back to Home"})]})}):r.jsx("div",{className:"container-custom py-8 md:py-12",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsx("h1",{className:"font-playfair text-3xl font-bold text-maroon",children:"Checkout"}),r.jsxs(F,{to:"/cart",className:"flex items-center text-neutral-700 hover:text-maroon transition-colors",children:[r.jsx($s,{className:"h-4 w-4 mr-1"}),"Back to Cart"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("form",{onSubmit:l,className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"font-playfair text-xl font-bold text-neutral-800 mb-4",children:"Contact Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-neutral-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",id:"email",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-neutral-700 mb-1",children:"Phone Number"}),r.jsx("input",{type:"tel",id:"phone",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"font-playfair text-xl font-bold text-neutral-800 mb-4",children:"Shipping Address"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"firstName",className:"block text-neutral-700 mb-1",children:"First Name"}),r.jsx("input",{type:"text",id:"firstName",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"lastName",className:"block text-neutral-700 mb-1",children:"Last Name"}),r.jsx("input",{type:"text",id:"lastName",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{htmlFor:"address",className:"block text-neutral-700 mb-1",children:"Address"}),r.jsx("input",{type:"text",id:"address",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"city",className:"block text-neutral-700 mb-1",children:"City"}),r.jsx("input",{type:"text",id:"city",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"postalCode",className:"block text-neutral-700 mb-1",children:"Postal Code"}),r.jsx("input",{type:"text",id:"postalCode",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{htmlFor:"country",className:"block text-neutral-700 mb-1",children:"Country"}),r.jsxs("select",{id:"country",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon",children:[r.jsx("option",{value:"",children:"Select a country"}),r.jsx("option",{value:"US",children:"United States"}),r.jsx("option",{value:"IN",children:"India"}),r.jsx("option",{value:"CA",children:"Canada"}),r.jsx("option",{value:"UK",children:"United Kingdom"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-playfair text-xl font-bold text-neutral-800 mb-4",children:"Payment Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"cardName",className:"block text-neutral-700 mb-1",children:"Name on Card"}),r.jsx("input",{type:"text",id:"cardName",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"cardNumber",className:"block text-neutral-700 mb-1",children:"Card Number"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",id:"cardNumber",placeholder:"0000 0000 0000 0000",required:!0,className:"w-full p-2 pl-10 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"}),r.jsx(pi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-500"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"expDate",className:"block text-neutral-700 mb-1",children:"Expiration Date"}),r.jsx("input",{type:"text",id:"expDate",placeholder:"MM/YY",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"cvv",className:"block text-neutral-700 mb-1",children:"CVV"}),r.jsx("input",{type:"text",id:"cvv",placeholder:"123",required:!0,className:"w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-maroon"})]})]})]})]}),r.jsx("button",{type:"submit",disabled:a,className:"btn-primary w-full text-center flex items-center justify-center mt-8",children:a?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Complete Purchase"})]})}),r.jsx("div",{children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"font-playfair text-xl font-bold text-neutral-800 mb-4",children:"Order Summary"}),r.jsx("div",{className:"max-h-60 overflow-y-auto mb-6 space-y-3",children:n.items.map(c=>r.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-neutral-100",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("img",{src:c.images?.[0]||"/placeholder.png",alt:c.name,className:"w-12 h-12 object-cover rounded-md"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:c.name}),r.jsxs("p",{className:"text-neutral-600 text-sm",children:["Qty: ",c.quantity]}),r.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:[c.selectedColor&&r.jsxs("span",{children:["Color: ",r.jsx("span",{style:{backgroundColor:c.selectedColor},className:"inline-block w-3 h-3 rounded-full align-middle mr-1 border"})," ",c.selectedColor]}),c.selectedSize&&r.jsxs("span",{className:"ml-2",children:["Size: ",c.selectedSize]})]})]})]}),r.jsx("span",{className:"text-neutral-800 font-medium",children:o(c.price*c.quantity)})]},c.id+"-"+(c.selectedColor||"")+"-"+(c.selectedSize||"")))}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-neutral-600",children:"Subtotal"}),r.jsx("span",{className:"text-neutral-800 font-medium",children:o(n.totalAmount)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-neutral-600",children:"Shipping"}),r.jsx("span",{className:"text-neutral-800 font-medium",children:"Free"})]}),r.jsxs("div",{className:"pt-3 border-t border-neutral-200 flex justify-between",children:[r.jsx("span",{className:"font-medium text-neutral-800",children:"Total"}),r.jsx("span",{className:"font-bold text-xl text-maroon",children:o(n.totalAmount)})]})]})]})})]})]})})};function ca(){return r.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-8",children:"About Saffron Society"}),r.jsxs("div",{className:"prose prose-lg max-w-none space-y-6",children:[r.jsx("p",{className:"text-gray-700",children:"Welcome to Saffron Society, where we celebrate the magic of Bollywood through unique, high-quality t-shirt designs inspired by cult classic films and iconic moments from Indian cinema."}),r.jsxs("section",{className:"mt-12",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Our Story"}),r.jsx("p",{className:"text-gray-700",children:"Born from a love of Bollywood's golden era and its timeless characters, Saffron Society brings you wearable art that captures the essence of Indian cinema. Each design is carefully crafted to pay homage to the films that shaped our culture and continue to inspire generations."})]}),r.jsxs("section",{className:"mt-8",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Our Mission"}),r.jsx("p",{className:"text-gray-700",children:'We believe that fashion should tell a story. Our mission is to create clothing that not only looks great but also connects you to the rich tapestry of Bollywood history. From the haunting melodies of "Bhoot Bangla" to the comedic genius of "Andaz Apna Apna," each t-shirt is a conversation starter and a piece of cinema history.'})]}),r.jsxs("section",{className:"mt-8",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Quality & Sustainability"}),r.jsx("p",{className:"text-gray-700",children:"All our products are printed on-demand using eco-friendly materials and processes. We partner with Printify to ensure high-quality prints that last, while minimizing waste and environmental impact."})]}),r.jsxs("section",{className:"mt-8",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Join the Society"}),r.jsx("p",{className:"text-gray-700",children:"Whether you're a die-hard Bollywood fan or simply appreciate unique design, Saffron Society has something for you. Wear your favorite films, share your passion, and become part of our growing community of cinema enthusiasts."})]})]})]})})})}const da=()=>{const n=Ie(),e=fs(),{signIn:t,signUp:s,loading:a}=Le(),[i,o]=y.useState(!1),[l,c]=y.useState(!1),[d,u]=y.useState(""),[h,m]=y.useState({email:"",password:"",fullName:"",phone:""}),f=e.state?.from?.pathname||"/",x=async b=>{b.preventDefault(),u(""),c(!0);try{i?(await s(h.email,h.password,{full_name:h.fullName,phone:h.phone}),n("/account")):(await t(h.email,h.password),n(f,{replace:!0}))}catch(v){u(v.message||"An error occurred")}finally{c(!1)}};return a?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-yellow-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-yellow-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:i?"Create your account":"Sign in to your account"}),r.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",r.jsx("button",{onClick:()=>{o(!i),u("")},className:"font-medium text-orange-600 hover:text-orange-500",children:i?"sign in to existing account":"create a new account"})]})]}),r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[d&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-2",children:[r.jsx(hi,{className:"w-5 h-5"}),r.jsx("span",{children:d})]}),r.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[i&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"fullName",className:"sr-only",children:"Full Name"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(ce,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"fullName",name:"fullName",type:"text",autoComplete:"name",required:i,value:h.fullName,onChange:b=>m({...h,fullName:b.target.value}),className:"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Full Name"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"sr-only",children:"Phone Number"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ci,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"phone",name:"phone",type:"tel",autoComplete:"tel",value:h.phone,onChange:b=>m({...h,phone:b.target.value}),className:"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Phone Number (optional)"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ni,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:h.email,onChange:b=>m({...h,email:b.target.value}),className:`appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 ${i?"":"rounded-t-md"} focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm`,placeholder:"Email address"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(_i,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:i?"new-password":"current-password",required:!0,value:h.password,onChange:b=>m({...h,password:b.target.value}),className:"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Processing...":i?"Sign up":"Sign in"})})]})]})})},ua=()=>{const{user:n,profile:e,signOut:t,loading:s,isAuthenticated:a}=Le(),[i,o]=y.useState(!1),[l,c]=y.useState(null),[d,u]=y.useState({email:"",full_name:"",phone:""}),h=async()=>{try{o(!0),await t()}catch(m){console.error("Error signing out:",m)}finally{o(!1)}};return y.useEffect(()=>{n&&u({email:n.email||"",full_name:n.user_metadata?.full_name||e?.full_name||"",phone:n.user_metadata?.phone||e?.phone||""})},[n,e]),s?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-yellow-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):!a||!n?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-yellow-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Please log in to view your account"}),r.jsx(F,{to:"/login",className:"inline-block px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Go to Login"})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-yellow-50 py-12",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"My Account"}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[r.jsx("div",{className:"md:col-span-1",children:r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs(F,{to:"/account",className:"flex items-center justify-between p-3 rounded-lg bg-orange-50 text-orange-600",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ce,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Profile"})]}),r.jsx(ze,{className:"w-4 h-4"})]}),r.jsxs(F,{to:"/orders",className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ke,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Orders"})]}),r.jsx(ze,{className:"w-4 h-4"})]}),r.jsxs(F,{to:"/wishlist",className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(St,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Wishlist"})]}),r.jsx(ze,{className:"w-4 h-4"})]}),r.jsxs(F,{to:"/settings",className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ai,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Settings"})]}),r.jsx(ze,{className:"w-4 h-4"})]}),r.jsx("button",{onClick:h,disabled:i,className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-gray-700",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ls,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:i?"Signing out...":"Sign Out"})]})})]})})}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Profile Information"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsx("input",{type:"email",id:"email",value:d.email,onChange:m=>u({...d,email:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),r.jsx("input",{type:"text",id:"full_name",value:d.full_name,onChange:m=>u({...d,full_name:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your full name"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),r.jsx("input",{type:"tel",id:"phone",value:d.phone,onChange:m=>u({...d,phone:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your phone number"})]}),r.jsx("div",{className:"pt-4",children:r.jsx("button",{type:"button",className:"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium",children:"Save Changes"})})]})]})})]})]})})})},ha=()=>{const{isAdmin:n,loading:e}=Le(),t=Ie(),[s,a]=y.useState([]),[i,o]=y.useState({totalOrders:0,totalRevenue:0,totalCustomers:0,pendingOrders:0,monthlyRevenue:0,monthlyGrowth:0}),[l,c]=y.useState(!0),[d,u]=y.useState(""),[h,m]=y.useState("all"),[f,x]=y.useState(null);y.useEffect(()=>{!e&&!n?t("/"):n&&b()},[n,e,t]);const b=async()=>{if(!L){c(!1);return}try{c(!0);const{data:g,error:k}=await L.from("orders").select(`
          *,
          profiles:user_id (
            email,
            full_name
          )
        `).order("created_at",{ascending:!1});if(k)throw k;a(g||[]);const S=g?.length||0,O=g?.reduce((W,G)=>W+G.total,0)||0,U=g?.filter(W=>W.status==="pending").length||0,D=new Set(g?.map(W=>W.user_id)).size,T=new Date().getMonth(),R=new Date().getFullYear(),X=(g?.filter(W=>{const G=new Date(W.created_at);return G.getMonth()===T&&G.getFullYear()===R})||[]).reduce((W,G)=>W+G.total,0),w=T===0?11:T-1,P=T===0?R-1:R,ke=(g?.filter(W=>{const G=new Date(W.created_at);return G.getMonth()===w&&G.getFullYear()===P})||[]).reduce((W,G)=>W+G.total,0),Ct=ke>0?(X-ke)/ke*100:100;o({totalOrders:S,totalRevenue:O,totalCustomers:D,pendingOrders:U,monthlyRevenue:X,monthlyGrowth:Ct})}catch(g){console.error("Error fetching dashboard data:",g)}finally{c(!1)}},v=async(g,k)=>{if(L)try{const{error:S}=await L.from("orders").update({status:k,updated_at:new Date().toISOString()}).eq("id",g);if(S)throw S;b()}catch(S){console.error("Error updating order status:",S)}},j=()=>{const g=[["Order ID","Customer","Email","Total","Status","Date"],...N.map(U=>[U.id,U.profiles?.full_name||"N/A",U.profiles?.email||"N/A",`$${U.total.toFixed(2)}`,U.status,new Date(U.created_at).toLocaleDateString()])].map(U=>U.join(",")).join(`
`),k=new Blob([g],{type:"text/csv"}),S=window.URL.createObjectURL(k),O=document.createElement("a");O.href=S,O.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,O.click()},N=s.filter(g=>{const k=g.id.toLowerCase().includes(d.toLowerCase())||g.profiles?.email?.toLowerCase().includes(d.toLowerCase())||g.profiles?.full_name?.toLowerCase().includes(d.toLowerCase()),S=h==="all"||g.status===h;return k&&S}),p=g=>{switch(g){case"pending":return r.jsx(gi,{className:"w-4 h-4 text-yellow-500"});case"processing":return r.jsx(Ke,{className:"w-4 h-4 text-blue-500"});case"shipped":return r.jsx(Ti,{className:"w-4 h-4 text-purple-500"});case"delivered":return r.jsx(kt,{className:"w-4 h-4 text-green-500"});case"cancelled":return r.jsx(Fi,{className:"w-4 h-4 text-red-500"});default:return null}};return e||l?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):L?n?r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage orders, view analytics, and more"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Orders"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalOrders})]}),r.jsx(Ke,{className:"w-8 h-8 text-orange-500"})]})}),r.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",i.totalRevenue.toFixed(2)]})]}),r.jsx(xi,{className:"w-8 h-8 text-green-500"})]})}),r.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Customers"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalCustomers})]}),r.jsx(Ii,{className:"w-8 h-8 text-blue-500"})]})}),r.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Revenue"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",i.monthlyRevenue.toFixed(2)]}),r.jsxs("p",{className:`text-sm mt-1 flex items-center gap-1 ${i.monthlyGrowth>=0?"text-green-600":"text-red-600"}`,children:[r.jsx(Oi,{className:"w-4 h-4"}),i.monthlyGrowth>=0?"+":"",i.monthlyGrowth.toFixed(1),"%"]})]}),r.jsx(mi,{className:"w-8 h-8 text-purple-500"})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Orders"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search orders...",value:d,onChange:g=>u(g.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),r.jsxs("select",{value:h,onChange:g=>m(g.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"processing",children:"Processing"}),r.jsx("option",{value:"shipped",children:"Shipped"}),r.jsx("option",{value:"delivered",children:"Delivered"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]}),r.jsxs("button",{onClick:j,className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors flex items-center gap-2",children:[r.jsx(yi,{className:"w-4 h-4"}),"Export"]})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(g=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[g.id.substring(0,8),"..."]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:g.profiles?.full_name||"N/A"}),r.jsx("div",{className:"text-sm text-gray-500",children:g.profiles?.email})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",g.total.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-2",children:[p(g.status),r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                          ${g.status==="pending"?"bg-yellow-100 text-yellow-800":""}
                          ${g.status==="processing"?"bg-blue-100 text-blue-800":""}
                          ${g.status==="shipped"?"bg-purple-100 text-purple-800":""}
                          ${g.status==="delivered"?"bg-green-100 text-green-800":""}
                          ${g.status==="cancelled"?"bg-red-100 text-red-800":""}
                        `,children:g.status})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(g.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>x(g),className:"text-orange-600 hover:text-orange-900",children:r.jsx(bi,{className:"w-4 h-4"})}),r.jsxs("select",{value:g.status,onChange:k=>v(g.id,k.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"processing",children:"Processing"}),r.jsx("option",{value:"shipped",children:"Shipped"}),r.jsx("option",{value:"delivered",children:"Delivered"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})})]},g.id))})]})})]}),f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Order Details"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Order ID"}),r.jsx("p",{className:"font-medium",children:f.id})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Customer"}),r.jsx("p",{className:"font-medium",children:f.profiles?.full_name||"N/A"}),r.jsx("p",{className:"text-sm text-gray-500",children:f.profiles?.email})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Shipping Address"}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded mt-1",children:[r.jsxs("p",{children:[f.shipping_address.firstName," ",f.shipping_address.lastName]}),r.jsx("p",{children:f.shipping_address.address1}),f.shipping_address.address2&&r.jsx("p",{children:f.shipping_address.address2}),r.jsxs("p",{children:[f.shipping_address.city,", ",f.shipping_address.state," ",f.shipping_address.zip]}),r.jsx("p",{children:f.shipping_address.country})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Items"}),r.jsx("div",{className:"space-y-2",children:f.items.map((g,k)=>r.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[r.jsx("p",{className:"font-medium",children:g.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Size: ",g.selectedSize,", Color: ",g.selectedColor]}),r.jsxs("p",{className:"text-sm",children:["$",g.price.toFixed(2)," x ",g.quantity," = $",(g.price*g.quantity).toFixed(2)]})]},k))})]}),r.jsx("div",{className:"border-t pt-4",children:r.jsxs("p",{className:"text-lg font-semibold",children:["Total: $",f.total.toFixed(2)]})})]}),r.jsx("button",{onClick:()=>x(null),className:"mt-6 w-full bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Close"})]})})})]})}):null:r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[r.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Admin Dashboard"}),r.jsxs("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-lg",children:[r.jsx("p",{className:"text-amber-800",children:"Database is currently not configured."}),r.jsx("p",{className:"text-sm text-amber-600 mt-2",children:"Please configure Supabase to enable admin features."})]})]})})})};function fa(){const n=Math.random().toString(36).substr(2,9).toUpperCase();return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12",children:r.jsxs(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"max-w-md w-full mx-4 text-center",children:[r.jsx(kt,{className:"mx-auto h-16 w-16 text-green-500 mb-4"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Order Confirmed!"}),r.jsx("p",{className:"text-lg text-gray-700 mb-8",children:"Thank you for your order. We've sent a confirmation email with your order details."}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Order number:"}),r.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["#",n]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{to:"/shop",className:"inline-block bg-orange-500 text-white font-semibold px-6 py-3 rounded-md hover:bg-orange-600 transition-colors",children:"Continue Shopping"}),r.jsx("p",{className:"text-sm text-gray-600",children:"You will receive an email confirmation shortly."})]})]})})}function ma(){const n=Ie();return y.useEffect(()=>{console.log(" OAuth callback page loaded"),console.log(" Current URL:",window.location.href);const e=setTimeout(()=>{console.log(" Redirecting to account page..."),n("/account")},1e3);return()=>clearTimeout(e)},[n]),r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-orange-500 border-t-transparent"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Completing sign in..."})]})})}const ga=({children:n})=>{const{isAuthenticated:e,loading:t}=Le(),s=fs();return t?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-yellow-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e?r.jsx(r.Fragment,{children:n}):r.jsx(Js,{to:"/login",state:{from:s},replace:!0})};function pa(){return r.jsx(Xs,{children:r.jsx(ci,{children:r.jsx(nr,{children:r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsx(zi,{}),r.jsx("main",{className:"flex-grow",children:r.jsxs(Ys,{children:[r.jsx(K,{path:"/",element:r.jsx(Xi,{})}),r.jsx(K,{path:"/shop",element:r.jsx(Qi,{})}),r.jsx(K,{path:"/product/:id",element:r.jsx(aa,{})}),r.jsx(K,{path:"/cart",element:r.jsx(oa,{})}),r.jsx(K,{path:"/checkout",element:r.jsx(la,{})}),r.jsx(K,{path:"/about",element:r.jsx(ca,{})}),r.jsx(K,{path:"/login",element:r.jsx(da,{})}),r.jsx(K,{path:"/account",element:r.jsx(ga,{children:r.jsx(ua,{})})}),r.jsx(K,{path:"/admin",element:r.jsx(ha,{})}),r.jsx(K,{path:"/order-confirmation",element:r.jsx(fa,{})}),r.jsx(K,{path:"/auth/callback",element:r.jsx(ma,{})})]})}),r.jsx(Hi,{})]})})})})}const xa={reducedMotion:"user",transition:{type:"spring",stiffness:300,damping:30}};rr.createRoot(document.getElementById("root")).render(r.jsx(re.StrictMode,{children:r.jsx(Qs,{...xa,children:r.jsx(pa,{})})}));
//# sourceMappingURL=index-DD5u932z.js.map
